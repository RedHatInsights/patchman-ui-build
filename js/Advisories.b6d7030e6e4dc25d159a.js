(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[20],{80873:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>K});var n=r(96156),a=r(28481),o=r(86350),s=r(45697),l=r.n(s),i=r(77865),c=r.n(i),u=r(61084),m=r(334),f=r(30893),d=r(80943),p=r(90747),v=r(29287),y=r(44612),b=r(13784),E=r(32132);const h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reboot_required,n=c().useMemo((function(){return b.r_.map((function(e){var t=e.value;return{label:e.label,value:t.toString()}}))}),[]),a=r&&(Array.isArray(r)&&r.map((function(e){return e.toString()}))||[r.toString()]),o=function(t){e({filter:{reboot_required:t}})};return{label:E.N.formatMessage(f.Z.labelsFiltersReboot),type:y.Y.checkbox,filterValues:{onChange:function(e,t){o(t)},items:n,value:a,placeholder:E.N.formatMessage(f.Z.labelsFiltersRebootPlaceholder)}}};var g=r(49642),P=r(38776),_=r(64270),S=r(9557),Z=r(11220),O=r(57668),w=r(57358),A=r(91607),M=r(83215),j=r(92137),x=r(87757),N=r.n(x),k=r(52491),R=r(19210),F=r(36104),L=r(2095),C=r(49287),I=r(18038),q=r(85962),B=r(36001),z=r(42057),D=r(34348),T=r(18464),U=r(35240),G=function(e){var t=e.advisory,r=t.attributes,n=t.id;return c().createElement(L.Zb,null,c().createElement(F.l,null,(0,w.cX)(b.w8.advisories,n)),c().createElement(q.e,{className:"fonst-size-sm"},c().createElement(C.r,null,c().createElement(I.P,{span:6},c().createElement(C.r,null,c().createElement(I.P,null,c().createElement(T.Z,{type:r.advisory_type_name})),c().createElement(I.P,null,(0,U.Un)(r.public_date)),r.os_name&&c().createElement(I.P,null,r.os_name))),c().createElement(I.P,{span:6},c().createElement(C.r,null,r.severity&&c().createElement(I.P,null,c().createElement(B.k,{flex:{default:"inlineFlex"},style:{flexWrap:"nowrap"}},c().createElement(z.B,null,c().createElement(R.ZP,{size:"sm",color:b.QG[r.severity].color})),c().createElement(z.B,{isFilled:!0},b.QG[r.severity].label))),r.reboot_required&&c().createElement(I.P,null,c().createElement(B.k,{flex:{default:"inlineFlex"},style:{flexWrap:"nowrap"}},c().createElement(z.B,null,c().createElement(k.ZP,{color:"var(--pf-global--palette--red-100)"})),c().createElement(z.B,{isFilled:!0},E.N.formatMessage(f.Z.textRebootIsRequired)))))),c().createElement(I.P,null,(0,w.cX)(b.w8.advisories,n,E.N.formatMessage(f.Z.labelsApplicableSystemsCount,{systemsCount:r.applicable_systems}))),c().createElement(I.P,null,(0,w.Or)(r.synopsis)))))};G.propTypes={advisory:l().object};const Q=function(){var e=c().useState([]),t=(0,a.Z)(e,2),r=t[0],n=t[1];return c().useEffect((0,j.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,(0,Z.ob)({limit:4,sort:"-advisory_type_name,-applicable_systems"});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[]),r.data&&r.data.length&&c().createElement(o.Z,{style:{paddingBottom:0,paddingTop:0}},c().createElement(D.Dx,{headingLevel:"h3",className:"pf-u-my-md"},E.N.formatMessage(f.Z.titlesMostImpactfulAdvisories)),c().createElement(C.r,{hasGutter:!0,span:3},r.data.map((function(e){return c().createElement(I.P,{key:e.id},c().createElement(G,{advisory:e}))}))))||null};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var X=function(e){var t=e.history,r=E.N.formatMessage(f.Z.titlesAdvisories);(0,A.Iw)(r);var n=(0,u.useDispatch)(),s=c().useState(!0),l=(0,a.Z)(s,2),i=l[0],m=l[1],y=(0,u.useSelector)((function(e){return e.AdvisoryListStore.rows})),j=(0,u.useSelector)((function(e){return e.AdvisoryListStore.expandedRows})),x=(0,u.useSelector)((function(e){return e.AdvisoryListStore.queryParams})),N=(0,u.useSelector)((function(e){return e.AdvisoryListStore.selectedRows})),k=(0,u.useSelector)((function(e){return e.AdvisoryListStore.metadata})),R=(0,u.useSelector)((function(e){return e.AdvisoryListStore.status})),F=c().useMemo((function(){return(0,O.nf)(y,j,N)}),[y,j,N]);c().useEffect((function(){return function(){n((0,M.L1)())}}),[]),(0,A.KW)((function(){i?(T((0,w.PZ)(t.location.search)),m(!1)):(t.push((0,w.R_)(x)),n((0,S.hV)(x)))}),[x,i]);var L=c().useCallback((function(e,t,r){return n((0,S.rt)({rowId:(0,w.vs)(y,t),value:r}))})),C=(0,A.ry)(F,N,(function(){return(0,Z.ob)(V(V({},x),{},{limit:-1}))}),(function(e){n((0,S.EI)(e))}),(function(e){return e.id})),I=(0,A._f)(_.z7,T,2),q=c().useMemo((function(){return(0,w.hO)(_.z7,k.sort,2)}),[k.sort]),B=(0,A.AR)("advisories",x,{csv:Z.rf,json:Z.kM},n),z=(0,A.SL)(k.limit,T),D=(0,A._T)(T);function T(e){n((0,S.Us)(e))}var U=function(e){return(0,Z.lc)({limit:-1}).then((function(t){var r=t.data;return(0,Z.fq)({advisories:e,systems:r.map((function(e){return e.id}))})}))};return c().createElement(c().Fragment,null,c().createElement(g.Z,{title:E.N.formatMessage(f.Z.titlesPatchAdvisories),headerOUIA:"advisories"}),c().createElement(Q,null),c().createElement(o.Z,null,c().createElement(P.Z,{columns:_.z7,compact:!0,onCollapse:L,onSetPage:z,onPerPageSelect:D,onSort:I,onExport:B,selectedRows:N,onSelect:C,sortBy:q,remediationProvider:function(){return(0,w.Sz)((0,w.Qy)(N),U,w.R9,b.oN.advisory)},apply:T,remediationButtonOUIA:"toolbar-remediation-button",tableOUIA:"advisories-table",paginationOUIA:"advisories-pagination",store:{rows:F,metadata:k,status:R,queryParams:x},filterConfig:{items:[(0,p.Z)(T,x.search,E.N.formatMessage(f.Z.labelsFiltersSearchAdvisoriesTitle),E.N.formatMessage(f.Z.labelsFiltersSearchAdvisoriesPlaceholder)),(0,v.Z)(T,x.filter),(0,d.Z)(T,x.filter),h(T,x.filter)]},searchChipLabel:E.N.formatMessage(f.Z.labelsFiltersSearchAdvisoriesTitle)})))};X.propTypes={history:l().object};const K=(0,m.withRouter)(X)}}]);
//# sourceMappingURL=../sourcemaps/Advisories.ad09abee1fb9b04b7a98.js.map