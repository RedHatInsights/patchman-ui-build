"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[743],{83905:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(87462),r=n(29439),s=n(41375),l=n.n(s),o=n(13784),i=n(44612),c=n(80887),u=n(77221),m=n(82553),p=n(32132),d=n(30893);const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=l().useState(!1),s=(0,r.Z)(n,2),f=s[0],v=s[1],h=l().useState(10),y=(0,r.Z)(h,2),g=y[0],b=y[1],E=o.nW.slice().reverse(),S=e.os,O="string"==typeof S&&S.split(",")||[],Z=function(e,n){if(S&&!S.includes(n))t({filter:{os:"".concat(O.join(","),",").concat(n)}});else if(S&&S.includes(n)){var a=O.filter((function(e){return e!==n}));t({filter:{os:a.length>0&&"".concat(a.join(","))||void 0}})}else t({filter:{os:""!==n&&n||void 0}})},w=function(e){v(e)},P=function(){b(E.length)};return{type:i.Y.custom,label:p.N.formatMessage(d.Z.labelsFiltersOsVersion),value:"custom",filterValues:{children:l().createElement(c.Select,(0,a.Z)({variant:m.SelectVariant.checkbox,typeAheadAriaLabel:p.N.formatMessage(d.Z.labelsFiltersOsVersionPlaceholder),onToggle:w,onSelect:Z,selections:O,isOpen:f,"aria-labelledby":"patch-os-version-filter",placeholderText:p.N.formatMessage(d.Z.labelsFiltersOsVersionPlaceholder)},g<E.length&&{loadingVariant:{text:"View more",onClick:P}},{style:{maxHeight:"400px",overflow:"auto"}}),E.slice(0,g).map((function(e,t){return l().createElement(u.SelectOption,{key:t,value:e.value})})))}}}},49642:(e,t,n)=>{n.d(t,{Z:()=>E});var a=n(48716),r=n(39173),s=n(45697),l=n.n(s),o=n(41375),i=n.n(o),c=n(85991),u=n(49489),m=n(92818),p=function(e){var t=e.items,n=e.headerOUIA;return i().createElement(c.a,null,t.filter(Boolean).map((function(e){return i().createElement(u.g,{key:e.title,isActive:e.isActive},e.to&&i().createElement(m.Link,{to:e.to,"data-ouia-component-type":"".concat(n,"-breadcrumb"),"data-ouia-component-id":"breadcrumb-to-".concat(e.title)},e.title)||e.title)})))};p.propTypes={items:l().arrayOf(l().shape({isActive:l().bool,to:l().string,title:l().string})),headerOUIA:l().string};const d=p;var f=n(82819),v=n(98378),h=n(60076),y=function(e){var t=e.history,n=e.headerOUIA;return i().createElement(v.mQ,{onSelect:function(e,n){t.push(n)},activeKey:t.location.pathname,className:"patchman-tabs"},i().createElement(f.O,{eventKey:h.H.advisories.to,title:h.H.advisories.title,"data-ouia-component-type":"".concat(n,"-tab"),"data-ouia-component-id":"".concat(n,"-tab-").concat(h.H.advisories.title)}),i().createElement(f.O,{eventKey:h.H.systems.to,title:h.H.systems.title,"data-ouia-component-type":"".concat(n,"-tab"),"data-ouia-component-id":"".concat(n,"-tab-").concat(h.H.systems.title)}))};y.propTypes={history:l().object,headerOUIA:l().string};const g=(0,m.withRouter)(y);var b=function(e){var t=e.title,n=e.showTabs,s=e.breadcrumbs,l=e.children,o=e.headerOUIA;return i().createElement(i().Fragment,null,i().createElement(a.Z,{"data-ouia-component-type":"".concat(o,"-page-header")},s&&i().createElement(d,{items:s,headerOUIA:o}),i().createElement(r.Z,{title:t}),l),n&&i().createElement(g,{headerOUIA:o}))};b.propTypes={title:l().string,showTabs:l().bool,breadcrumbs:l().array,children:l().any,headerOUIA:l().string};const E=b},55485:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(41375),r=n.n(a),s=n(45697),l=n.n(s),o=n(22663),i=function(e){var t=e.data,n=e.setRemediationOpen;return r().createElement(o.Z,{appName:"remediations",module:"./RemediationWizard",setOpen:n,fallback:r().createElement("span",null),data:t})};i.propTypes={data:l().object,setRemediationOpen:l().func};const c=i},35485:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ft});var a=n(4942),r=n(15861),s=n(29439),l=n(87757),o=n.n(l),i=n(41375),c=n.n(i),u=n(72573),m=n(33739),p=n(86350),d=n(28216),f=n(92818),v=n(30893),h=n(90747),y=n(44612),g=n(13784),b=n(32132);const E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.stale,a=c().useMemo((function(){return g.fb.map((function(e){var t=e.value;return{label:e.label,value:t.toString()}}))}),[]),r=n&&(Array.isArray(n)&&n.map((function(e){return e.toString()}))||[n.toString()]),s=function(t){e({filter:{stale:t}})};return{label:b.N.formatMessage(v.Z.labelsFiltersStale),type:y.Y.checkbox,filterValues:{onChange:function(e,t){s(t)},items:a,value:r,placeholder:b.N.formatMessage(v.Z.labelsFiltersStalePlaceholder)}}};var S=n(83905);const O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.packages_updatable,a=function(t){e({filter:{packages_updatable:t}})};return{label:b.N.formatMessage(v.Z.labelsFiltersUpdatable),type:y.Y.radio,filterValues:{onChange:function(e,t){a(t)},items:g.Tl,value:n,placeholder:b.N.formatMessage(v.Z.labelsFiltersUpdatablePlaceholder)}}};var Z=n(49642),w=n(73888),P=n(88031),D=n(9557),T=n(5747),I=n(11220),j=n(57358),N=n(91607),k=n(58684),C=n(93433),F=n(35451),_=n(77927),x=n(19694),M=n(45697),R=n.n(M),A=n(36104),L=n(6202),U=n(26577),q=n(2095),B=n(49287),V=n(18038),G=n(85962),Y=n(36001),z=n(42057),H=function(e){var t=e.title,n=e.color,a=e.Icon,r=e.value,s=e.filter,l=e.apply;return c().createElement(q.Zb,{isCompact:!0,isFullHeight:!0},c().createElement(A.l,{style:{marginTop:"0px"}},t),c().createElement(G.e,{className:"fonst-size-sm"},c().createElement(Y.k,{flex:{default:"inlineFlex"},style:{flexWrap:"nowrap"}},c().createElement(z.B,{spacer:{default:"spacerMd"},alignSelf:{default:"alignSelfCenter"}},c().createElement(a,{color:n,size:"md"})),c().createElement(z.B,{isFilled:!0,spacer:{default:"spacerNone"}},void 0===r&&c().createElement(U.O,{width:"24px"})||c().createElement(L.Button,{variant:"link",onClick:function(){return l(s)},className:"patch-status-report-text"},r)))))},K=function(e){var t,n,a,l=e.apply,u=e.queryParams,m=c().useState({}),f=(0,s.Z)(m,2),h=f[0],y=f[1],g=(0,d.v9)((function(e){return e.GlobalFilterStore})),E=g.selectedTags,S=g.selectedGlobalTags,O=g.systemProfile;return(0,i.useMemo)((0,r.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y({}),e.prev=1,e.next=4,(0,I.lc)({filter:{os:null==u||null===(n=u.filter)||void 0===n?void 0:n.os},selectedTags:[].concat((0,C.Z)(E),(0,C.Z)(S)),systemProfile:O,limit:1});case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t=[];case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),[null==u||null===(t=u.filter)||void 0===t||null===(n=t.os)||void 0===n?void 0:n.length,void 0!==(null==u||null===(a=u.filter)||void 0===a?void 0:a.os),null==E?void 0:E.length,void 0!==E,null==S?void 0:S.length,void 0!==S,O,void 0!==(null==u?void 0:u.subtotals)]).then((function(e){var t;y(null===(t=e.meta)||void 0===t?void 0:t.subtotals)})),c().createElement(p.Z,{style:{paddingBottom:0}},c().createElement(B.r,{hasGutter:!0,span:12},c().createElement(V.P,{span:12,md:3},c().createElement(H,{title:b.N.formatMessage(v.Z.labelsStatusSystemsUpToDate),Icon:F.default,color:"var(--pf-global--success-color--100)",value:null==h?void 0:h.patched,apply:l,filter:{filter:{packages_updatable:"eq:0"}}})),c().createElement(V.P,{span:12,md:3},c().createElement(H,{title:b.N.formatMessage(v.Z.labelsStatusSystemsWithPatchesAvailable),Icon:_.ZP,color:"var(--pf-global--primary-color--100)",value:null==h?void 0:h.unpatched,apply:l,filter:{filter:{packages_updatable:"gt:0"}}})),c().createElement(V.P,{span:12,md:3},c().createElement(H,{title:b.N.formatMessage(v.Z.labelsStatusStaleSystems),Icon:x.default,color:"var(--pf-global--warning-color--100)",value:null==h?void 0:h.stale,apply:l,filter:{filter:{stale:!0}}}))))};H.propTypes={title:R().string,Icon:R().elementType,value:R().string,color:R().string,apply:R().func,filter:R().object},K.propTypes={apply:R().func,queryParams:R().object};const W=K;var $=n(87462),Q=n(93025),J=n(67850),X=n(96354),ee=n(26854),te=n(11947),ne=n(74777),ae=n(78826),re=n(45787),se=n(45987),le=n(48880),oe=n(41693),ie=n(63540),ce=n(20018),ue=n(81159),me=n(34023),pe=n(9568),de=n(80887),fe=n(77221),ve=n(82553),he=n(23811),ye=function(e){var t=e.patchSets,n=e.setSelectedPatchSet,a=e.selectedSets,r=e.systems,l=(0,le.default)(),o=(0,i.useState)(!0),u=(0,s.Z)(o,2),m=u[0],p=u[1],d=(0,i.useMemo)((function(){return t.map((function(e){return c().createElement(fe.SelectOption,{key:e.id,value:e.name})}))}),[t]);return c().createElement(he.c,{fieldId:"existing_patch_set",label:"Choose a Patch set",isRequired:!0},c().createElement(de.Select,{variant:ve.SelectVariant.single,"aria-label":"Select Input",onSelect:function(e,a){p(!1),n(a);var s=t.filter((function(e){return e.name===a}));l.change("existing_patch_set",{name:s[0].name,systems:r})},placeholderText:"Select an option",selections:a,onToggle:function(){p(!m)},isOpen:m,isDisabled:!1},d))};ye.propTypes={patchSets:R().array,setSelectedPatchSet:R().func,selectedSets:R().array,systems:R().array};const ge=ye;var be=n(64124),Ee=[{key:"display_name",title:"Name",props:{width:40}},{title:"OS",key:"os",props:{width:60}}],Se=[{name:"configuration-step",component:"configuration-step"},{name:"existing_patch_set",component:X.Z.TEXT_FIELD,hidden:!0}],Oe=[{name:"name",component:"nameField",validate:[{type:be.Z.REQUIRED}]}],Ze=[{name:"description",component:"descriptionField"}],we=[{name:"toDate",component:"toDateField",validate:[{type:be.Z.REQUIRED}]}],Pe={fields:[{component:X.Z.WIZARD,name:"patch-set-wizard",isDynamic:!0,inModal:!0,showTitles:!0,title:b.N.formatMessage(v.Z.patchSetTitle),description:b.N.formatMessage(v.Z.patchSetDescription),fields:[{name:"patch-set-config",title:b.N.formatMessage(v.Z.patchSetNewSet),fields:Se,nextStep:"systems"},{name:"systems",title:b.N.formatMessage(v.Z.patchSetSelectSystems),fields:[{name:"systems",component:"review-systems",validate:[{type:"validate-systems"}]}],nextStep:"review"},{name:"review",title:b.N.formatMessage(v.Z.patchSetReviewSet),fields:[{name:"review",component:"review-patch-set"}]}]}]},De={"validate-systems":function(){return function(e){return void 0===e||e.length>0?void 0:b.N.formatMessage(v.Z.patchSetNoSystemSelected)}}};const Te=function(){var e=(0,le.default)().renderForm;return c().createElement(B.r,{hasGutter:!0},c().createElement(V.P,{lg:12,md:12},e(Oe)),c().createElement(V.P,{lg:12,md:12},e(Ze)),c().createElement(V.P,{lg:6,md:6},e(we)))};var Ie=["systemsIDs"],je=function(e){var t=e.systemsIDs,n=(0,se.Z)(e,Ie),a=(0,d.I0)(),r=(0,le.default)(),l=(0,oe.Z)(n).input,o=(0,i.useState)(!1),u=(0,s.Z)(o,2),m=u[0],p=u[1],f=(0,i.useState)(!0),v=(0,s.Z)(f,2),h=v[0],y=v[1],g=(0,i.useState)([]),b=(0,s.Z)(g,2),E=b[0],S=b[1],O=(0,d.v9)((function(e){return e.PatchSetsStore}),d.wU),Z=O.rows,w=O.loading;(0,i.useEffect)((function(){!w&&(null==Z||!Z.length)&&a((0,D.BY)())}),[]);var P=function(){y(!h),p(!m)};return c().createElement(ue.K,{hasGutter:!0},c().createElement(ce.D,{style:{marginTop:"-15px"}},c().createElement(ie.xv,{component:ie.qO.p},"You selected ",c().createElement("b",null,t.length," systems"))),c().createElement(me.v,null,c().createElement(ue.K,{hasGutter:!0},c().createElement(me.v,null,c().createElement(pe.Y,{isChecked:m,name:"radio",onChange:P,label:"Add to existing patch set",id:"existing-set",value:""})),c().createElement(me.v,null,m?c().createElement(ge,{patchSets:Z,setSelectedPatchSet:S,selectedSets:E,systems:t}):null),c().createElement(me.v,null,c().createElement(pe.Y,{isChecked:h,name:"radio",onChange:P,label:"Create new patch set",id:"new-set",value:""})),c().createElement(me.v,null,h?c().createElement(Te,{input:l,formOptions:r}):null))))};je.propTypes={systemsIDs:R().array};const Ne=je;var ke=n(12282);const Ce=function(e){var t,n=(0,oe.Z)(e).input,a=null===(t=(0,le.default)().getState())||void 0===t?void 0:t.values,r=(0,i.useState)(null==a?void 0:a.name),l=(0,s.Z)(r,2),o=l[0],u=l[1];return c().createElement(he.c,{fieldId:"name",label:"Name",isRequired:!0},c().createElement(ke.TextInput,{type:"text",isRequired:!0,value:o,onChange:function(e){n.onChange(e),u(e)},"aria-label":"name",autoFocus:!0}))};var Fe=n(2679);const _e=function(e){var t,n=(0,oe.Z)(e).input,a=null===(t=(0,le.default)().getState())||void 0===t?void 0:t.values,r=(0,i.useState)(null==a?void 0:a.toDate),l=(0,s.Z)(r,2),o=l[0],u=l[1];return c().createElement(he.c,{fieldId:"toDate",label:"Patch set date",isRequired:!0},c().createElement(Y.k,null,c().createElement(z.B,{lg:2,md:2},"Upto"),c().createElement(z.B,{lg:10,md:10},c().createElement(Fe.Mt,{isRequired:!0,value:o,onChange:function(e){n.onChange(e),u(e)},"aria-label":"toDate"}))))},xe=function(e){var t,n=(0,oe.Z)(e).input,a=null===(t=(0,le.default)().getState())||void 0===t?void 0:t.values,r=(0,i.useState)(null==a?void 0:a.description),l=(0,s.Z)(r,2),o=l[0],u=l[1];return c().createElement(he.c,{fieldId:"description",label:"Description"},c().createElement(ke.TextInput,{type:"text",isRequired:!0,value:o,onChange:function(e){n.onChange(e),u(e)},"aria-label":"description"}))};var Me=n(57668),Re=n(38776),Ae=["systemsIDs"];function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe=function(e){var t=e.systemsIDs,n=(0,se.Z)(e,Ae),r=(0,oe.Z)(n).input,l=(0,i.useState)(!0),o=(0,s.Z)(l,2),u=o[0],m=o[1],p=(0,i.useState)([]),d=(0,s.Z)(p,2),f=d[0],y=d[1],g=(0,i.useState)([]),E=(0,s.Z)(g,2),O=E[0],Z=E[1],w=(0,i.useState)((function(){return t.reduce((function(e,t){return e[t]=!0,e}),{})})),P=(0,s.Z)(w,2),D=P[0],T=P[1],k=(0,i.useState)({limit:20,offset:0,total_items:0}),C=(0,s.Z)(k,2),F=C[0],_=C[1],x=(0,i.useState)({page:1,perPage:20,filter:{}}),M=(0,s.Z)(x,2),R=M[0],A=M[1];(0,i.useEffect)((function(){(0,I.lc)(Ue(Ue({},R),{},{filter:Ue(Ue({},R.filter),{},{id:"in:".concat(t.join(","))})})).then((function(e){Z((0,Me.ub)(e.data,D)),_(e.meta),y(e.data),m(!1)}))}),[R.filter,R]),(0,i.useEffect)((function(){var e=Object.keys(D).filter((function(e){return D[e]}));r.onChange(e),Z((0,Me.ub)(f,D))}),[D]);var L=function(e){m(!0),A(Ue(Ue({},R),e))},U=(0,N._f)(Ee,L,1),q=c().useMemo((function(){return(0,j.hO)(Ee,F.sort,1)}),[F.sort]),B=(0,N.SL)(F.limit,L),V=(0,N._T)(L),G=(0,N.ry)(O,D,(function(){return(0,I.lc)(Ue(Ue({},R),{},{filter:Ue(Ue({},R.filter),{},{id:"in:".concat(t.join(","))}),limit:-1}))}),(function(e){T(Ue(Ue({},D),{},(0,a.Z)({},e[0].id,e[0].selected||void 0)))}),(function(e){return e.id}));return c().createElement(ue.K,{hasGutter:!0},c().createElement(me.v,null,c().createElement(ce.D,{style:{marginTop:"-15px"}},c().createElement(ie.xv,{component:ie.qO.p},"You will be able to adjust your selection anytime. A system can have only one patch set, therefore if you assign a new Patch set to the system, it will be overwritten."))),c().createElement(me.v,null,c().createElement(Re.Z,{columns:Ee,compact:!0,onSetPage:B,onPerPageSelect:V,onSort:U,selectedRows:D,onSelect:G,sortBy:q,apply:L,tableOUIA:"patch-set-table",paginationOUIA:"patch-set-pagination",store:{rows:O,metadata:F,status:{isLoading:u},queryParams:R},filterConfig:{items:[(0,h.Z)(L,R.search,b.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle),b.N.formatMessage(v.Z.labelsFiltersSearch)),(0,S.Z)(R.filter,L)]},searchChipLabel:b.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle)})))};qe.propTypes={systemsIDs:R().array};const Be=qe;var Ve=n(19017),Ge=n(53325);const Ye=function(){var e=(0,le.default)().getState().values,t=e.existing_patch_set||e,n=t.name,a=t.description,r=t.toDate,s=t.systems;return c().createElement(ue.K,{hasGutter:!0},c().createElement(me.v,null,c().createElement(ce.D,{style:{marginTop:"-15px"}},c().createElement(ie.xv,{component:ie.qO.p},"Review the information below and click ",c().createElement("b",null,"Finish")," to complete patch set creation"))),c().createElement(me.v,null,c().createElement(ce.D,null,c().createElement(Ve.Gn,{component:Ve.F_.dl},c().createElement(Ge.Ts,{component:Ge.v$.dt},"Name:"),c().createElement(Ge.Ts,{component:Ge.v$.dd},n),c().createElement(Ge.Ts,{component:Ge.v$.dt},"Description:"),c().createElement(Ge.Ts,{component:Ge.v$.dd},a),c().createElement(Ge.Ts,{component:Ge.v$.dt},"Date:"),c().createElement(Ge.Ts,{component:Ge.v$.dd},r),c().createElement(Ge.Ts,{component:Ge.v$.dt},"Selected systems:"),c().createElement(Ge.Ts,{component:Ge.v$.dd},null==s?void 0:s.length)))))};var ze=n(34348),He=n(219),Ke=n(86728),We=n(74183),$e=n(94228),Qe=n(80858),Je=n(84564),Xe=n(18802),et=n(47945),tt=function(e){var t,n,a=e.percent,r=e.failed;return 100===a?(n="Completed",t="success"):r?(n="Error",t="danger"):(n="In progress",t="info"),c().createElement(et.Ex,{id:"finished-create-remediation",value:a,title:n,variant:t})};tt.propTypes={percent:R().number,failed:R().bool};const nt=tt;var at=function(e){var t=e.onClose,n=e.state,a=n.percent,r=n.failed;return c().createElement(He.ub,{variant:He.IQ.large,"data-component-ouia-id":"patch-set-progress"},c().createElement(Ke.k,{color:r?"var(--pf-global--danger-color--100)":100===a?"var(--pf-global--success-color--100)":void 0,icon:r?Je.default:100===a?F.default:Xe.ZP}),c().createElement(ze.Title,{headingLevel:"h1",size:"lg"},r?"Error: Unable to create a patch set":100===a?"Patch Set creation successfull":"Patch Set creation in progress"),c().createElement(We.B,null,c().createElement(B.r,{hasGutter:!0},c().createElement(V.P,null,c().createElement(nt,{percent:a,failed:r})),100!==a&&!r&&c().createElement(c().Fragment,null,c().createElement(V.P,null,c().createElement($e.p,null,c().createElement(Qe.u,{variant:"indeterminate"},"It may take a few minutes to set up a patch set. You will receive a notification when finished"))),c().createElement(V.P,null,c().createElement(L.Button,{variant:"link",isInline:!0,onClick:t},"Cancel")," ")),100===a&&!r&&c().createElement(c().Fragment,null,c().createElement(V.P,null,c().createElement($e.p,null,c().createElement(Qe.u,{variant:"indeterminate"},"It may take a few minutes to set up a patch set. You will receive a notification when finished"))),c().createElement(V.P,null,c().createElement(L.Button,{variant:"primary",onClick:t},"Return to application"))))))};at.propTypes={onClose:R().func,state:R().object};const rt=at;function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot=function(e){var t,n=e.systemsIDs,r=e.setBaselineState,l=(0,i.useState)({submitted:!1,formValues:{},percent:0,failed:!1}),o=(0,s.Z)(l,2),u=o[0],m=o[1],p=(0,N.np)(u,m),d=function(){r({isOpen:!1,systemsIDs:[]}),m({formValues:{},submitted:!1})},f={nameField:{component:Ce},descriptionField:{component:xe},toDateField:{component:_e},"configuration-step":{component:Ne,systemsIDs:n||[]},"review-systems":{component:Be,systemsIDs:n||[]},"review-patch-set":{component:Ye,systemsIDs:n||[]}};return c().createElement(i.Fragment,null,!u.submitted&&c().createElement(Q.Z,{schema:Pe,subscription:{values:!0},FormTemplate:function(e){return c().createElement(J.ZP,(0,$.Z)({},e,{showFormControls:!1}))},componentMapper:lt((t={},(0,a.Z)(t,X.Z.WIZARD,{component:ee.Z,className:"patch-set","data-ouia-component-id":"patch-set-wizard"}),(0,a.Z)(t,X.Z.TEXT_FIELD,te.Z),(0,a.Z)(t,X.Z.DATE_PICKER,ne.Z),t),f),validatorMapper:De,onSubmit:p,onCancel:d})||c().createElement(ae.Modal,{isOpen:!0,variant:"large",showClose:!1,className:"patch-set",hasNoBodyWrapper:!0,"aria-describedby":"patch-set-description","aria-labelledby":"patch-set-modal-title"},c().createElement(re.e,{className:"patch-set",title:b.N.formatMessage(v.Z.patchSetTitle),description:b.N.formatMessage(v.Z.patchSetDescription),steps:[{name:"progress",component:c().createElement(rt,{onClose:d,setWizardOpen:function(e){r({isOpen:!0,systemsIDs:n}),m({formValues:e,submitted:!1})},state:u}),isFinishedStep:!0}],onClose:d})))};ot.propTypes={setBaselineState:R().func,systemsIDs:R().array};const it=(0,i.memo)(ot,(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}));var ct=n(55485),ut=function(e){var t=e.onClick,n=e.isDisabled,a=e.isLoading,r=e.ouia,s=e.children;return c().createElement(L.Button,{isDisabled:n,onClick:t,ouiaId:r,variant:"primary",isLoading:a},s)};ut.propTypes={onClick:R().object,isDisabled:R().bool,isLoading:R().bool,ouia:R().string,children:R().element};const mt=ut;function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ft=function(){var e=b.N.formatMessage(v.Z.titlesSystems);(0,N.Iw)(e);var t=(0,f.useHistory)(),n=(0,d.I0)(),a=c().useState(!1),l=(0,s.Z)(a,2),i=l[0],y=l[1],C=c().useState(!1),F=(0,s.Z)(C,2),_=F[0],x=F[1],M=c().useState((function(){return function(){return null}})),R=(0,s.Z)(M,2),A=R[0],L=R[1],U=c().useState({isOpen:!1,systemsIDs:[]}),q=(0,s.Z)(U,2),B=q[0],V=q[1],G=(0,j.PZ)(t.location.search),Y=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.rows)||[]}),d.wU),z=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.total)||0})),H=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRows)||[]})),K=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.status)||{}})),$=(0,d.v9)((function(e){var t=e.SystemsStore;return(null==t?void 0:t.queryParams)||{}})),Q=$.systemProfile,J=$.selectedTags,X=$.filter,ee=$.search,te=$.page,ne=$.perPage,ae=$.sort;function re(e){return se.apply(this,arguments)}function se(){return(se=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,t;case 3:n=e.sent,L((function(){return function(){return c().createElement(ct.Z,{data:n,isRemediationOpen:!0,setRemediationOpen:y})}})),y(!i),x(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V({isOpen:!0,systemsIDs:[t.id]});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){n((0,D.SF)(e))}c().useEffect((function(){return oe(G),function(){return n((0,D.RV)())}}),[]);var ie=(0,N.j5)(dt({search:ee},X),oe,g.hb),ce=(0,s.Z)(ie,1)[0],ue={items:[(0,h.Z)(oe,ee,b.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle),b.N.formatMessage(v.Z.labelsFiltersSystemsSearchPlaceholder)),E(oe,X),O(oe,X),(0,S.Z)(X,oe)]},me={filters:(0,j.mt)(X,ee,b.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle)),onDelete:ce,deleteTitle:b.N.formatMessage(v.Z.labelsFiltersReset)},pe=(0,N.ry)(Y,H,(function(e){return(0,I.lc)(dt(dt({},e),{},{limit:-1})).then(j.zw)}),(function(e){n({type:"SELECT_ENTITY",payload:e})})),de=H&&(0,j.Qy)(H).length,fe=(0,N.AR)("systems",$,{csv:I.wI,json:I.TW},n),ve=function(e){return(0,I.ob)({limit:-1}).then((function(t){var n=t.data;return(0,I.fq)({advisories:n.map((function(e){return e.id})),systems:e})}))},he=(0,N.U)(I.lc,oe,{},t,(function(e){n((0,D._e)(e))}),(function(e){n((0,D.vl)(e))}));return c().createElement(c().Fragment,null,c().createElement(Z.Z,{title:b.N.formatMessage(v.Z.titlesPatchSystems),headerOUIA:"systems"}),c().createElement(W,{apply:oe,queryParams:$}),B.isOpen&&c().createElement(it,{systemsIDs:B.systemsIDs,setBaselineState:V}),i&&c().createElement(A,null)||null,c().createElement(p.Z,null,K.hasError&&c().createElement(w.Z,{code:K.code})||c().createElement(m.Z,{isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0,tags:!1},columns:j.gB,showTags:!0,customFilters:{patchParams:{search:ee,filter:X,systemProfile:Q,selectedTags:J}},paginationProps:{isDisabled:0===z},onLoad:function(e){var t=e.mergeWithEntities;(0,P.z)(dt({},t((0,T.Kq)(k.Fs,T.G),(0,j.fm)({page:te,perPage:ne,sort:ae,search:ee},G))))},getEntities:he,actions:(0,k.Sb)(re,(function(e){return le.apply(this,arguments)})),tableProps:{areActionsDisabled:function(e){var t=e.applicable_advisories;return t&&t.every((function(e){return 0===e}))},canSelectAll:!1,variant:u.TableVariant.compact,className:"patchCompactInventory",isStickyHeader:!0},bulkSelect:(0,N.Pz)(de,pe,{total_items:z},Y),exportConfig:{isDisabled:0===z,onSelect:fe},filterConfig:ue,activeFiltersConfig:me,dedicatedAction:c().createElement(mt,{isDisabled:0===(0,j.Qy)(H).length,onClick:function(){return re((0,j.Sz)((0,j.Q6)(H),ve,j.R9,g.oN.advisory))},ouia:"toolbar-remediation-button",isLoading:_},b.N.formatMessage(v.Z.labelsRemediate))})))}},5747:(e,t,n)=>{n.d(t,{G:()=>u,Kq:()=>p,OC:()=>m});var a=n(4942),r=n(57668),s=n(48881),l=n(22789);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={rows:[],entities:[],selectedRows:{},status:{},page:1,perPage:20,metadata:{limit:20,offset:0,total_items:0}},u=function(e,t){return t.loaded?i(i({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,r.Yk)(t.rows,t.selectedRows)}):t},m=function(e,t){return t.loaded?i(i({},t),{},{columns:e,rows:(0,r.GF)(t.rows,t.selectedRows)}):t},p=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0,r=i({},n);switch(a.type){case"LOAD_ENTITIES_FULFILLED":return t(e,r);case"LOAD_ENTITIES_PENDING":return r.status={isLoading:!0,hasError:!1},r;case"LOAD_ENTITIES_REJECTED":return r.status={isLoading:!0,hasError:!0},r;case"SELECT_ENTITY":var o=(0,s.hd)(r,a);return t(e,o);case l.sq:return c;default:return n}}}}}]);
//# sourceMappingURL=../sourcemaps/Systems.b844d336db8a0f7358fe9d8bb8eead45.js.map