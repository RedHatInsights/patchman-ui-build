(self.webpackChunkpatch=self.webpackChunkpatch||[]).push([[9041],{49642:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Z});var n=a(79851),r=a(34512),o=a(89376),l=a(39173),s=a(45697),i=a.n(s),c=a(28416),m=a.n(c),u=a(64029),p=a(32835),f=a(92397),d=function(e){var t=e.items,a=e.headerOUIA;return m().createElement(u.a,null,t.filter(Boolean).map((function(e){return m().createElement(p.g,{key:e.title,isActive:e.isActive},e.to?m().createElement(f.Z,{to:"".concat(e.to),"data-ouia-component-type":"".concat(a,"-breadcrumb"),"data-ouia-component-id":"breadcrumb-to-".concat(e.title)},e.title):e.title)})))};d.propTypes={items:i().arrayOf(i().shape({isActive:i().bool,to:i().string,title:i().node})),headerOUIA:i().string};const g=d;var v=a(28883),h=a(35262),E=a(62012),y=function(e){var t=e.headerOUIA,a=(0,E.useLocation)(),n=(0,E.useNavigate)();return m().createElement(h.m,{onSelect:function(e,t){n(t)},activeKey:a.pathname,className:"patchman-tabs"},m().createElement(v.O,{eventKey:"advisories",title:"Applicable advisories","data-ouia-component-type":"".concat(t,"-tab"),"data-ouia-component-id":"".concat(t,"-tab-Applicable advisories'")}),m().createElement(v.O,{eventKey:"systems",title:"Systems","data-ouia-component-type":"".concat(t,"-tab"),"data-ouia-component-id":"".concat(t,"-tab-Systems")}))};y.propTypes={headerOUIA:i().string};const b=y;var S=function(e){var t=e.title,a=e.showTabs,s=e.breadcrumbs,i=e.children,c=e.headerOUIA,u=e.actions;return m().createElement(m().Fragment,null,m().createElement(o.Z,{"data-ouia-component-type":"".concat(c,"-page-header")},s&&m().createElement(g,{items:s,headerOUIA:c}),m().createElement(n.P,{hasGutter:!0},m().createElement(r.J,null,m().createElement(l.Z,{title:t})),m().createElement(r.J,{isFilled:!0}),m().createElement(r.J,null,u)),i),a&&m().createElement(b,{headerOUIA:c}))};S.propTypes={title:i().node,showTabs:i().bool,breadcrumbs:i().array,children:i().any,headerOUIA:i().string,actions:i().node};const Z=S},91433:(e,t,a)=>{"use strict";a.d(t,{f:()=>d});var n=a(52643),r=a(9947),o=a(75106),l=a(43049),s=a(67880),i=a(78057),c=a(68778),m=a(28416),u=a.n(m),p=a(32132),f=a(30893),d=function(){return u().createElement(n.b,null,u().createElement(r.u,{style:{paddingTop:40}},u().createElement(s.t,{titleText:p.N.formatMessage(f.Z.statesNoApplicableAdvisories),icon:u().createElement(l.k,{icon:function(){return u().createElement(i.J,{size:"xl",style:{marginBottom:15}},u().createElement(c.ZP,{color:"var(--pf-v5-global--success-color--200)"}))}}),headingLevel:"h5"}),u().createElement(o.B,null,p.N.formatMessage(f.Z.statesSystemUpToDate))))}},38776:(e,t,a)=>{"use strict";a.d(t,{Z:()=>T});var n=a(29439),r=a(75863),o=a(35981),l=a(49004),s=a(58027),i=a(3962),c=a(57796),m=a(45697),u=a.n(m),p=a(28416),f=a.n(p),d=a(30893),g=a(53074),v=a(5391),h=a(59751),E=a(32132),y=a(18517),b=a(38386),S=a(65550),Z=function(e){var t=e.isLoading,a=e.page,n=e.perPage,r=e.onSetPage,o=e.totalItems,l=e.onPerPageSelect,s=e.paginationOUIA;return f().createElement(S.Z,{isFooter:!0},t?f().createElement("div",{className:"pf-v5-c-pagination pf-m-bottom"},f().createElement(b.O,{fontSize:"xl",width:"350px",style:{margin:10}})):f().createElement(y.t,{itemCount:o,perPage:n,page:a,onSetPage:r,onPerPageSelect:l,widgetId:"pagination-options-menu-bottom",variant:y.a.bottom,ouiaId:s,isDisabled:0===o}))};Z.propTypes={isLoading:u().bool,onSetPage:u().func,onPerPageSelect:u().func,page:u().number,perPage:u().number,totalItems:u().number,paginationOUIA:u().string};const P=Z;var N=a(52579),D=a(33094),O=function(e){var t,a=e.columns,m=e.store,u=m.rows,p=m.metadata,y=m.status,S=m.queryParams,Z=S.filter,O=S.search,T=e.onCollapse,I=e.onSelect,C=e.onSetPage,M=e.onPerPageSelect,w=e.onSort,x=e.onExport,F=e.filterConfig,k=e.sortBy,j=e.remediationProvider,L=e.selectedRows,A=e.compact,_=e.apply,R=e.tableOUIA,B=e.paginationOUIA,U=e.errorState,z=e.emptyState,q=e.defaultFilters,G=e.searchChipLabel,K=e.ToolbarButton,W=e.actionsConfig,J=e.isRemediationLoading,Q=e.actionsToggle,$=f().useMemo((function(){return(0,v.CM)(p.limit,p.offset)}),[p.limit,p.offset]),V=(0,n.Z)($,2),H=V[0],X=V[1],Y=(0,h.j5)(Z,_,q),ee=(0,n.Z)(Y,1)[0],te=L&&(0,v.Qy)(L).length,ae=y.code,ne=y.hasError,re=y.isLoading,oe=(0,h.Pz)(te,I,p,u,T);return f().createElement(f().Fragment,null,f().createElement(f().Fragment,null,ne||!1===p.has_systems?f().createElement(N.Z,{code:ae,ErrorState:U,EmptyState:z,metadata:p}):f().createElement(f().Fragment,null,f().createElement(i.Z,{pagination:re?f().createElement(b.O,{fontSize:"xl",width:"200px",style:{margin:10}}):{itemCount:p.total_items,page:H,perPage:X,isCompact:!0,onSetPage:C,onPerPageSelect:M,ouiaId:"top-".concat(B),isDisabled:0===p.total_items},filterConfig:F,activeFiltersConfig:{filters:(0,v.mt)(Z,O,G),onDelete:ee,deleteTitle:E.N.formatMessage(q&&d.Z.labelsFiltersReset||d.Z.labelsFiltersClear)},actionsConfig:{actions:[j&&f().createElement(g.Z,{remediationProvider:j,isDisabled:0===Object.values(L).filter((function(e){return e})).length||J,isLoading:J})]},exportConfig:{isDisabled:0===p.total_items,onSelect:x},bulkSelect:I&&oe},K&&f().createElement(D.E,null,f().createElement(K,null))),re?f().createElement(c.Z,{numberOfColumns:null!==(t=null==a?void 0:a.length)&&void 0!==t?t:5,rows:20,variant:A&&r.B.compact}):f().createElement(o.i,{"aria-label":"Patch table view",cells:a,onSelect:p.total_items&&I,rows:u,onCollapse:p.total_items&&T,canSelectAll:!1,onSort:p.total_items&&w,ouiaId:R,sortBy:p.total_items&&k,isStickyHeader:!0,variant:A&&r.B.compact,actions:W,actionsToggle:Q},f().createElement(l.x,null),f().createElement(s.R,null)),f().createElement(P,{isLoading:re,totalItems:p.total_items,perPage:X,page:H,onSetPage:C,onPerPageSelect:M,paginationOUIA:"bottom-".concat(B)}))))};O.propTypes={columns:u().array,onCollapse:u().func,onSelect:u().func,onSetPage:u().func,onPerPageSelect:u().func,onSort:u().func,onExport:u().func,remediationProvider:u().func,selectedRows:u().object,apply:u().func,sortBy:u().object,filterConfig:u().object,store:u().object,compact:u().bool,tableOUIA:u().string,paginationOUIA:u().string,errorState:u().element,emptyState:u().element,defaultFilters:u().object,searchChipLabel:u().string,ToolbarButton:u().elementType,actionsConfig:u().array,isRemediationLoading:u().bool,actionsToggle:u().func};const T=O},20677:(e,t,a)=>{"use strict";a.d(t,{$z:()=>h,Qk:()=>v,Z8:()=>g,gs:()=>f,mN:()=>p,mR:()=>d,og:()=>E});var n=a(28416),r=a.n(n),o=a(47173),l=a(78057),s=a(35224),i=a(7732),c=a(62165),m=a(32132),u=a(30893),p=function(e,t){return function(){return t?r().createElement(o.zx,{key:"createButton",onClick:function(){return e({isPatchSetWizardOpen:!0})}},m.N.formatMessage(u.Z.labelsButtonCreateTemplate)):r().createElement(s.u,{content:"For editing access, contact your administrator."},r().createElement(o.zx,{key:"createButton",isAriaDisabled:!0},m.N.formatMessage(u.Z.labelsButtonCreateTemplate)))}},f=[{key:"name",title:"Name",transforms:[i.p]},{key:"systems",title:"Systems applied",transforms:[i.p]},{key:"last_edited",title:"Last edited",transforms:[i.p]},{key:"published",title:"Published",transforms:[i.p]},{key:"creator",title:"Created by",transforms:[i.p]}],d=function(e,t){return[{title:m.N.formatMessage(u.Z.labelsButtonEditTemplate),onClick:function(t,a,n){e(null==n?void 0:n.id)}},{title:m.N.formatMessage(u.Z.labelsButtonRemoveTemplate),onClick:function(e,a,n){t(n)}}]},g=function(e){return[{title:m.N.formatMessage(u.Z.titlesTemplateRemoveFromSystems,{systemsCount:1}),onClick:function(t,a,n){e([n.id])}}]},v=function(){return r().createElement(s.u,{content:"For editing access, contact your administrator."},r().createElement(o.zx,{isAriaDisabled:!0,variant:"plain","aria-label":"plain kebab"},r().createElement(l.J,null,r().createElement(c.ZP,null))))},h=function(e){return{success:{title:"Systems succesfully removed from this Patch template.",description:"".concat(e," ").concat(e>1?"systems":"system"," removed from Patch template(s)"),variant:"success"},failure:{title:"Failed to remove systems from this Patch template.",variant:"danger"}}},E=function(e){return{success:{title:"Systems succesfully applied to this Patch template.",description:"".concat(e," ").concat(e>1?"systems":"system"," added to Patch template(s)"),variant:"success"},failure:{title:"Failed to apply systems to this Patch template.",variant:"danger"}}}},93665:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var n=a(4942),r=a(29439),o=a(28416),l=a.n(o),s=a(45697),i=a.n(s),c=a(23279),m=a.n(c),u=a(93942),p=a(71973),f=a(93174),d=a(59775),g=a(83133),v=a(28191),h=a(92298),E=a(47173),y=a(78057),b=a(27730),S=a(46361),Z=a(47189),P=a(48880),N=a(9557),D=a(32132),O=a(30893);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){var t=e.changePage,a=e.page,n=e.perPage,r=e.totalItems;return l().createElement(v.k,{justifyContent:{default:"justifyContentSpaceBetween"}},l().createElement(h.B,null,l().createElement(E.zx,{variant:"plain","aria-label":"prev",isDisabled:1===a,onClick:function(){return t(a-1)}},l().createElement(y.J,null,l().createElement(p.ZP,null)))),l().createElement(h.B,null,l().createElement(E.zx,{variant:"plain","aria-label":"next",isDisabled:r<a*n,onClick:function(){return t(a+1)}},l().createElement(y.J,null,l().createElement(f.ZP,null)))))},M=function(e){var t=e.setSelectedPatchSet,a=e.selectedSets,n=e.systems,s=e.selectCallback,i=void 0===s?function(){}:s,c=(0,u.I0)(),p=(0,P.default)(),f=(0,o.useState)(!1),v=(0,r.Z)(f,2),h=v[0],E=v[1],y=(0,u.v9)((function(e){return e.PatchSetsStore.rows})),T=(0,u.v9)((function(e){return e.PatchSetsStore.queryParams})),M=(0,u.v9)((function(e){return e.PatchSetsStore.status})),w=(0,u.v9)((function(e){return e.PatchSetsStore.metadata}));(0,o.useEffect)((function(){return function(){c((0,N.Im)())}}),[]);var x=(T||{}).search,F="string"==typeof x&&""!==x?x:Boolean(x);(0,o.useEffect)((function(){c((0,N.BY)(I(I({},T),{},{offset:T.offset+(T.page-1)*T.perPage})))}),[T.page,F]);var k=(0,o.useMemo)((function(){return M.isLoading?[l().createElement(b.$,{key:"loading"},l().createElement(g.$,{size:"md"}))]:null==y?void 0:y.map((function(e){return l().createElement(b.$,{key:e.id,value:e.name,"aria-label":"patch-set-option"})}))}),[y,M.isLoading]),j=(0,o.useState)((function(){return m()((function(e){return t={search:e},void c((0,N.br)(t));var t}),700)})),L=(0,r.Z)(j,1)[0];return l().createElement(d.c,{fieldId:"existing_patch_set",label:D.N.formatMessage(O.Z.textTemplateChoose),isRequired:!0},l().createElement(S.P,{variant:Z.TM.single,"aria-label":D.N.formatMessage(O.Z.labelsFiltersSearchTemplatePlaceholder),onSelect:function(e,a){E(!1),t(a);var r,o,l,s=y.filter((function(e){return e.name===a}));1===s.length&&(i(s[0]),null==p||null===(r=p.change)||void 0===r||r.call(p,"existing_patch_set",{name:null===(o=s[0])||void 0===o?void 0:o.name,systems:n,id:null===(l=s[0])||void 0===l?void 0:l.id}))},placeholderText:D.N.formatMessage(O.Z.templateSelectExisting),inlineFilterPlaceholderText:D.N.formatMessage(O.Z.labelsFiltersSearchTemplatePlaceholder),selections:a,onToggle:function(){E(!h)},isOpen:h,isDisabled:!1,onFilter:function(e,t){L(t)},hasInlineFilter:!0,className:"patch-existing-sets",footer:l().createElement(C,{changePage:function(e){c((0,N.br)(I(I({},T),{},{page:e})))},page:T.page,perPage:T.perPage,totalItems:w.total_items}),menuAppendTo:document.body,maxHeight:350},k))};C.propTypes={changePage:i().func,page:i().number,perPage:i().number,totalItems:i().number},M.propTypes={setSelectedPatchSet:i().func,selectedSets:i().array,systems:i().array,selectCallback:i().func};const w=M},63135:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Je});var n=a(4942),r=a(87462),o=a(29439),l=a(28416),s=a.n(l),i=a(45697),c=a.n(i),m=a(51912),u=a(67850),p=a(96354),f=a(26854),d=a(65412),g=a(74777),v=a(80236),h=a(9820),E=a(93942),y=a(48880),b=a(68340),S=a(68774),Z=a(49739),P=a(83826),N=(a(35575),a(32132)),D=a(30893),O=(a(93665),a(50693)),T=a(16475),I=a(83133),C=a(15861),M=a(64687),w=a.n(M),x=a(64124),F=a(5391);const k=function(e){if(e&&"string"==typeof e&&null===e.match(/^(\d{4})-(0[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/))return N.N.formatMessage(D.Z.labelsErrorInvalidDate);var t=new Date(e),a=t.getTime(),n=new Date(1990,0,1);return"number"!=typeof a||Number.isNaN(a)?N.N.formatMessage(D.Z.labelsErrorInvalidDate):t<n?N.N.formatMessage(D.Z.labelsErrorDateLimit):void 0};var j=a(72573),L=a(59751),A=[{key:"display_name",title:"Name",props:{width:40},transforms:[j.sortable]},{title:"OS",key:"operating_system",props:{width:20},transforms:[j.sortable]},{key:"baseline_name",title:"Template",props:{width:20},transforms:[j.sortable]},{key:"last_upload",title:"Last seen",props:{width:20},transforms:[j.sortable]}],_=[{name:"configurationStep",component:"configurationStep"},{name:"existing_patch_set",component:p.Z.TEXT_FIELD,hidden:!0}],R=[{name:"contentStep",component:"contentStep"}],B=[{name:"name",component:"nameField",validate:[{type:x.Z.REQUIRED},{type:"validate-name"}]}],U=[{name:"description",component:"descriptionField"}],z=[{name:"toDate",component:"toDateField",validate:[{type:x.Z.REQUIRED},{type:"validate-date"}]}],q=function(e){return"edit"===e?N.N.formatMessage(D.Z.templateEdit):N.N.formatMessage(D.Z.templateTitle)},G=function(e){return{fields:[{component:p.Z.WIZARD,name:"patch-set-wizard",isDynamic:!0,inModal:!0,title:q(e),description:s().createElement(l.Fragment,null,N.N.formatMessage(D.Z.templateDescription)),fields:[{name:"template-content",title:N.N.formatMessage(D.Z.templateContentStepSidebarName),fields:R,nextStep:"template-details"},{name:"template-details",title:N.N.formatMessage(D.Z.templateDetailStepSidebarName),fields:_,nextStep:"template-systems"},{name:"template-systems",title:N.N.formatMessage(D.Z.templateStepSystems),fields:[{name:"systems",component:"reviewSystems"}],nextStep:"template-review"},{name:"template-review",title:N.N.formatMessage(D.Z.templateReview),fields:[{name:"review",component:"reviewPatchSet"}]}]}]}},K={"validate-systems":function(){return function(e){var t=(0,F.LI)(e);return void 0===t||t.length>0?void 0:N.N.formatMessage(D.Z.templateNoSystemSelected)}},"validate-date":function(){return k},"validate-name":function(){return function(e,t){var a;return t.areTakenTemplateNamesLoading||t.templateDetailLoading?N.N.formatMessage(D.Z.templateWizardValidateLoading):t.previousName!==e&&null!==(a=t.takenTemplateNames)&&void 0!==a&&a.includes(e)?N.N.formatMessage(D.Z.templateWizardValidateNameTaken):void 0}}},W=function(e,t){var a=(0,L.qS)(),n=a.fetchBatched,r=a.isLoading;return(0,C.Z)(w().mark((function a(){var o,l,s=arguments;return w().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=s.length>0&&void 0!==s[0]?s[0]:{},a.next=3,n(e,o,void 0,100);case 3:return l=a.sent,a.abrupt("return",{isLoading:r,data:l.flatMap((function(e){return e.data})).map(t)});case 5:case"end":return a.stop()}}),a)})))},J=function(e){var t=e.isLoading,a=(0,y.default)().renderForm;return s().createElement(l.Fragment,null,s().createElement(I.$,{size:"xl",style:{display:t?"block":"none"},id:"test-config-fields-spinner"}),s().createElement(O.r,{hasGutter:!0,style:{display:t?"none":"grid"}},s().createElement(T.P,{lg:12,md:12},a(B)),s().createElement(T.P,{lg:12,md:12},a(U))))};J.propTypes={isLoading:c().bool};const Q=J;var $=function(e){e.systemsIDs;var t=e.patchSetID,a=(0,y.default)(),n=(0,l.useState)(!1),r=(0,o.Z)(n,2),i=(r[0],r[1],(0,l.useState)(!0)),c=(0,o.Z)(i,2),m=c[0],u=(c[1],(0,l.useState)([])),p=(0,o.Z)(u,2),f=(p[0],p[1],(0,E.v9)((function(e){return e.SpecificPatchSetReducer}),E.wU)),d=f.patchSet,g=f.status,v=f.areTakenTemplateNamesLoading;return(0,l.useEffect)((function(){if(t){var e=d.name,n=d.description;a.change("name",e),a.change("description",n)}}),[d]),s().createElement(Z.K,{hasGutter:!0},s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:"h2"},N.N.formatMessage(D.Z.templateDetailStepTitle)))),s().createElement(P.v,null,N.N.formatMessage(D.Z.templateDetailStepText)),!1,s().createElement(P.v,null,s().createElement(Z.K,{hasGutter:!0},null,s().createElement(P.v,null,m?s().createElement(Q,{isLoading:t&&g.isLoading||v}):null))))};$.propTypes={systemsIDs:c().array,patchSetID:c().string};const V=$;var H=a(22629),X=function(e){var t=e.patchSetID,a=(0,y.default)(),n=(0,E.v9)((function(e){return e.SpecificPatchSetReducer}),E.wU),r=n.patchSet,o=n.status;return(0,l.useEffect)((function(){if(t){var e=r.config.to_time,n=r.name;a.change("toDate",(0,F.MC)(e)),a.change("previousName",n),a.change("templateDetailLoading",o.isLoading)}}),[r,o]),s().createElement(Z.K,{hasGutter:!0},s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:"h2"},N.N.formatMessage(D.Z.templateContentStepTitle)))),s().createElement(P.v,null,N.N.formatMessage(D.Z.templateContentStepText)),s().createElement(P.v,null,a.renderForm(z)),s().createElement(P.v,null,s().createElement(H.L,{toggleText:N.N.formatMessage(D.Z.templateContentStepExpandableTitle)},N.N.formatMessage(D.Z.templateContentStepExpandable))))};X.propTypes={patchSetID:c().string};const Y=X;var ee=a(59775),te=a(87828),ae=a(36621),ne=a(65673),re=a(92607),oe=a(95762),le=a(11220);const se=function(e){var t,a=(0,oe.Z)(e).input,n=(0,y.default)(),r=null===(t=n.getState())||void 0===t?void 0:t.values,i=(0,l.useState)(null==r?void 0:r.name),c=(0,o.Z)(i,2),m=c[0],u=c[1],p=(0,l.useState)(),f=(0,o.Z)(p,2),d=f[0],g=f[1],v=(0,l.useState)([]),h=(0,o.Z)(v,2),E=h[0],b=h[1],S=(0,l.useState)(!0),Z=(0,o.Z)(S,2),P=Z[0],O=Z[1],T=W(le.ai,(function(e){return e.attributes.name}));return(0,l.useEffect)((function(){T().then((function(e){var t=e.data,a=e.isLoading;b(t),O(a)}))}),[]),(0,l.useEffect)((function(){u(r.name),g(void 0===r.name||r.name===r.previousName?"default":E.includes(r.name)?"error":"success")}),[r.name,E]),(0,l.useEffect)((function(){n.change("takenTemplateNames",E),n.change("areTakenTemplateNamesLoading",P)}),[E,P]),s().createElement(ee.c,{fieldId:"name",label:N.N.formatMessage(D.Z.labelsColumnsName),isRequired:!0},s().createElement(re.oi,{type:"text",isRequired:!0,value:m,onChange:function(e,t){a.onChange(t),u(t)},"aria-label":"name",autoFocus:!0,validated:d}),("error"===d||P)&&s().createElement(te.Q,null,s().createElement(ae.p,null,P?s().createElement(I.$,{size:"md"}):s().createElement(ne.u,{variant:d},N.N.formatMessage(D.Z.templateWizardValidateNameTaken)))))};var ie=a(67097),ce=a(28191),me=a(92298);const ue=function(e){var t,a=(0,oe.Z)(e).input,n=null===(t=(0,y.default)().getState())||void 0===t?void 0:t.values,r=(0,l.useState)(null==n?void 0:n.toDate),i=(0,o.Z)(r,2),c=i[0],m=i[1];return(0,l.useEffect)((function(){m(n.toDate)}),[n.toDate]),s().createElement(ee.c,{fieldId:"toDate",label:N.N.formatMessage(D.Z.templateDateField),isRequired:!0},s().createElement(ce.k,null,s().createElement(me.B,{lg:2,md:2},N.N.formatMessage(D.Z.templateDateUpto)),s().createElement(me.B,{lg:10,md:10},s().createElement(ie.M,{appendTo:document.body,value:c,onChange:function(e,t){a.onChange(t),m(t)},popoverProps:{position:"right"},"aria-label":"toDate",validators:[k],invalidFormatText:N.N.formatMessage(D.Z.labelsErrorInvalidDate)}))))},pe=function(e){var t,a=(0,oe.Z)(e).input,n=null===(t=(0,y.default)().getState())||void 0===t?void 0:t.values,r=(0,l.useState)(null==n?void 0:n.description),i=(0,o.Z)(r,2),c=i[0],m=i[1];return(0,l.useEffect)((function(){m(n.description)}),[n.description]),s().createElement(ee.c,{fieldId:"description",label:N.N.formatMessage(D.Z.labelsDescription)},s().createElement(re.oi,{type:"text",isRequired:!0,value:c,onChange:function(e,t){a.onChange(t),m(t)},"aria-label":"description"}))};var fe=a(93433),de=a(45987),ge=a(90747),ve=a(41448),he=a(36248),Ee=a(38776),ye=a(75585),be=a(23188),Se=a(13784),Ze=a(65771);var Pe=["systemsIDs","patchSetID"];function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oe=function(e){var t=e.systemsIDs,a=void 0===t?[]:t,n=e.patchSetID,r=(0,de.Z)(e,Pe),i=(0,oe.Z)(r).input,c=(0,y.default)().getState().values,m=(0,F.Qh)(a,null==c?void 0:c.systems),u=(0,l.useState)(!0),p=(0,o.Z)(u,2),f=p[0],d=p[1],g=(0,l.useState)([]),v=(0,o.Z)(g,2),h=v[0],O=v[1],T=(0,l.useState)([]),I=(0,o.Z)(T,2),C=I[0],M=I[1],w=(0,l.useState)(m),x=(0,o.Z)(w,2),k=x[0],j=x[1],_=(0,l.useState)({limit:20,offset:0,total_items:0}),R=(0,o.Z)(_,2),B=R[0],U=R[1],z=(0,l.useState)([]),q=(0,o.Z)(z,2),G=q[0],K=q[1],J=(0,l.useState)(!0),Q=(0,o.Z)(J,2),$=Q[0],V=Q[1],H=(0,l.useState)({page:1,perPage:20,filter:{stale:[!0,!1]}}),X=(0,o.Z)(H,2),Y=X[0],ee=X[1],te=W(le.TH,(function(e){return null==e?void 0:e.inventory_id}));(0,l.useEffect)((function(){n&&te({id:n}).then((function(e){var t=e.isLoading,a=e.data;K(a),V(t)}))}),[n]),(0,l.useEffect)((function(){(0,le.lc)(De(De({},Y),{},{filter:De(De({},Y.filter),{},{id:a.length>0?"in:".concat(a.join(",")):void 0,satellite_managed:!1})})).then((function(e){M((0,he.ub)(e.data,De(De({},(0,F.Qh)([].concat((0,fe.Z)(G),(0,fe.Z)(a)))),k))),U(e.meta),O(e.data),d(!1)}))}),[Y.filter,Y,G]),(0,l.useEffect)((function(){i.onChange(k),M((0,he.ub)(h,k))}),[k]),(0,l.useEffect)((function(){j(De(De({},k),(0,F.Qh)(G)))}),[G]);var ae=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d(!0),ee((function(a){return De(De(De({},a),e),{},{filter:De(De({},a.filter),e.filter)},t&&{page:1,offset:0})}))},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=(0,E.v9)((function(e){var t=e.entities;return null==t?void 0:t.operatingSystems})),n=(0,E.v9)((function(e){var t=e.entities;return null==t?void 0:t.operatingSystemsLoaded})),r=(0,l.useState)([]),s=(0,o.Z)(r,2),i=s[0],c=s[1],m=(0,Ze.useLoadModule)({appName:"inventory",scope:"inventory",module:"./OsFilterHelpers"}),u=(0,o.Z)(m,1)[0],p=void 0===u?{}:u,f=p.toGroupSelectionValue,d=p.buildOSFilterConfig;(0,l.useEffect)((function(){void 0!==a&&void 0!==n||(0,le.GB)().then((function(e){var t=e.results;c((t||[]).map((function(e){var t=e.value,a=t.name,n=t.major,r=t.minor,o="".concat(n,".").concat(r);return{label:"".concat(a," ").concat(o),value:"".concat(o)}})))}))}),[]),(0,l.useEffect)((function(){!0===n&&c(a)}),[n]);var g=(""===e?[]:Array.isArray(e)?e:e.split(",")).map((function(e){return e.substring(5)}));return(0,fe.Z)(d?[d({id:"rhel_version",value:f(g),onChange:function(e,a){var n=Object.values(a).flatMap((function(e){return Object.keys(e)})).map((function(e){return"RHEL ".concat(e)})).toString();t({filter:{os:n}})}},i)]:[])}(Y.filter.os,ae),re=(0,L._f)(A,ae,1),se=s().useMemo((function(){return(0,F.hO)(A,B.sort,1)}),[B.sort]),ie=(0,L.SL)(B.limit,(function(e){return ae(e,!1)})),ce=(0,L._T)(ae),me=(0,L.ry)(C,k,{endpoint:L.cB.systems,queryParams:De(De({},Y),{},{filter:De(De(De({},Y.filter),a.length>0&&{id:"in:".concat(a.join(","))}),{},{satellite_managed:!1})}),customSelector:function(e){var t=e.reduce((function(e,t){return e[t.id]=!!t.selected||void 0,e}),{});j(De(De({},k),t))},totalItems:B.total_items}),ue=f||n&&$;return s().createElement(Z.K,{hasGutter:!0},s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:"h2"},N.N.formatMessage(D.Z.templateApplySystems)))),s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:b.q.p},"Select systems to apply the new template to. The list of systems ",s().createElement("b",null,"does not contain")," systems managed by Satellite."))),s().createElement(ve.b,{variant:"warning",title:N.N.formatMessage(D.Z.templateAlertSystems),isInline:!0}),s().createElement(P.v,null,s().createElement(Ee.Z,{columns:A,compact:!0,onSetPage:ie,onPerPageSelect:ce,onSort:re,selectedRows:k,onSelect:me,sortBy:se,apply:ae,tableOUIA:"patch-set-table",paginationOUIA:"patch-set-pagination",store:{rows:C,metadata:B,status:{isLoading:ue},queryParams:Y},filterConfig:{items:[(0,ge.Z)(ae,Y.search,N.N.formatMessage(D.Z.labelsFiltersSystemsSearchTitle),N.N.formatMessage(D.Z.labelsFiltersSearch)),(0,ye.Z)(ae,Y.filter),(0,be.Z)(ae,Y.filter)].concat((0,fe.Z)(ne))},searchChipLabel:N.N.formatMessage(D.Z.labelsFiltersSystemsSearchTitle),defaultFilters:Se.hb})))};Oe.propTypes={systemsIDs:c().array,patchSetID:c().string};const Te=Oe;var Ie=a(25834),Ce=a(78140),Me=function(e,t){return s().createElement(l.Fragment,null,s().createElement(Ce.T,{component:Ce.v.dt,style:{minWidth:220}},N.N.formatMessage(D.Z[e])),s().createElement(Ce.T,{component:Ce.v.dd},t))};const we=function(){var e=(0,y.default)().getState().values,t=e.existing_patch_set||e,a=t.name,n=t.description,r=t.toDate,o=e.systems;return s().createElement(Z.K,{hasGutter:!0},s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:"h2"},N.N.formatMessage(D.Z.templateReview)))),s().createElement(P.v,null,s().createElement(S.D,{style:{marginTop:"-15px"}},s().createElement(b.x,{component:b.q.p},N.N.formatMessage(D.Z.textPatchTemplateReview)))),s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:"h2",className:"pf-v5-u-mt-md pf-v5-u-mb-sm"},N.N.formatMessage(D.Z.textPatchTemplateContent)),s().createElement(Ie.G,{component:Ie.F.dl},Me("labelsColumnsUpToDate",(0,F.jC)(r))))),s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:"h2",className:"pf-v5-u-mt-md pf-v5-u-mb-sm"},N.N.formatMessage(D.Z.textPatchTemplateDetails)),s().createElement(Ie.G,{component:Ie.F.dl},Me("labelsColumnsName",a),Me("labelsDescription",n||N.N.formatMessage(D.Z.titlesTemplateNoDescriptionProvided))))),s().createElement(P.v,null,s().createElement(S.D,null,s().createElement(b.x,{component:"h2",className:"pf-v5-u-mt-md pf-v5-u-mb-sm"},N.N.formatMessage(D.Z.textPatchTemplateSystems)),s().createElement(Ie.G,{component:Ie.F.dl},Me("labelsSelectedSystems",N.N.formatMessage(D.Z.labelsSystem,{systemsCount:Object.values(o).filter((function(e){return e})).length}))))))};var xe=a(9947),Fe=a(43049),ke=a(75106),je=a(47173),Le=a(67880),Ae=a(68778),_e=a(43047),Re=a(94768),Be=a(83215),Ue=function(e){var t=e.onClose,a=e.state,n=a.requestPending,r=a.failed,o=a.error,l=(0,E.I0)();return r&&l((0,Be.wN)({title:"There was an error while processing your request",description:o.detail,variant:"danger"})),s().createElement(xe.u,{variant:xe.I.lg,"data-component-ouia-id":"patch-set-progress"},s().createElement(Le.t,{titleText:r?N.N.formatMessage(D.Z.textErrorSomethingWrong):n?N.N.formatMessage(D.Z.textConfigurationInProgress):N.N.formatMessage(D.Z.textPatchTemplateSuccessfuly),icon:s().createElement(Fe.k,{color:r?"var(--pf-v5-global--danger-color--100)":n?void 0:"var(--pf-v5-global--success-color--100)",icon:r?_e.ZP:n?Re.ZP:Ae.ZP}),headingLevel:"h1"}),s().createElement(ke.B,null,s().createElement(O.r,{hasGutter:!0},n&&s().createElement(s().Fragment,null,s().createElement(T.P,null,s().createElement(ae.p,null,s().createElement(ne.u,{variant:"indeterminate"},N.N.formatMessage(D.Z.textPatchTemplatePending)))),s().createElement(T.P,null,s().createElement(je.zx,{variant:"link",isInline:!0,onClick:t},N.N.formatMessage(D.Z.labelsCancel))," ")),!n&&!r&&s().createElement(T.P,null,s().createElement(je.zx,{variant:"primary",onClick:t},N.N.formatMessage(D.Z.textReturnToApp))),!n&&r&&s().createElement(s().Fragment,null,s().createElement(T.P,null,s().createElement(ae.p,null,s().createElement(ne.u,{variant:"indeterminate"},N.N.formatMessage(D.Z.templateError,{a:function(e){return s().createElement("a",{href:"https://www.redhat.com/en/services/support"},e)}})))),s().createElement(T.P,null,s().createElement(je.zx,{variant:"primary",onClick:t},N.N.formatMessage(D.Z.textReturnToApp)))))))};Ue.propTypes={onClose:c().func,state:c().object};const ze=Ue;var qe=a(9557);function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var We=function(e){var t,a=e.systemsIDs,i=e.setBaselineState,c=e.patchSetID,y=c?"edit":"create",b=(0,l.useState)({submitted:!1,formValues:{},requestPending:!0,failed:!1,shouldRefresh:!1}),S=(0,o.Z)(b,2),Z=S[0],P=S[1],O=(0,E.I0)();(0,l.useEffect)((function(){return c&&O((0,qe.gK)(c)),function(){return O((0,qe.r8)())}}),[]);var T=(0,L.np)(Z,P,c),I=function(){var e=!Z.failed&&Z.submitted;i({isPatchSetWizardOpen:!1,systemsIDs:[],patchSetID:void 0,shouldRefresh:e}),P({formValues:{},submitted:!1})},C={nameField:{component:se},descriptionField:{component:pe},toDateField:{component:ue},contentStep:{component:Y,patchSetID:c},configurationStep:{component:V,systemsIDs:a||[],patchSetID:c},reviewSystems:{component:Te,systemsIDs:a||[],patchSetID:c},reviewPatchSet:{component:we,systemsIDs:a||[]}};return s().createElement(l.Fragment,null,!Z.submitted&&s().createElement(m.Z,{schema:G(y),subscription:{values:!0},FormTemplate:function(e){return s().createElement(u.ZP,(0,r.Z)({},e,{showFormControls:!1}))},componentMapper:Ke((t={},(0,n.Z)(t,p.Z.WIZARD,{component:f.Z,className:"patch-set","data-ouia-component-id":"patch-set-wizard"}),(0,n.Z)(t,p.Z.TEXT_FIELD,d.Z),(0,n.Z)(t,p.Z.DATE_PICKER,g.Z),t),C),validatorMapper:K,onSubmit:T,onCancel:I})||s().createElement(v.u,{isOpen:!0,variant:"large",showClose:!1,className:"patch-set",hasNoBodyWrapper:!0,"aria-describedby":"patch-set-description","aria-labelledby":"patch-set-modal-title"},s().createElement(h.e,{className:"patch-set",title:q(y),description:s().createElement(l.Fragment,null,N.N.formatMessage(D.Z.templateDescription)),steps:[{name:"progress",component:s().createElement(ze,{onClose:I,state:Z}),isFinishedStep:!0}],onClose:I})))};We.propTypes={setBaselineState:c().func,systemsIDs:c().array,patchSetID:c().string};const Je=(0,l.memo)(We,(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}))},70347:()=>{},10497:()=>{},54476:()=>{},80897:()=>{},88361:()=>{},71338:()=>{},74282:()=>{},25238:()=>{},97236:()=>{},40209:()=>{},72816:()=>{},53519:()=>{}}]);
//# sourceMappingURL=../sourcemaps/9041.65721e91d9bea333ebbc5a466576dd8a.js.map