"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[9603],{39591:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(85893),r=n(43297);const s=function(e){var t=e.component,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["component"]);return(0,r.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Unable to load inventory component"}),(0,a.jsxs)("h2",{children:["Failed to load ",t]}),(0,a.jsx)("code",{children:"More info can be found in browser console output."})]})}},33739:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(85893),r=n(43297),s=n.n(r),l=n(45697),o=n.n(l),i=n(59823),c=n(96620),u=n(28216),m=n(6848),d=n(39591),f=n(94184),p=n.n(f),h=function(){return h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},h.apply(this,arguments)},y=function(e){var t=(0,c.useHistory)(),n=(0,u.oR)(),s=e.component;return(0,a.jsx)(s,h({className:p()(e.className,"inventory")},{children:(0,a.jsx)(r.Suspense,h({fallback:e.fallback},{children:(0,a.jsx)(i.ScalprumComponent,h({history:t,store:n,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:(0,a.jsx)(d.Z,h({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))}))}))};y.propTypes={fallback:o().node,innerRef:o().object,component:o().string,className:o().string};var g=s().forwardRef((function(e,t){return(0,a.jsx)(y,h({innerRef:t},e))}));g.propTypes={fallback:o().node,component:o().string,className:o().string},g.defaultProps={fallback:(0,a.jsx)(m.Bullseye,h({className:"pf-u-p-lg"},{children:(0,a.jsx)(m.Spinner,{size:"xl"})})),component:"section"};const b=g},97648:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(29439),r=n(43297),s=n.n(r),l=n(45697),o=n.n(l),i=n(47173),c=n(93149),u=n(80236),m=n(30893),d=n(32132),f=function(e){var t=e.isModalOpen,n=e.setModalOpen,l=e.templateName,o=e.onConfirm,f=(0,r.useState)(!1),p=(0,a.Z)(f,2),h=p[0],y=p[1],g=function(){n(!1),y(!1)};return s().createElement(u.u,{title:d.N.formatMessage(m.Z.titlesTemplateDeleteModalTitle),titleIconVariant:"warning",isOpen:t,onClose:g,variant:"small",actions:[s().createElement(i.zx,{key:"confirm",variant:"danger",onClick:function(){g(),o()},isDisabled:!h},d.N.formatMessage(m.Z.labelsDelete)),s().createElement(i.zx,{key:"cancel",variant:"link",onClick:g},d.N.formatMessage(m.Z.labelsCancel))]},d.N.formatMessage(m.Z.titlesTemplateDeleteModalText,{templateName:l,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().createElement("b",null,t)}}),s().createElement(c.X,{className:"pf-u-mt-md",isChecked:h,checked:h,onChange:function(e){return y(e)},label:d.N.formatMessage(m.Z.titlesTemplateDeleteModalCheckbox),id:"template-delete-modal-checkbox"}))};f.propTypes={isModalOpen:o().bool,setModalOpen:o().func,templateName:o().string,onConfirm:o().func};const p=f},98333:(e,t,n)=>{n.d(t,{Z:()=>Z});var a=n(29439),r=n(43297),s=n.n(r),l=n(45697),o=n.n(l),i=n(80236),c=n(47173),u=n(50693),m=n(50383),d=n(74806),f=n(30893),p=n(15861),h=n(64687),y=n.n(h),g=n(28216),b=n(83215),E=n(11220),v=n(13784),O=n(16475),S=function(e,t,n){return s().createElement(O.P,null,n.formatMessage(f.Z[e],{systemsCount:t,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().createElement("b",null,t)}}))},w=function(e){var t=e.unassignSystemsModalState,n=void 0===t?{}:t,l=e.setUnassignSystemsModalOpen,o=e.intl,d=n.systemsIDs,h=n.isUnassignSystemsModalOpen,O=(0,r.useState)([]),w=(0,a.Z)(O,2),Z=w[0],D=w[1],k=(0,r.useState)(!0),P=(0,a.Z)(k,2),M=P[0],T=P[1],j=function(e){l({isUnassignSystemsModalOpen:!h,systemsIDs:[],shouldRefresh:e})},C=function(){j(!1)},N=function(e,t){var n=(0,g.I0)(),a=function(){var a=(0,p.Z)(y().mark((function a(){return y().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.C9)({inventory_ids:t});case 2:200===a.sent.status&&(e(!0),n((0,b.wN)((0,v.$z)((null==t?void 0:t.length)||0).success)));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return a}(j,Z);(0,r.useEffect)((function(){T(!0),function(e){return(0,E.lc)({limit:-1,"filter[baseline_name]":"neq:",filter:{stale:[!0,!1]}}).then((function(t){return e.filter((function(e){return null==t?void 0:t.data.some((function(t){return t.id===e}))}))}))}(d).then((function(e){D(e),T(!1)}))}),[d]);var x=d.length-Z.length;return s().createElement(i.u,{variant:"small",isOpen:n.isUnassignSystemsModalOpen,title:o.formatMessage(f.Z.textUnassignSystemsTitle),onClose:C,titleIconVariant:"warning",actions:[s().createElement(c.zx,{key:"confirm",variant:"danger",onClick:N,isDisabled:M||0===Z.length},o.formatMessage(f.Z.labelsRemove)),s().createElement(c.zx,{key:"cancel",variant:"link",onClick:C},o.formatMessage(f.Z.labelsCancel))]},s().createElement(u.r,{hasGutter:!0},M?s().createElement(m.O,null):s().createElement(r.Fragment,null,Z.length>0&&S("textUnassignSystemsStatement",Z.length,o),x>0&&S("textUnassignSystemsWarning",x,o))))};w.propTypes={intl:o().any,setUnassignSystemsModalOpen:o().func,unassignSystemsModalState:o().object};const Z=(0,d.ZP)(w)},20677:(e,t,n)=>{n.d(t,{Qk:()=>h,Z8:()=>p,gs:()=>d,mN:()=>m,mR:()=>f});var a=n(43297),r=n.n(a),s=n(47173),l=n(35224),o=n(7732),i=n(62165),c=n(32132),u=n(30893),m=function(e,t){return function(){return t?r().createElement(s.zx,{key:"createButton",onClick:function(){return e({isPatchSetWizardOpen:!0})}},c.N.formatMessage(u.Z.labelsButtonCreateTemplate)):r().createElement(l.u,{content:"For editing access, contact your administrator."},r().createElement(s.zx,{key:"createButton",isAriaDisabled:!0},c.N.formatMessage(u.Z.labelsButtonCreateTemplate)))}},d=[{key:"name",title:"Name",transforms:[o.p]},{key:"systems",title:"Systems applied",transforms:[o.p]},{key:"last_edited",title:"Last edited",transforms:[o.p]},{key:"published",title:"Published",transforms:[o.p]},{key:"creator",title:"Created by",transforms:[o.p]}],f=function(e,t){return[{title:c.N.formatMessage(u.Z.labelsButtonEditTemplate),onClick:function(t,n,a){e(null==a?void 0:a.id)}},{title:c.N.formatMessage(u.Z.labelsButtonRemoveTemplate),onClick:function(e,n,a){t(a)}}]},p=function(e){return[{title:c.N.formatMessage(u.Z.textUnassignSystemsShortTitle),onClick:function(t,n,a){e(a)}}]},h=function(){return r().createElement(l.u,{content:"For editing access, contact your administrator."},r().createElement(s.zx,{isAriaDisabled:!0,variant:"plain","aria-label":"plain kebab"},r().createElement(i.ZP,null)))}},99910:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(4942),r=n(29439),s=n(14748),l=n(43297),o=n.n(l),i=n(86896),c=n(28216),u=n(96620),m=n(30893),d=n(49642),f=n(14240),p=n(91607),h=n(9557),y=n(56787),g=n(84457),b=n(99355),E=n(75728),v=n(50383),O=n(68340),S=n(68774),w=n(97648),Z=n(11220),D=n(83215),k=n(13784),P=n(52579),M=n(5391),T=n(64193),j=n(20677),C=n(95249),N=n(98333),x=n(75863),_=n(33739),I=n(42154),R=n(97779),U=n(7322),L=n(5747),B=n(58684),F=n(35240);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const W=function(){var e=(0,i.Z)(),t=(0,c.I0)(),n=(0,u.useHistory)(),a=(0,c.oR)(),z=(0,l.useRef)(null),W=n.location.pathname.split("/")[2],H=o().useState(!0),q=(0,r.Z)(H,2),K=q[0],$=q[1],G=(0,l.useState)(!1),V=(0,r.Z)(G,2),Y=V[0],J=V[1],Q=(0,l.useState)(!1),X=(0,r.Z)(Q,2),ee=X[0],te=X[1],ne=(0,l.useState)({isPatchSetWizardOpen:!1,isUnassignSystemsModalOpen:!1,systemsIDs:[],shouldRefresh:!1}),ae=(0,r.Z)(ne,2),re=ae[0],se=ae[1],le=(0,c.v9)((function(e){return e.PatchSetDetailStore})),oe=(0,c.v9)((function(e){var t,n,a=e.PatchSetDetailStore;return null===(t=null==a||null===(n=a.status)||void 0===n?void 0:n.isLoading)||void 0===t||t})),ie=(0,c.v9)((function(e){return e.PatchSetDetailStore.status})),ce=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.status)||{}})),ue=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.total)||0})),me=(0,c.v9)((function(e){var t=e.entities;return null==t?void 0:t.loaded})),de=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return(null==t?void 0:t.queryParams)||{}})),fe=(0,C.c$)(["patch:*:*","patch:template:write"]).hasAccess,pe=le.data.attributes.name,he=function(e){t((0,h.JP)(e))},ye=function(){se(A(A({},re),{},{isPatchSetWizardOpen:!0}))};(0,l.useEffect)((function(){return function(){t((0,h.pV)())}}),[]),(0,l.useEffect)((function(){var e;!0===re.shouldRefresh&&(null==z||null===(e=z.current)||void 0===e||e.onRefreshData({timestamp:Date.now()}),t((0,h.Ku)(W)),se(A(A({},re),{},{shouldRefresh:!1})))}),[re.shouldRefresh]),(0,p.KW)((function(){K?(he((0,M.PZ)(n.location.search)),t((0,h.Ku)(W)),$(!1)):n.push((0,M.R_)(de))}),[de,K]);var ge=function(e){se(A(A({},re),{},{isUnassignSystemsModalOpen:!0,systemsIDs:[e.id]}))},be=(0,p.U)(Z.TH,he,{id:W},n,(function(e){t((0,h.T5)(e))}),(function(e){t((0,h.vl)(e))})),Ee=[o().createElement(g.h,{key:"edit-patch-set",component:"button",onClick:function(){return ye()}},e.formatMessage(m.Z.labelsButtonEditTemplate)),o().createElement(g.h,{key:"delete-patch-set",component:"button",onClick:function(){return te(!0)}},e.formatMessage(m.Z.labelsButtonRemoveTemplate))],ve=(0,M.PZ)(n.location.search),Oe=de.systemProfile,Se=de.selectedTags,we=de.filter,Ze=de.search,De=de.page,ke=de.perPage,Pe=de.sort;return null!=ie&&ie.hasError?o().createElement(P.Z,{code:null==ie?void 0:ie.code}):o().createElement(l.Fragment,null,o().createElement(w.Z,{templateName:pe,isModalOpen:ee,setModalOpen:te,onConfirm:function(){(0,Z.f_)(W).then((function(){t((0,D.wN)((0,k.D$)(pe).success)),n.push("/templates")})).catch((function(){t((0,D.wN)((0,k.D$)(pe).error))}))}}),re.isPatchSetWizardOpen&&o().createElement(T.Z,{systemsIDs:re.systemsIDs,setBaselineState:se,patchSetID:W}),o().createElement(N.Z,{unassignSystemsModalState:re,setUnassignSystemsModalOpen:se}),o().createElement(d.Z,{title:oe?o().createElement(v.O,{style:{width:300}}):pe,headerOUIA:"template-details",breadcrumbs:[{title:e.formatMessage(m.Z.templateDetailHeaderBreadcrumb),to:"/templates",isActive:!1},{title:oe?o().createElement(v.O,{style:{width:150}}):pe,isActive:!0}],actions:o().createElement(y.L,{position:b.ir.right,onSelect:function(){J(!1),document.getElementById("patch-set-detail-header-kebab").focus()},toggle:o().createElement(E.Z,{id:"patch-set-detail-header-kebab",className:"pf-u-mr-xl",onToggle:function(e){return J(e)},style:{minWidth:150}},e.formatMessage(m.Z.labelsActions)),isOpen:Y,dropdownItems:Ee})},o().createElement("table",{border:"0",style:{marginTop:8}},o().createElement("tbody",null,o().createElement("tr",null,o().createElement("td",{style:{width:300}},e.formatMessage(m.Z.templateDetailTableDescription)),o().createElement("td",null,oe?o().createElement(v.O,{style:{width:300}}):le.data.attributes.description||e.formatMessage(m.Z.titlesTemplateNoDescription))),o().createElement("tr",null,o().createElement("td",null,e.formatMessage(m.Z.templateDetailTableUpToDate)),o().createElement("td",null,oe?o().createElement(v.O,{style:{width:100}}):(0,F.Un)(le.data.attributes.config.to_time))),o().createElement("tr",null,o().createElement("td",null,e.formatMessage(m.Z.templateDetailTableCreatedBy)),o().createElement("td",null,oe?o().createElement(v.O,{style:{width:100}}):le.data.attributes.creator)),o().createElement("tr",null,o().createElement("td",null,e.formatMessage(m.Z.templateDetailTablePublished)),o().createElement("td",null,oe?o().createElement(v.O,{style:{width:100}}):(0,F.Un)(le.data.attributes.published))),o().createElement("tr",null,o().createElement("td",null,e.formatMessage(m.Z.templateDetailTableLastEdited)),o().createElement("td",null,oe?o().createElement(v.O,{style:{width:100}}):(0,F.Un)(le.data.attributes.last_edited)))))),o().createElement(s.Z,null,o().createElement(S.D,null,o().createElement(O.x,{component:"h2",className:"pf-u-mb-md"},e.formatMessage(m.Z.templateDetailTableTitle))),0===ue&&me?o().createElement(f.$6,{onButtonClick:function(){return ye()}}):ce.hasError?o().createElement(P.Z,{code:ce.code}):o().createElement(_.Z,{ref:z,isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0},columns:function(e){return(0,I.yF)(e)},showTags:!0,onLoad:function(e){var t=e.mergeWithEntities;a.replaceReducer((0,R.UY)(A(A({},U.E),t((0,L.Kq)((0,B.Fs)(!0),L.lu),(0,M.fm)({page:De,perPage:ke,sort:Pe,search:Ze},ve)))))},customFilters:{patchParams:{filter:we,systemProfile:Oe,selectedTags:Se}},paginationProps:{isDisabled:0===ue},getEntities:be,tableProps:{canSelectAll:!0,variant:x.B.compact,className:"patchCompactInventory",isStickyHeader:!0,actionResolver:function(){return fe?(0,j.Z8)(ge):[]}},hasCheckbox:!1})))}},5747:(e,t,n)=>{n.d(t,{G:()=>u,Kq:()=>p,OC:()=>m,PD:()=>f,lu:()=>d});var a=n(4942),r=n(36248),s=n(48881),l=n(22789);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={rows:[],entities:[],selectedRows:{},status:{},page:1,perPage:20,metadata:{limit:20,offset:0,total_items:0}},u=function(e,t){return t.loaded?i(i({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,r.Yk)(t.rows,t.selectedRows)}):t},m=function(e,t){return t.loaded?i(i({},t),{},{columns:e,rows:(0,r.GF)(t.rows,t.selectedRows)}):t},d=function(e,t){return t.loaded?i(i({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,r.dn)(t.rows,t.selectedRows)}):t},f=function(e,t){return t.loaded?i(i({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,r.mf)(t.rows,t.selectedRows)}):t},p=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0,r=i({},n);switch(a.type){case"LOAD_ENTITIES_FULFILLED":return t(e,r);case"LOAD_ENTITIES_PENDING":return r.status={isLoading:!0,hasError:!1},r;case"LOAD_ENTITIES_REJECTED":return(0,s.PW)(r,a);case"SELECT_ENTITY":var o=(0,s.hd)(r,a);return t(e,o);case l.sq:return c;default:return n}}}}}]);
//# sourceMappingURL=../sourcemaps/TemplateDetail.b92d04b5b48d1decfa68006d7740a30f.js.map