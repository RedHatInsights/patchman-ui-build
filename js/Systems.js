(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{699:function(e,t,r){"use strict";r.r(t);var n=r(722),c=r.n(n),a=r(211),o=r.n(a),i=r(20),s=r.n(i),u=r(339),l=r.n(u),b=r(38),f=r.n(b),O=r(15),p=r(213),j=r(708),S=r(0),d=r.n(S),y=r(30),m=r(117),v=r(718),g=r(166),h=r(709),w=r(165),E=r(340),T=r(59),P=r(724),D=r(51),k=r(11),x=r(167),B=r(16),R=r(73),C=r(341),L=r(725);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e=Object(y.useDispatch)(),t=d.a.useState(),r=f()(t,2),n=r[0],a=r[1],i=d.a.useState((function(){return function(){return null}})),s=f()(i,2),u=s[0],b=s[1],S=Object(y.useSelector)((function(e){return e.SystemsListStore.rows})),F=d.a.useMemo((function(){return Object(x.f)(S)}),[S]),M=Object(y.useSelector)((function(e){return e.SystemsListStore.error})),_=Object(y.useSelector)((function(e){return e.SystemsListStore.status})),G=Object(y.useSelector)((function(e){return e.SystemsListStore.metadata})),I=Object(y.useSelector)((function(e){return e.SystemsListStore.queryParams})),J=Object(y.useSelector)((function(e){var t=e.entities;return t&&t.columns})),V=Object(y.useSelector)((function(e){return e.SharedAppStateStore.hasAccess})),W=I.filter,H=I.search,q=Object(R.a)(G,U);d.a.useEffect((function(){V&&e(Object(T.x)(I))}),[I]);var N=function(){var e=l()(o.a.mark((function e(){var t,r,n,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({ReactRedux:y,React:d.a,reactRouterDom:m,pfReactTable:{Table:O.Table,TableBody:O.TableBody,TableHeader:O.TableHeader,TableGridBreakpoint:O.TableGridBreakpoint,cellWidth:O.cellWidth,TableVariant:O.TableVariant,sortable:O.sortable,expandable:O.expandable,SortByDirection:O.SortByDirection},pfReact:v.reactCore});case 2:t=e.sent,r=t.inventoryConnector,n=t.mergeWithEntities,Object(E.c)(A({},n(Object(P.a)(L.b,"SYSTEMS_PAGE")))),c=r(Object(E.a)()),i=c.InventoryTable,a((function(){return i}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d.a.useEffect((function(){N()}),[]);var Y=Object(R.c)(G.limit,G.offset),z=f()(Y,2),K=z[0],Q=z[1];function U(t){e(Object(T.g)(t))}var X=Object(R.e)(W,U),Z={items:[Object(g.a)(U,H,"Search systems")]},$={filters:Object(B.c)(W,H),onDelete:X},ee=function(){var e=J&&J.filter((function(e){return"updated"===e.key}))[0];return e=A(A({},e),{},{key:"last_upload"}),[].concat(c()(L.b),[e])},te=Object(R.g)(ee(),U),re=d.a.useMemo((function(){return Object(B.g)(ee(),G.sort,0)}),[G.sort]);return d.a.createElement(d.a.Fragment,null,d.a.createElement(h.a,{title:"Systems"}),d.a.createElement(u,null),d.a.createElement(j.Main,null,_===k.e?d.a.createElement(w.a,{message:M.detail}):n&&d.a.createElement(n,{isFullView:!0,items:F,page:K,total:G.total_items,perPage:Q,isLoaded:_===k.f,onRefresh:q,exportConfig:{onSelect:function(e,t){var r=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",n="systems-".concat(r);"csv"===t?Object(D.c)(I).then((function(e){return Object(p.downloadFile)(e,n,"csv")})):Object(D.d)(I).then((function(e){return Object(p.downloadFile)(JSON.stringify(e),n,"json")}))}},hasCheckbox:!1,actions:Object(L.c)((function(e){b((function(){return function(){return d.a.createElement(C.a,{data:e})}}))})),filterConfig:Z,activeFiltersConfig:$,tableProps:{areActionsDisabled:function(e){return e.applicable_advisories.every((function(e){return 0===e}))},onSort:te,sortBy:re}})))}}}]);
//# sourceMappingURL=Systems.js.map