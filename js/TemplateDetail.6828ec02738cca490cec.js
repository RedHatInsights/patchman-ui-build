"use strict";(self.webpackChunkpatch=self.webpackChunkpatch||[]).push([[9603],{56787:(e,t,n)=>{n.d(t,{L:()=>c});var a=n(70655),r=n(43297),o=n(73699),s=n(99355),l=n(17352),i=n(62472);const c=e=>{var{onSelect:t,ref:n,ouiaId:u,ouiaSafe:m,alignments:d,contextProps:p,menuAppendTo:f="inline",isFlipEnabled:g=!0,removeFindDomNode:y=!1,zIndex:h=9999}=e,v=(0,a.__rest)(e,["onSelect","ref","ouiaId","ouiaSafe","alignments","contextProps","menuAppendTo","isFlipEnabled","removeFindDomNode","zIndex"]);return r.createElement(s.Dl.Provider,{value:Object.assign({onSelect:e=>t&&t(e),toggleTextClass:o.default.dropdownToggleText,toggleIconClass:o.default.dropdownToggleImage,toggleIndicatorClass:o.default.dropdownToggleIcon,menuClass:o.default.dropdownMenu,itemClass:o.default.dropdownMenuItem,toggleClass:o.default.dropdownToggle,baseClass:o.default.dropdown,baseComponent:"div",sectionClass:o.default.dropdownGroup,sectionTitleClass:o.default.dropdownGroupTitle,sectionComponent:"section",disabledClass:o.default.modifiers.disabled,plainTextClass:o.default.modifiers.text,ouiaId:(0,i.Z1)(c.displayName,u),ouiaSafe:m,ouiaComponentType:c.displayName,alignments:d},p)},r.createElement(l.R,Object.assign({menuAppendTo:f,isFlipEnabled:g,removeFindDomNode:y,zIndex:h},v)))};c.displayName="Dropdown"},39591:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(85893),r=n(43297);const o=function(e){var t=e.component,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["component"]);return(0,r.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Unable to load inventory component"}),(0,a.jsxs)("h2",{children:["Failed to load ",t]}),(0,a.jsx)("code",{children:"More info can be found in browser console output."})]})}},33739:(e,t,n)=>{n.d(t,{Z:()=>v});var a=n(85893),r=n(43297),o=n.n(r),s=n(45697),l=n.n(s),i=n(59823),c=n(93942),u=n(21602),m=n(39591),d=n(94184),p=n.n(d),f=n(72126),g=function(){return g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)},y=function(e){var t=(0,c.oR)(),n=e.component;return(0,a.jsx)(n,g({className:p()(e.className,"inventory")},{children:(0,a.jsx)(r.Suspense,g({fallback:e.fallback},{children:(0,a.jsx)(i.ScalprumComponent,g({history:e.history,store:t,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:(0,a.jsx)(m.Z,g({component:"InventoryDetailHead"},e)),ref:e.innerRef},e))}))}))};y.propTypes={fallback:l().node,innerRef:l().object,component:l().string,className:l().string,history:l().object};var h=o().forwardRef((function(e,t){return(0,a.jsx)(y,g({innerRef:t},e))}));h.propTypes={fallback:l().node,component:l().string,className:l().string},h.defaultProps={fallback:(0,a.jsx)(u.Bullseye,g({className:"pf-u-p-lg"},{children:(0,a.jsx)(u.Spinner,{size:"xl"})})),component:"section"};const v=o().forwardRef((function(e,t){return(0,a.jsx)(f.Z,g({innerRef:t,Component:h},e))}))},72126:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(85893),r=n(43297),o=n.n(r),s=n(62012),l=n(55140),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},u=function(e){var t=e.Component,n=c(e,["Component"]),r=s.useHistory();return(0,a.jsx)(t,i({history:r},n))},m=function(e){var t=e.Component,n=c(e,["Component"]),r=(0,l.Z)().chromeHistory;return(0,a.jsx)(t,i({history:r},n))};const d=o().forwardRef((function(e,t){var n=e.Component,o=c(e,["Component"]),l=(0,r.useMemo)((function(){return"function"==typeof s.useHistory?u:m}),[n,o]);return(0,a.jsx)(l,i({innerRef:t,Component:n},o))}))},97648:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(29439),r=n(43297),o=n.n(r),s=n(45697),l=n.n(s),i=n(47173),c=n(93149),u=n(80236),m=n(30893),d=n(32132),p=function(e){var t=e.isModalOpen,n=e.setModalOpen,s=e.templateName,l=e.onConfirm,p=(0,r.useState)(!1),f=(0,a.Z)(p,2),g=f[0],y=f[1],h=function(){n(!1),y(!1)};return o().createElement(u.u,{title:d.N.formatMessage(m.Z.titlesTemplateDeleteModalTitle),titleIconVariant:"warning",isOpen:t,onClose:h,variant:"small",actions:[o().createElement(i.zx,{key:"confirm",variant:"danger",onClick:function(){h(),l()},isDisabled:!g},d.N.formatMessage(m.Z.labelsDelete)),o().createElement(i.zx,{key:"cancel",variant:"link",onClick:h},d.N.formatMessage(m.Z.labelsCancel))]},d.N.formatMessage(m.Z.titlesTemplateDeleteModalText,{templateName:s,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o().createElement("b",null,t)}}),o().createElement(c.X,{className:"pf-u-mt-md",isChecked:g,checked:g,onChange:function(e){return y(e)},label:d.N.formatMessage(m.Z.titlesTemplateDeleteModalCheckbox),id:"template-delete-modal-checkbox"}))};p.propTypes={isModalOpen:l().bool,setModalOpen:l().func,templateName:l().string,onConfirm:l().func};const f=p},98333:(e,t,n)=>{n.d(t,{Z:()=>D});var a=n(29439),r=n(43297),o=n.n(r),s=n(45697),l=n.n(s),i=n(80236),c=n(47173),u=n(50693),m=n(50383),d=n(74806),p=n(30893),f=n(15861),g=n(64687),y=n.n(g),h=n(93942),v=n(83215),b=n(11220),E=n(20677),O=n(16475),w=function(e,t,n){return o().createElement(O.P,null,n.formatMessage(p.Z[e],{systemsCount:t,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o().createElement("b",null,t)}}))},S=function(e){var t=e.unassignSystemsModalState,n=void 0===t?{}:t,s=e.setUnassignSystemsModalOpen,l=e.intl,d=n.systemsIDs,g=n.isUnassignSystemsModalOpen,O=(0,r.useState)([]),S=(0,a.Z)(O,2),D=S[0],C=S[1],P=(0,r.useState)(!0),T=(0,a.Z)(P,2),Z=T[0],j=T[1],M=function(e){s({isUnassignSystemsModalOpen:!g,systemsIDs:[],shouldRefresh:e})},x=function(){M(!1)},I=function(e,t){var n=(0,h.I0)(),a=function(){var a=(0,f.Z)(y().mark((function a(){return y().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,b.C9)({inventory_ids:t});case 2:200===a.sent.status&&(e(!0),n((0,v.wN)((0,E.$z)((null==t?void 0:t.length)||0).success)));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return a}(M,D);(0,r.useEffect)((function(){j(!0),function(e){return(0,b.lc)({limit:-1,"filter[baseline_name]":"neq:",filter:{stale:[!0,!1]}}).then((function(t){return e.filter((function(e){return null==t?void 0:t.data.some((function(t){return t.id===e}))}))}))}(d).then((function(e){C(e),j(!1)}))}),[d]);var k=d.length-D.length;return o().createElement(i.u,{variant:"small",isOpen:n.isUnassignSystemsModalOpen,title:l.formatMessage(p.Z.textUnassignSystemsTitle),onClose:x,titleIconVariant:"warning",actions:[o().createElement(c.zx,{key:"confirm",variant:"danger",onClick:I,isDisabled:Z||0===D.length},l.formatMessage(p.Z.labelsRemove)),o().createElement(c.zx,{key:"cancel",variant:"link",onClick:x},l.formatMessage(p.Z.labelsCancel))]},o().createElement(u.r,{hasGutter:!0},Z?o().createElement(m.O,null):o().createElement(r.Fragment,null,D.length>0&&w("textUnassignSystemsStatement",D.length,l),k>0&&w("textUnassignSystemsWarning",k,l))))};S.propTypes={intl:l().any,setUnassignSystemsModalOpen:l().func,unassignSystemsModalState:l().object};const D=(0,d.ZP)(S)},99910:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var a=n(4942),r=n(29439),o=n(14748),s=n(43297),l=n.n(s),i=n(86896),c=n(93942),u=n(62012),m=n(30893),d=n(49642),p=n(14240),f=n(91607),g=n(9557),y=n(52643),h=n(56787),v=n(84457),b=n(99355),E=n(75728),O=n(50383),w=n(2372),S=n(68340),D=n(68774),C=n(97648),P=n(11220),T=n(83215),Z=n(13784),j=n(52579),M=n(5391),x=n(45329),I=n(20677),k=n(95249),N=n(98333),R=n(75863),L=n(33739),F=n(42154),U=n(97779),_=n(7322),A=n(5747),z=n(58684),B=n(35240),H=n(93080),W=n(83905),q=n(55140);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const K=function(){var e=(0,i.Z)(),t=(0,c.I0)(),n=(0,q.Z)(),a=(0,u.useSearchParams)(),G=(0,r.Z)(a,2),K=G[0],V=G[1],Y=(0,u.useNavigate)(),J=(0,c.oR)(),Q=(0,s.useRef)(null),X=(0,u.useParams)().templateName,ee=l().useState(!0),te=(0,r.Z)(ee,2),ne=te[0],ae=te[1],re=(0,s.useState)(!1),oe=(0,r.Z)(re,2),se=oe[0],le=oe[1],ie=(0,s.useState)(!1),ce=(0,r.Z)(ie,2),ue=ce[0],me=ce[1],de=(0,s.useState)({isPatchSetWizardOpen:!1,isUnassignSystemsModalOpen:!1,systemsIDs:[],shouldRefresh:!1}),pe=(0,r.Z)(de,2),fe=pe[0],ge=pe[1],ye=(0,c.v9)((function(e){return e.PatchSetDetailStore})),he=(0,c.v9)((function(e){var t,n,a=e.PatchSetDetailStore;return null===(t=null==a||null===(n=a.status)||void 0===n?void 0:n.isLoading)||void 0===t||t})),ve=(0,c.v9)((function(e){return e.PatchSetDetailStore.status})),be=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.rows)||[]}),c.wU),Ee=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRows)||[]})),Oe=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.status)||{}})),we=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.total)||0})),Se=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return(null==t?void 0:t.queryParams)||{}})),De=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return null==t?void 0:t.templateHasSystemsLoading})),Ce=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return null==t?void 0:t.templateHasSystems})),Pe=(0,k.c$)(["patch:*:*","patch:template:write"]).hasAccess,Te=ye.data.attributes.name;(0,s.useEffect)((function(){Te&&n.updateDocumentTitle("".concat(Te," - ").concat(e.formatMessage(m.Z.titlesTemplate),"\n        ").concat(Z.JD))}),[n,Te]);var Ze=(0,H.r)(be,Ee,{endpoint:H.c.templateSystems(X),queryParams:Se,selectionDispatcher:g.i2}),je=function(e){t((0,g.JP)(e))},Me=function(){ge($($({},fe),{},{isPatchSetWizardOpen:!0}))};(0,s.useEffect)((function(){return t((0,g.ve)({id:X,limit:1})),function(){t((0,g.pV)()),t((0,g.RV)())}}),[]),(0,s.useEffect)((function(){var e;!0===fe.shouldRefresh&&(null==Q||null===(e=Q.current)||void 0===e||e.onRefreshData({timestamp:Date.now()}),Ze("none"),t((0,g.Ku)(X)),ge($($({},fe),{},{shouldRefresh:!1})),t((0,g.ve)({id:X,limit:1})))}),[fe.shouldRefresh]),(0,f.KW)((function(){ne?(je((0,M.PZ)("?"+K.toString())),t((0,g.Ku)(X)),ae(!1)):V((0,M.R_)(Se))}),[Se,ne]);var xe=function(e){ge($($({},fe),{},{isUnassignSystemsModalOpen:!0,systemsIDs:e}))},Ie=(0,f.U)(P.TH,je,{id:X},V,(function(e){t((0,g.T5)(e))}),(function(e){t((0,g.vl)(e))})),ke=[l().createElement(v.h,{key:"edit-patch-set",component:"button",onClick:function(){return Me()}},e.formatMessage(m.Z.labelsButtonEditTemplate)),l().createElement(v.h,{key:"delete-patch-set",component:"button",onClick:function(){return me(!0)}},e.formatMessage(m.Z.labelsButtonRemoveTemplate))],Ne=(0,M.PZ)("?"+K.toString()),Re=Se.systemProfile,Le=Se.selectedTags,Fe=Se.filter,Ue=Se.search,_e=Se.page,Ae=Se.perPage,ze=Se.sort,Be=Ee&&(0,M.Qy)(Ee).length,He=(0,f.Pz)(Be,Ze,{total_items:we},be),We=(0,f.j5)($({search:Ue},Fe),je),qe=(0,r.Z)(We,1)[0],Ge=(0,W.Z)(null==Fe?void 0:Fe.os,je),$e=(0,F.C5)(Ue,je,Ge),Ke=(0,F.Fy)(Fe,Ue,qe);return null!=ve&&ve.hasError?l().createElement(j.Z,{code:null==ve?void 0:ve.code}):l().createElement(s.Fragment,null,l().createElement(C.Z,{templateName:Te,isModalOpen:ue,setModalOpen:me,onConfirm:function(){(0,P.f_)(X).then((function(){t((0,T.wN)((0,Z.D$)(Te).success)),Y("../templates")})).catch((function(){t((0,T.wN)((0,Z.D$)(Te).error))}))}}),fe.isPatchSetWizardOpen&&l().createElement(x.Z,{systemsIDs:fe.systemsIDs,setBaselineState:ge,patchSetID:X}),l().createElement(N.Z,{unassignSystemsModalState:fe,setUnassignSystemsModalOpen:ge}),l().createElement(d.Z,{title:he?l().createElement(O.O,{style:{width:300}}):Te,headerOUIA:"template-details",breadcrumbs:[{title:e.formatMessage(m.Z.templateDetailHeaderBreadcrumb),to:"/templates",isActive:!1},{title:he?l().createElement(O.O,{style:{width:150}}):Te,isActive:!0}],actions:l().createElement(h.L,{position:b.ir.right,onSelect:function(){le(!1),document.getElementById("patch-set-detail-header-kebab").focus()},toggle:l().createElement(E.Z,{id:"patch-set-detail-header-kebab",className:"pf-u-mr-xl",onToggle:function(e){return le(e)},style:{minWidth:150}},e.formatMessage(m.Z.labelsActions)),isOpen:se,dropdownItems:ke})},l().createElement("table",{border:"0",style:{marginTop:8}},l().createElement("tbody",null,l().createElement("tr",null,l().createElement("td",{style:{width:300}},e.formatMessage(m.Z.templateDetailTableDescription)),l().createElement("td",null,he?l().createElement(O.O,{style:{width:300}}):ye.data.attributes.description||e.formatMessage(m.Z.titlesTemplateNoDescription))),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTableUpToDate)),l().createElement("td",null,he?l().createElement(O.O,{style:{width:100}}):(0,B.Un)(ye.data.attributes.config.to_time))),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTableCreatedBy)),l().createElement("td",null,he?l().createElement(O.O,{style:{width:100}}):ye.data.attributes.creator)),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTablePublished)),l().createElement("td",null,he?l().createElement(O.O,{style:{width:100}}):(0,B.Un)(ye.data.attributes.published))),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTableLastEdited)),l().createElement("td",null,he?l().createElement(O.O,{style:{width:100}}):(0,B.Un)(ye.data.attributes.last_edited)))))),l().createElement(o.ZP,null,l().createElement(D.D,null,l().createElement(S.x,{component:"h2",className:"pf-u-mb-md"},e.formatMessage(m.Z.templateDetailTableTitle))),De?l().createElement(y.b,null,l().createElement(w.$,{size:"xl"})):Ce?Oe.hasError?l().createElement(j.Z,{code:Oe.code}):l().createElement(L.Z,{ref:Q,isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0,tags:!1},columns:function(e){return(0,F.yF)(e)},showTags:!0,onLoad:function(e){var t=e.mergeWithEntities;J.replaceReducer((0,U.UY)($($({},_.E),t((0,A.Kq)((0,z.Fs)(!0),A.lu),(0,M.fm)({page:_e,perPage:Ae,sort:ze,search:Ue},Ne)))))},customFilters:{patchParams:{search:Ue,filter:Fe,systemProfile:Re,selectedTags:Le}},paginationProps:{isDisabled:0===we},getEntities:Ie,bulkSelect:He,tableProps:{canSelectAll:!1,variant:R.B.compact,className:"patchCompactInventory",isStickyHeader:!0,actionResolver:function(){return Pe?(0,I.Z8)(xe):[]}},actionsConfig:{actions:["",{key:"remove-multiple-systems",label:e.formatMessage(m.Z.titlesTemplateRemoveFromSystems,{systemsCount:Be}),onClick:function(){return xe((0,M.LI)(Ee))},props:{isDisabled:0===Be}}]},filterConfig:$e,activeFiltersConfig:Ke}):l().createElement(p.$6,{onButtonClick:function(){return Me()}})))}},5747:(e,t,n)=>{n.d(t,{G:()=>m,Kq:()=>g,OC:()=>d,PD:()=>f,lu:()=>p});var a=n(29439),r=n(4942),o=n(36248),s=n(48881),l=n(22789);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={rows:[],entities:[],selectedRows:{},status:{},page:1,perPage:20,metadata:{limit:20,offset:0,total_items:0}},m=function(e,t){return t.loaded?c(c({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,o.Yk)(t.rows,t.selectedRows)}):t},d=function(e,t,n){if("SELECT_ENTITY"===n){var r=t.packageEvraCache;void 0===r&&(r={},t.rows.forEach((function(e){return r[e.id]=e.available_evra})),t.packageEvraCache=r),t.selectedRows=t.selectedRows?Object.fromEntries(Object.entries(t.selectedRows).map((function(e){var t=(0,a.Z)(e,2),n=t[0],o=t[1];return!0===o?[n,r[n]]:[n,o]}))):t.selectedRows}return"LOAD_ENTITIES_FULFILLED"===n&&(t.packageEvraCache=void 0),t.loaded?c(c({},t),{},{columns:e,rows:(0,o.GF)(t.rows,t.selectedRows)}):t},p=function(e,t){return t.loaded?c(c({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,o.dn)(t.rows,t.selectedRows)}):t},f=function(e,t){return t.loaded?c(c({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,o.mf)(t.rows,t.selectedRows)}):t},g=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0,r=c({},n);switch(a.type){case"LOAD_ENTITIES_FULFILLED":return t(e,r,a.type);case"LOAD_ENTITIES_PENDING":return r.status={isLoading:!0,hasError:!1},r;case"LOAD_ENTITIES_REJECTED":return(0,s.PW)(r,a);case"SELECT_ENTITY":var o=(0,s.hd)(r,a);return t(e,o,a.type);case l.sq:return u;default:return n}}}}}]);
//# sourceMappingURL=../sourcemaps/TemplateDetail.99345d8cfab5113b8c74f21552cc4be5.js.map