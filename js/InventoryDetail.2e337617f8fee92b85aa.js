"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[184],{39591:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(85893),r=n(43297);const a=function(e){var t=e.component,n=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}(e,["component"]);return(0,r.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Unable to load inventory component"}),(0,s.jsxs)("h2",{children:["Failed to load ",t]}),(0,s.jsx)("code",{children:"More info can be found in browser console output."})]})}},85861:(e,t,n)=>{n.d(t,{Z:()=>u});var s=n(43297),r=n.n(s),a=n(45697),o=n.n(a),i=n(74079),l=n(98333),c=function(e){var t=e.patchSetState,n=e.setPatchSetState;return r().createElement(r().Fragment,null,t.isUnassignSystemsModalOpen&&r().createElement(l.Z,{unassignSystemsModalState:t,setUnassignSystemsModalOpen:n,systemsIDs:t.systemsIDs}),t.isPatchSetWizardOpen&&r().createElement(i.Z,{systemsIDs:t.systemsIDs,setBaselineState:n}))};c.propTypes={patchSetState:o().object,setPatchSetState:o().func};const u=c},98333:(e,t,n)=>{n.d(t,{Z:()=>E});var s=n(29439),r=n(43297),a=n.n(r),o=n(45697),i=n.n(o),l=n(80236),c=n(47173),u=n(50693),p=n(50383),m=n(74806),f=n(30893),y=n(15861),d=n(64687),h=n.n(d),v=n(28216),g=n(83215),S=n(11220),b=n(13784),O=n(16475),j=function(e,t,n){return a().createElement(O.P,null,n.formatMessage(f.Z[e],{systemsCount:t,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a().createElement("b",null,t)}}))},P=function(e){var t=e.unassignSystemsModalState,n=void 0===t?{}:t,o=e.setUnassignSystemsModalOpen,i=e.intl,m=n.systemsIDs,d=n.isUnassignSystemsModalOpen,O=(0,r.useState)([]),P=(0,s.Z)(O,2),E=P[0],x=P[1],Z=(0,r.useState)(!0),M=(0,s.Z)(Z,2),k=M[0],I=M[1],D=function(e){o({isUnassignSystemsModalOpen:!d,systemsIDs:[],shouldRefresh:e})},w=function(){D(!1)},N=function(e,t){var n=(0,v.I0)(),s=function(){var s=(0,y.Z)(h().mark((function s(){return h().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,S.J_)({inventory_ids:t});case 2:200===s.sent.status&&(e(!0),n((0,g.wN)((0,b.$z)((null==t?void 0:t.length)||0).success)));case 4:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return s}(D,E);(0,r.useEffect)((function(){I(!0),function(e){return(0,S.lc)({limit:-1,"filter[baseline_name]":"neq:",filter:{stale:[!0,!1]}}).then((function(t){return e.filter((function(e){return null==t?void 0:t.data.some((function(t){return t.id===e}))}))}))}(m).then((function(e){x(e),I(!1)}))}),[m]);var R=m.length-E.length;return a().createElement(l.u,{variant:"small",isOpen:n.isUnassignSystemsModalOpen,title:i.formatMessage(f.Z.textUnassignSystemsTitle),onClose:w,titleIconVariant:"warning",actions:[a().createElement(c.zx,{key:"confirm",variant:"danger",onClick:N,isDisabled:k||0===E.length},i.formatMessage(f.Z.labelsRemove)),a().createElement(c.zx,{key:"cancel",variant:"link",onClick:w},i.formatMessage(f.Z.labelsCancel))]},a().createElement(u.r,{hasGutter:!0},k?a().createElement(p.O,null):a().createElement(r.Fragment,null,E.length>0&&j("textUnassignSystemsStatement",E.length,i),R>0&&j("textUnassignSystemsWarning",R,i))))};P.propTypes={intl:i().any,setUnassignSystemsModalOpen:i().func,unassignSystemsModalState:i().object};const E=(0,m.ZP)(P)},13454:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var s=n(4942),r=n(43297),a=n.n(r),o=n(14748),i=n(28216),l=n(97779),c=n(49642),u=n(7322),p=n(92544),m=n(32132),f=n(30893),y=n(91607),d=n(85893),h=n(45697),v=n.n(h),g=n(59823),S=n(334),b=n(48335),O=n(39591),j=n(94184),P=n.n(j),E=function(){return E=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},E.apply(this,arguments)},x=function(e){var t=(0,S.useHistory)(),n=(0,i.oR)(),s=e.component;return(0,d.jsx)(s,E({className:P()(e.className,"inventory")},{children:(0,d.jsx)(r.Suspense,E({fallback:e.fallback},{children:(0,d.jsx)(g.ScalprumComponent,E({history:t,store:n,appName:"inventory",module:"./DetailWrapper",scope:"inventory",ErrorComponent:(0,d.jsx)(O.Z,E({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))}))}))};x.propTypes={fallback:v().node,innerRef:v().object,component:v().string,className:v().string};var Z=a().forwardRef((function(e,t){return(0,d.jsx)(x,E({innerRef:t},e))}));Z.propTypes={fallback:v().node,component:v().string,className:v().string},Z.defaultProps={fallback:(0,d.jsx)(b.Bullseye,E({className:"pf-u-p-lg"},{children:(0,d.jsx)(b.Spinner,{size:"xl"})})),component:"section"};const M=Z;var k=function(){return k=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},k.apply(this,arguments)},I=function(e){var t=(0,S.useHistory)(),n=(0,i.oR)(),s=e.component;return(0,d.jsx)(s,k({className:P()(e.className,"inventory")},{children:(0,d.jsx)(r.Suspense,k({fallback:e.fallback},{children:(0,d.jsx)(g.ScalprumComponent,k({history:t,store:n,appName:"inventory",module:"./InventoryDetailHead",scope:"inventory",ErrorComponent:(0,d.jsx)(O.Z,k({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))}))}))};I.propTypes={fallback:v().node,innerRef:v().object,component:v().string,className:v().string};var D=a().forwardRef((function(e,t){return(0,d.jsx)(I,k({innerProps:t},e))}));D.propTypes={fallback:v().node,component:v().string,className:v().string},D.defaultProps={fallback:(0,d.jsx)(b.Bullseye,k({className:"pf-u-p-lg"},{children:(0,d.jsx)(b.Spinner,{size:"xl"})})),component:"section"};const w=D;var N=n(41448),R=n(50693),_=n(16475),U=n(68774),C=n(68340),T=n(9557),z=n(83215),W=n(85861),A=n(79875),H=n(13784),B=n(79577);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const J=function(){var e=(0,S.useParams)().inventoryId,t=(0,i.oR)(),n=(0,i.I0)(),s=(0,i.v9)((function(e){var t=e.entityDetails;return t&&t||{}})),d=s.hasThirdPartyRepo,h=s.patchSetName,v=(0,i.v9)((function(e){var t,n=e.entityDetails;return null!==(t=null==n?void 0:n.entity)&&void 0!==t?t:{}})).display_name,g=(0,A.Z)(),b=g.patchSetState,O=g.setPatchSetState,j=g.openPatchSetAssignWizard,P=g.openUnassignSystemsModal;(0,r.useEffect)((function(){return n((0,T.Eh)(e)),function(){n((0,z.L1)())}}),[b.shouldRefresh]);var E=v&&"".concat(v," - ").concat(m.N.formatMessage(f.Z.titlesSystems));(0,y.Iw)(E);var x=(0,y.ye)(H.VH.patch_set);return a().createElement(M,{onLoad:function(e){var n=e.mergeWithDetail;t.replaceReducer((0,l.UY)(L(L({},u.E),n(p.J))))},inventoryId:e},a().createElement(W.Z,{patchSetState:b,setPatchSetState:O}),a().createElement(c.Z,{title:"",headerOUIA:"inventory-details",breadcrumbs:[{title:m.N.formatMessage(f.Z.titlesPatchSystems),to:"/systems",isActive:!1},v&&{title:v,isActive:!0}]},a().createElement(w,{hideBack:!0,showTags:!0,inventoryId:e,actions:x&&[{title:m.N.formatMessage(f.Z.titlesTemplateAssign),key:"assign-to-template",onClick:function(){j(e)}},{title:m.N.formatMessage(f.Z.titlesTemplateRemoveMultipleButton),key:"remove-from-template",isDisabled:!h,onClick:function(){return P([e])}}],appList:[]},a().createElement(R.r,null,a().createElement(_.P,null,h&&a().createElement(U.D,null,a().createElement(C.x,null,"".concat(m.N.formatMessage(f.Z.labelsColumnsTemplate),": ").concat(h)))),a().createElement(_.P,null,d&&a().createElement(N.b,{className:"pf-u-mt-md",isInline:!0,variant:"info",title:m.N.formatMessage(f.Z.textThirdPartyInfo)}))))),a().createElement(o.Z,null,a().createElement(B.Z,{inventoryId:e})))}},79875:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(29439),r=n(43297),a=n(5391);const o=function(e){var t=(0,r.useState)({isPatchSetWizardOpen:!1,isUnassignSystemsModalOpen:!1,shouldRefresh:!1,systemsIDs:[]}),n=(0,s.Z)(t,2),o=n[0],i=n[1];return{patchSetState:o,setPatchSetState:i,openPatchSetAssignWizard:function(t){i({isPatchSetWizardOpen:!0,systemsIDs:"string"==typeof t&&""!==t?[t]:(0,a.LI)(e),shouldRefresh:!1})},openUnassignSystemsModal:function(e){i({isUnassignSystemsModalOpen:!0,systemsIDs:e,shouldRefresh:!1})},openPatchSetEditModal:function(e){i({isPatchSetWizardOpen:!0,patchSetID:e})}}}}}]);