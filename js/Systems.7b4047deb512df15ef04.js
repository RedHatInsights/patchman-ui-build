(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[743],{78970:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>N});var r=n(85061),s=n(96156),o=n(92137),i=n(28481),a=n(87757),c=n.n(a),u=n(72573),l=n(86350),f=n(20167),m=n(35240),p=n(33739),S=n(77865),y=n.n(S),d=n(61084),b=n(60578),v=n(28725),h=n(87145),g=n(88515),_=n(55949),O=n(75835),Z=n(76923),w=n(48527),P=n(2558),E=n(49736),j=n(22347),k=n(96928),D=n(45168),L=n(28961),C=n(14030);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){(0,s.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const N=function(){var t=k.N.formatMessage(b.Z.titlesSystems);(0,j.Iw)(t);var e=(0,d.useDispatch)(),n=y().useState(!1),s=(0,i.Z)(n,2),a=s[0],S=s[1],T=y().useState((function(){return function(){return null}})),N=(0,i.Z)(T,2),I=N[0],M=N[1],A=(0,d.useSelector)((function(t){return t.SystemsListStore.rows})),W=(0,d.useSelector)((function(t){return t.SystemsListStore.selectedRows})),q=y().useMemo((function(){return(0,P.Yk)(A,W)}),[A]),x=(0,d.useSelector)((function(t){return t.SystemsListStore.status})),z=(0,d.useSelector)((function(t){return t.SystemsListStore.metadata})),H=(0,d.useSelector)((function(t){return t.SystemsListStore.queryParams})),K=(0,d.useSelector)((function(t){var e=t.entities;return e&&e.columns})),Q=H.filter,R=H.search;(0,j.KW)((function(){e((0,_.ZX)(H))}),[H]);var U=(0,j.T8)(z.limit,z.offset),V=(0,i.Z)(U,2),Y=V[0],B=V[1];function J(t){return X.apply(this,arguments)}function X(){return(X=(0,o.Z)(c().mark((function t(e){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S(!0),t.next=3,e;case 3:n=t.sent,M((function(){return function(){return y().createElement(L.Z,{data:n})}})),S(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(t){e((0,_.PH)(t))}var $=(0,j.j5)(Q,G),tt=(0,i.Z)($,1)[0],et={items:[(0,v.Z)(G,R,k.N.formatMessage(b.Z.labelsFiltersSystemsSearchTitle),k.N.formatMessage(b.Z.labelsFiltersSystemsSearchPlaceholder))]},nt={filters:(0,E.mt)(Q,R),onDelete:tt},rt=function(){var t=K&&K.filter((function(t){return"updated"===t.key}))[0];return t=F(F({},t),{},{key:"last_upload"}),[].concat((0,r.Z)(C.Fs),[t])},st=(0,j.ry)(q,W,(function(){return(0,Z.lc)(F(F({},H),{},{limit:-1}))}),(function(t){e({type:"SELECT_ENTITY",payload:t})})),ot=(0,j._f)(rt(),G,1),it=y().useMemo((function(){return(0,E.hO)(rt(),z.sort,1)}),[z.sort]),at=W&&(0,E.Qy)(W).length,ct=function(t){return(0,Z.ob)({limit:-1}).then((function(e){var n=e.data;return(0,Z.fq)({advisories:n.map((function(t){return t.id})),systems:t})}))};return y().createElement(y().Fragment,null,y().createElement(h.Z,{title:k.N.formatMessage(b.Z.titlesPatchSystems),headerOUIA:"systems"}),y().createElement(I,null),y().createElement(l.Z,null,x===w.g_?y().createElement(f.Z,null):y().createElement(p.Z,{disableDefaultColumns:!0,getEntities:function(t,e){return(0,E.Z1)(e,z,G),Promise.resolve({results:A.map((function(t){return F(F({},t.attributes),{},{id:t.id})})),total:z.total_items})},onLoad:function(t){var e=t.mergeWithEntities,n=(0,g.b)();(0,g.z)(F({},e((0,O.Kq)(C.Fs,n.getState().SystemsListStore))))},isFullView:!0,items:q,page:Y,total:z.total_items,perPage:B,isLoaded:x===w.Wd,exportConfig:{isDisabled:0===z.total_items,onSelect:function(t,e){var n=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",r="systems-".concat(n);"csv"===e?(0,Z.wI)(H).then((function(t){return(0,m.Sv)(t,r,"csv")})):(0,Z.TW)(H).then((function(t){return(0,m.Sv)(JSON.stringify(t),r,"json")}))}},bulkSelect:st&&(0,j.Pz)(at,st,z,q),actions:(0,C.Sb)(J),filterConfig:et,activeFiltersConfig:nt,tableProps:{areActionsDisabled:function(t){return t.applicable_advisories.every((function(t){return 0===t}))},onSort:z.total_items&&ot,sortBy:z.total_items&&it,canSelectAll:!1,variant:u.TableVariant.compact,className:"patchCompactInventory",isStickyHeader:!0},dedicatedAction:y().createElement(D.Z,{onClick:function(){return J((0,E.Sz)((0,E.UZ)(W),ct,E.R9))},isDisabled:0===(0,E.Qy)(W).length||a,isLoading:a,ouia:"toolbar-remediation-button"})})))}}}]);