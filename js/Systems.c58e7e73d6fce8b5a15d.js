(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[743],{45233:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n(87757),o=n.n(r),c=n(319),s=n.n(c),a=n(59713),i=n.n(a),l=n(48926),u=n.n(l),f=n(63038),m=n.n(f),p=n(32895),S=n(59505),y=n(72573),d=n(89583),b=n(99068),g=n(75741),h=n(53433),v=n(77865),_=n.n(v),O=n(87016),w=n(18623),k=n(75107),E=n(95466),P=n(66490),j=n(50371),C=n(71724),F=n(58492),L=n(79143),T=n(52798),D=n(92026),Z=n(45505),I=n(11550),N=n(21410),M=n(10047),W=n(51439);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const A=function(){var e=I.N.formatMessage(w.Z.titlesSystems);(0,Z.Iw)(e);var t=(0,O.useDispatch)(),n=_().useState(!1),r=m()(n,2),c=r[0],a=r[1],i=_().useState((function(){return function(){return null}})),l=m()(i,2),f=l[0],v=l[1],q=(0,O.useSelector)((function(e){return e.SystemsListStore.rows})),A=(0,O.useSelector)((function(e){return e.SystemsListStore.selectedRows})),R=_().useMemo((function(){return(0,T.Yk)(q,A)}),[q]),z=(0,O.useSelector)((function(e){return e.SystemsListStore.status})),K=(0,O.useSelector)((function(e){return e.SystemsListStore.metadata})),Q=(0,O.useSelector)((function(e){return e.SystemsListStore.queryParams})),V=(0,O.useSelector)((function(e){var t=e.entities;return t&&t.columns})),Y=Q.filter,B=Q.search,G=(0,Z.W5)(K,te);(0,Z.KW)((function(){t((0,j.ZX)(Q))}),[Q]);var H=(0,Z.T8)(K.limit,K.offset),J=m()(H,2),U=J[0],X=J[1];function $(e){return ee.apply(this,arguments)}function ee(){return(ee=u()(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,t;case 3:n=e.sent,v((function(){return function(){return _().createElement(M.Z,{data:n})}})),a(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){t((0,j.PH)(e))}var ne=(0,Z.j5)(Y,te),re={items:[(0,k.Z)(te,B,I.N.formatMessage(w.Z.labelsFiltersSystemsSearchTitle),I.N.formatMessage(w.Z.labelsFiltersSystemsSearchPlaceholder))]},oe={filters:(0,D.mt)(Y,B),onDelete:ne},ce=function(){var e=V&&V.filter((function(e){return"updated"===e.key}))[0];return e=x(x({},e),{},{key:"last_upload"}),[].concat(s()(W.Fs),[e])},se=(0,Z.ry)(R,A,(function(){return(0,F.lc)(x(x({},Q),{},{limit:-1}))}),(function(e){t({type:"SELECT_ENTITY",payload:e})})),ae=(0,Z._f)(ce(),te),ie=_().useMemo((function(){return(0,D.hO)(ce(),K.sort,0)}),[K.sort]),le=A&&(0,D.Qy)(A).length,ue=function(e){return(0,F.ob)({limit:-1}).then((function(t){var n=t.data;return(0,F.fq)({advisories:n.map((function(e){return e.id})),systems:e})}))};return _().createElement(_().Fragment,null,_().createElement(E.Z,{title:I.N.formatMessage(w.Z.titlesPatchSystems),headerOUIA:"systems"}),_().createElement(f,null),_().createElement(d.o,null,z===L.g_?_().createElement(b.F,null):_().createElement(h.e_,{onLoad:function(e){var t=e.mergeWithEntities,n=(0,P.b)();(0,P.z)(x({},t((0,C.Kq)(W.Fs,n.getState().SystemsListStore))))},isFullView:!0,items:R,page:U,total:K.total_items,perPage:X,isLoaded:z===L.Wd,onRefresh:G,exportConfig:{onSelect:function(e,t){var n=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",r="systems-".concat(n);"csv"===t?(0,F.wI)(Q).then((function(e){return(0,g.downloadFile)(e,r,"csv")})):(0,F.TW)(Q).then((function(e){return(0,g.downloadFile)(JSON.stringify(e),r,"json")}))}},bulkSelect:se&&{count:le,items:[{title:"Select none (0)",onClick:function(){se("none")}},{title:"Select page (".concat(R.length,")"),onClick:function(){se("page")}},{title:"Select all (".concat(K.total_items,")"),onClick:function(){se("all")}}],onSelect:function(e){se(e?"all":"none")},toggleProps:{"data-ouia-component-type":"bulk-select-toggle-button"},checked:le===K.total_items||0!==le&&null},actions:(0,W.Sb)($),filterConfig:re,activeFiltersConfig:oe,tableProps:{areActionsDisabled:function(e){return e.applicable_advisories.every((function(e){return 0===e}))},onSort:ae,sortBy:ie,canSelectAll:!1,variant:y.TableVariant.compact,className:"patchCompactInventory"}},_().createElement(p.ToolbarGroup,null,_().createElement(S.ToolbarItem,null,_().createElement(N.Z,{onClick:function(){return $((0,D.Sz)(Object.keys(A).filter((function(e){return A[e]})),ue,D.R9))},isDisabled:0===(0,D.Qy)(A).length||c,isLoading:c,ouia:"toolbar-remediation-button"}),_().createElement(f,null))))))}}}]);
//# sourceMappingURL=Systems.c58e7e73d6fce8b5a15d.js.map