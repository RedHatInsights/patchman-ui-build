"use strict";(self.webpackChunkpatch=self.webpackChunkpatch||[]).push([[3198],{39591:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(85893),r=n(28416);const a=function(e){var t=e.component,n=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}(e,["component"]);return(0,r.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Unable to load inventory component"}),(0,s.jsxs)("h2",{children:["Failed to load ",t]}),(0,s.jsx)("code",{children:"More info can be found in browser console output."})]})}},72126:(e,t,n)=>{n.d(t,{Z:()=>f});var s=n(85893),r=n(28416),a=n.n(r),o=n(62012),l=n(55140),c=function(){return c=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)},i=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n},u=function(e){var t=e.Component,n=i(e,["Component"]),r=o.useHistory();return(0,s.jsx)(t,c({history:r},n))},m=function(e){var t=e.Component,n=i(e,["Component"]),r=(0,l.Z)().chromeHistory;return(0,s.jsx)(t,c({history:r},n))};const f=a().forwardRef((function(e,t){var n=e.Component,a=i(e,["Component"]),l=(0,r.useMemo)((function(){return"function"==typeof o.useHistory?u:m}),[n,a]);return(0,s.jsx)(l,c({innerRef:t,Component:n},a))}))},97804:(e,t,n)=>{n.d(t,{Z:()=>A});var s=n(28416),r=n.n(s),a=n(45697),o=n.n(a),l=n(63135),c=n(44118),i=n(4942),u=n(29439),m=n(80236),f=n(47173),p=n(49739),y=n(83826),d=n(80947),h=n(83133),g=n(74806),O=n(93665),b=n(30893),S=n(11220),v=n(93942),j=n(83215),E=n(20677),P=n(5391),w=n(28481),Z=n(59751),M=n(41609),I=n.n(M);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=e.patchSetState,n=void 0===t?{}:t,a=e.setPatchSetState,o=e.intl,l=e.totalItems,c=(0,v.I0)(),i=n.systemsIDs,g=n.isAssignSystemsModalOpen,M=(0,s.useState)([]),C=(0,u.Z)(M,2),x=C[0],D=C[1],U=(0,s.useState)({}),A=(0,u.Z)(U,2),z=A[0],H=A[1],T=(0,s.useState)([]),R=(0,u.Z)(T,2),N=R[0],F=R[1],_=(0,s.useState)(!0),q=(0,u.Z)(_,2),B=q[0],W=q[1],$=(0,Z.qS)().fetchBatched,G=function(){a({isAssignSystemsModalOpen:!g,systemsIDs:[]}),D([]),H({})};(0,s.useEffect)((function(){i&&!I()(i)&&(W(!0),(0,w.ol)(Object.keys(i),$,l).then((function(e){F(e),W(!1)})))}),[i]);var K=Object.keys(i).length-N.length;return r().createElement(m.u,{variant:"small",isOpen:n.isAssignSystemsModalOpen,title:o.formatMessage(b.Z.templateApply),onClose:G,actions:[r().createElement(f.zx,{key:"confirm",isDisabled:!(null!=z&&z.id),onClick:function(){var e=N.reduce((function(e,t){return e[t]=!0,e}),{});(0,S.CT)({inventory_ids:i},z.id).then((function(){c((0,j.wN)((0,E.og)(Object.keys(e).length).success)),a(k(k({},n),{},{shouldRefresh:!0,isAssignSystemsModalOpen:!1,systemsIDs:[]}))})).catch((function(){c((0,j.wN)((0,E.og)().failure))})),G()}},o.formatMessage(b.Z.templateApply)),r().createElement(f.zx,{key:"cancel",variant:"link",onClick:G},o.formatMessage(b.Z.labelsCancel))],"data-testid":"assign-systems-modal"},B?r().createElement(h.$,null):0===N.length?1===N.length?"Template cannot be applied to the selected system.":"Template cannot be applied to any of the selected systems.":r().createElement(p.K,{hasGutter:!0},r().createElement(y.v,null,o.formatMessage(b.Z.templateSelect,{systemCount:N.length,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r().createElement("b",null,t)}})),K>0&&r().createElement(y.v,null,o.formatMessage(b.Z.templateSelectSatellite,{systemCount:K,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r().createElement("b",null,t)}})),r().createElement(y.v,null,r().createElement(d.l,null,r().createElement(O.Z,{setSelectedPatchSet:D,selectedSets:x,selectCallback:H}))),r().createElement(y.v,null,o.formatMessage(b.Z.templateOr)),r().createElement(y.v,null,r().createElement(f.zx,{variant:"secondary",onClick:function(){a(k(k({},n),{},{isPatchSetWizardOpen:!0,systemsIDs:(0,P.LI)(i),shouldRefresh:!1})),D([]),H({}),W(!0)}},o.formatMessage(b.Z.templateCreate)))))};x.propTypes={intl:o().any,setPatchSetState:o().func,patchSetState:o().object,totalItems:o().number};const D=(0,g.ZP)(x);var U=function(e){var t=e.patchSetState,n=e.setPatchSetState,s=e.totalItems;return r().createElement(r().Fragment,null,t.isUnassignSystemsModalOpen&&r().createElement(c.Z,{unassignSystemsModalState:t,setUnassignSystemsModalOpen:n,systemsIDs:t.systemsIDs,totalItems:s}),r().createElement(D,{patchSetState:t,setPatchSetState:n,systemsIDs:t.systemsIDs,totalItems:s}),t.isPatchSetWizardOpen&&r().createElement(l.Z,{systemsIDs:t.systemsIDs,setBaselineState:n}))};U.propTypes={patchSetState:o().object,setPatchSetState:o().func,totalItems:o().number};const A=U},28481:(e,t,n)=>{n.d(t,{Hd:()=>y,P4:()=>f,ol:()=>p});var s=n(4942),r=n(28416),a=n.n(r),o=n(16475),l=n(30893),c=n(11220);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e,t,n,s){return n((function(e){return(0,c.dk)("/ids/systems",e)}),u(u({},e),{},{filter:{stale:[!0,!1]}}),s,100).then((function(e){var n=e.flatMap((function(e){return e.data}));return t.filter((function(e){return null==n?void 0:n.some((function(t){return t.id===e}))}))}))},f=function(e,t,n){return m({"filter[baseline_name]":"neq:"},e,t,n)},p=function(e,t,n){return m({"filter[satellite_managed]":"false"},e,t,n)},y=function(e,t,n){return a().createElement(o.P,null,n.formatMessage(l.Z[e],{systemsCount:t,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a().createElement("b",null,t)}}))}},44118:(e,t,n)=>{n.d(t,{Z:()=>P});var s=n(29439),r=n(28416),a=n.n(r),o=n(45697),l=n.n(o),c=n(80236),i=n(47173),u=n(50693),m=n(38386),f=n(74806),p=n(30893),y=n(15861),d=n(64687),h=n.n(d),g=n(93942),O=n(83215),b=n(11220),S=n(20677),v=n(28481),j=n(59751),E=function(e){var t=e.unassignSystemsModalState,n=void 0===t?{}:t,o=e.setUnassignSystemsModalOpen,l=e.intl,f=e.totalItems,d=n.systemsIDs,E=n.isUnassignSystemsModalOpen,P=(0,r.useState)([]),w=(0,s.Z)(P,2),Z=w[0],M=w[1],I=(0,r.useState)(!0),C=(0,s.Z)(I,2),k=C[0],x=C[1],D=(0,j.qS)().fetchBatched,U=function(e){o({isUnassignSystemsModalOpen:!E,systemsIDs:[],shouldRefresh:e})},A=function(){U(!1)},z=function(e,t){var n=(0,g.I0)(),s=function(){var s=(0,y.Z)(h().mark((function s(){var r;return h().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,b.C9)({inventory_ids:t});case 2:r=s.sent,e(!0),200===r.status?n((0,O.wN)((0,S.$z)((null==t?void 0:t.length)||0).success)):n((0,O.wN)((0,S.$z)().failure));case 5:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return s}(U,Z);(0,r.useEffect)((function(){x(!0),(0,v.P4)(d,D,f).then((function(e){M(e),x(!1)}))}),[d]);var H=d.length-Z.length;return a().createElement(c.u,{variant:"small",isOpen:n.isUnassignSystemsModalOpen,title:l.formatMessage(p.Z.textUnassignSystemsTitle),onClose:A,titleIconVariant:"warning",actions:[a().createElement(i.zx,{key:"confirm",variant:"danger",onClick:z,isDisabled:k||0===Z.length},l.formatMessage(p.Z.labelsRemove)),a().createElement(i.zx,{key:"cancel",variant:"link",onClick:A},l.formatMessage(p.Z.labelsCancel))],"data-testid":"unassign-systems-modal"},a().createElement(u.r,{hasGutter:!0},k?a().createElement(m.O,null):a().createElement(r.Fragment,null,0===Z.length&&(0,v.Hd)("textUnassignSystemsNoAssignedSystems",Z.length,l),Z.length>0&&(0,v.Hd)("textUnassignSystemsStatement",Z.length,l),Z.length>0&&H>0&&(0,v.Hd)("textUnassignSystemsWarning",H,l))))};E.propTypes={intl:l().any,setUnassignSystemsModalOpen:l().func,unassignSystemsModalState:l().object,totalItems:l().number};const P=(0,f.ZP)(E)}}]);
//# sourceMappingURL=../sourcemaps/3198.b49eca648cf35e6174c457674cd04adc.js.map