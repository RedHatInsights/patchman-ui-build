"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[9603],{21570:(e,t,n)=>{n.d(t,{L:()=>c});var a=n(70655),r=n(43297),s=n(73699),o=n(99355),l=n(17352),i=n(62472);const c=e=>{var{onSelect:t,ref:n,ouiaId:u,ouiaSafe:d,alignments:m,contextProps:p,menuAppendTo:f="inline",isFlipEnabled:g=!0,removeFindDomNode:h=!1,zIndex:y=9999}=e,b=(0,a.__rest)(e,["onSelect","ref","ouiaId","ouiaSafe","alignments","contextProps","menuAppendTo","isFlipEnabled","removeFindDomNode","zIndex"]);return r.createElement(o.Dl.Provider,{value:Object.assign({onSelect:e=>t&&t(e),toggleTextClass:s.default.dropdownToggleText,toggleIconClass:s.default.dropdownToggleImage,toggleIndicatorClass:s.default.dropdownToggleIcon,menuClass:s.default.dropdownMenu,itemClass:s.default.dropdownMenuItem,toggleClass:s.default.dropdownToggle,baseClass:s.default.dropdown,baseComponent:"div",sectionClass:s.default.dropdownGroup,sectionTitleClass:s.default.dropdownGroupTitle,sectionComponent:"section",disabledClass:s.default.modifiers.disabled,plainTextClass:s.default.modifiers.text,ouiaId:(0,i.Z1)(c.displayName,u),ouiaSafe:d,ouiaComponentType:c.displayName,alignments:m},p)},r.createElement(l.R,Object.assign({menuAppendTo:f,isFlipEnabled:g,removeFindDomNode:h,zIndex:y},b)))};c.displayName="Dropdown"},39591:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(85893),r=n(43297);const s=function(e){var t=e.component,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["component"]);return(0,r.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Unable to load inventory component"}),(0,a.jsxs)("h2",{children:["Failed to load ",t]}),(0,a.jsx)("code",{children:"More info can be found in browser console output."})]})}},33739:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(85893),r=n(43297),s=n.n(r),o=n(45697),l=n.n(o),i=n(59823),c=n(96620),u=n(28216),d=n(21602),m=n(39591),p=n(94184),f=n.n(p),g=function(){return g=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)},h=function(e){var t=(0,c.useHistory)(),n=(0,u.oR)(),s=e.component;return(0,a.jsx)(s,g({className:f()(e.className,"inventory")},{children:(0,a.jsx)(r.Suspense,g({fallback:e.fallback},{children:(0,a.jsx)(i.ScalprumComponent,g({history:t,store:n,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:(0,a.jsx)(m.Z,g({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))}))}))};h.propTypes={fallback:l().node,innerRef:l().object,component:l().string,className:l().string};var y=s().forwardRef((function(e,t){return(0,a.jsx)(h,g({innerRef:t},e))}));y.propTypes={fallback:l().node,component:l().string,className:l().string},y.defaultProps={fallback:(0,a.jsx)(d.Bullseye,g({className:"pf-u-p-lg"},{children:(0,a.jsx)(d.Spinner,{size:"xl"})})),component:"section"};const b=y},97648:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(29439),r=n(43297),s=n.n(r),o=n(45697),l=n.n(o),i=n(47173),c=n(93149),u=n(80236),d=n(30893),m=n(32132),p=function(e){var t=e.isModalOpen,n=e.setModalOpen,o=e.templateName,l=e.onConfirm,p=(0,r.useState)(!1),f=(0,a.Z)(p,2),g=f[0],h=f[1],y=function(){n(!1),h(!1)};return s().createElement(u.u,{title:m.N.formatMessage(d.Z.titlesTemplateDeleteModalTitle),titleIconVariant:"warning",isOpen:t,onClose:y,variant:"small",actions:[s().createElement(i.zx,{key:"confirm",variant:"danger",onClick:function(){y(),l()},isDisabled:!g},m.N.formatMessage(d.Z.labelsDelete)),s().createElement(i.zx,{key:"cancel",variant:"link",onClick:y},m.N.formatMessage(d.Z.labelsCancel))]},m.N.formatMessage(d.Z.titlesTemplateDeleteModalText,{templateName:o,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().createElement("b",null,t)}}),s().createElement(c.X,{className:"pf-u-mt-md",isChecked:g,checked:g,onChange:function(e){return h(e)},label:m.N.formatMessage(d.Z.titlesTemplateDeleteModalCheckbox),id:"template-delete-modal-checkbox"}))};p.propTypes={isModalOpen:l().bool,setModalOpen:l().func,templateName:l().string,onConfirm:l().func};const f=p},98333:(e,t,n)=>{n.d(t,{Z:()=>Z});var a=n(29439),r=n(43297),s=n.n(r),o=n(45697),l=n.n(o),i=n(80236),c=n(47173),u=n(50693),d=n(50383),m=n(74806),p=n(30893),f=n(15861),g=n(64687),h=n.n(g),y=n(28216),b=n(83215),v=n(11220),E=n(13784),O=n(16475),w=function(e,t,n){return s().createElement(O.P,null,n.formatMessage(p.Z[e],{systemsCount:t,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().createElement("b",null,t)}}))},S=function(e){var t=e.unassignSystemsModalState,n=void 0===t?{}:t,o=e.setUnassignSystemsModalOpen,l=e.intl,m=n.systemsIDs,g=n.isUnassignSystemsModalOpen,O=(0,r.useState)([]),S=(0,a.Z)(O,2),Z=S[0],T=S[1],D=(0,r.useState)(!0),P=(0,a.Z)(D,2),C=P[0],k=P[1],M=function(e){o({isUnassignSystemsModalOpen:!g,systemsIDs:[],shouldRefresh:e})},j=function(){M(!1)},x=function(e,t){var n=(0,y.I0)(),a=function(){var a=(0,f.Z)(h().mark((function a(){return h().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,v.C9)({inventory_ids:t});case 2:200===a.sent.status&&(e(!0),n((0,b.wN)((0,E.$z)((null==t?void 0:t.length)||0).success)));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return a}(M,Z);(0,r.useEffect)((function(){k(!0),function(e){return(0,v.lc)({limit:-1,"filter[baseline_name]":"neq:",filter:{stale:[!0,!1]}}).then((function(t){return e.filter((function(e){return null==t?void 0:t.data.some((function(t){return t.id===e}))}))}))}(m).then((function(e){T(e),k(!1)}))}),[m]);var N=m.length-Z.length;return s().createElement(i.u,{variant:"small",isOpen:n.isUnassignSystemsModalOpen,title:l.formatMessage(p.Z.textUnassignSystemsTitle),onClose:j,titleIconVariant:"warning",actions:[s().createElement(c.zx,{key:"confirm",variant:"danger",onClick:x,isDisabled:C||0===Z.length},l.formatMessage(p.Z.labelsRemove)),s().createElement(c.zx,{key:"cancel",variant:"link",onClick:j},l.formatMessage(p.Z.labelsCancel))]},s().createElement(u.r,{hasGutter:!0},C?s().createElement(d.O,null):s().createElement(r.Fragment,null,Z.length>0&&w("textUnassignSystemsStatement",Z.length,l),N>0&&w("textUnassignSystemsWarning",N,l))))};S.propTypes={intl:l().any,setUnassignSystemsModalOpen:l().func,unassignSystemsModalState:l().object};const Z=(0,m.ZP)(S)},20677:(e,t,n)=>{n.d(t,{Qk:()=>g,Z8:()=>f,gs:()=>m,mN:()=>d,mR:()=>p});var a=n(43297),r=n.n(a),s=n(47173),o=n(16545),l=n(7732),i=n(62165),c=n(32132),u=n(30893),d=function(e,t){return function(){return t?r().createElement(s.zx,{key:"createButton",onClick:function(){return e({isPatchSetWizardOpen:!0})}},c.N.formatMessage(u.Z.labelsButtonCreateTemplate)):r().createElement(o.u,{content:"For editing access, contact your administrator."},r().createElement(s.zx,{key:"createButton",isAriaDisabled:!0},c.N.formatMessage(u.Z.labelsButtonCreateTemplate)))}},m=[{key:"name",title:"Name",transforms:[l.p]},{key:"systems",title:"Systems applied",transforms:[l.p]},{key:"last_edited",title:"Last edited",transforms:[l.p]},{key:"published",title:"Published",transforms:[l.p]},{key:"creator",title:"Created by",transforms:[l.p]}],p=function(e,t){return[{title:c.N.formatMessage(u.Z.labelsButtonEditTemplate),onClick:function(t,n,a){e(null==a?void 0:a.id)}},{title:c.N.formatMessage(u.Z.labelsButtonRemoveTemplate),onClick:function(e,n,a){t(a)}}]},f=function(e){return[{title:c.N.formatMessage(u.Z.textUnassignSystemsShortTitle),onClick:function(t,n,a){e(a)}}]},g=function(){return r().createElement(o.u,{content:"For editing access, contact your administrator."},r().createElement(s.zx,{isAriaDisabled:!0,variant:"plain","aria-label":"plain kebab"},r().createElement(i.ZP,null)))}},99910:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(4942),r=n(29439),s=n(14748),o=n(43297),l=n.n(o),i=n(86896),c=n(28216),u=n(96620),d=n(30893),m=n(49642),p=n(14240),f=n(91607),g=n(9557),h=n(21570),y=n(84457),b=n(99355),v=n(75728),E=n(50383),O=n(68340),w=n(68774),S=n(97648),Z=n(11220),T=n(83215),D=n(13784),P=n(52579),C=n(5391),k=n(74079),M=n(20677),j=n(95249),x=n(98333),N=n(75863),I=n(33739),_=n(42154),R=n(97779),U=n(7322),F=n(5747),L=n(58684),z=n(35240);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const W=function(){var e=(0,f.mu)(),t=(0,i.Z)(),n=(0,c.I0)(),a=(0,u.useHistory)(),A=(0,c.oR)(),W=(0,o.useRef)(null),G=a.location.pathname.split("/")[2],H=l().useState(!0),q=(0,r.Z)(H,2),K=q[0],V=q[1],$=(0,o.useState)(!1),Y=(0,r.Z)($,2),J=Y[0],Q=Y[1],X=l().useState(!0),ee=(0,r.Z)(X,2),te=ee[0],ne=ee[1],ae=(0,o.useState)(!1),re=(0,r.Z)(ae,2),se=re[0],oe=re[1],le=(0,o.useState)({isPatchSetWizardOpen:!1,isUnassignSystemsModalOpen:!1,systemsIDs:[],shouldRefresh:!1}),ie=(0,r.Z)(le,2),ce=ie[0],ue=ie[1],de=(0,c.v9)((function(e){return e.PatchSetDetailStore})),me=(0,c.v9)((function(e){var t,n,a=e.PatchSetDetailStore;return null===(t=null==a||null===(n=a.status)||void 0===n?void 0:n.isLoading)||void 0===t||t})),pe=(0,c.v9)((function(e){return e.PatchSetDetailStore.status})),fe=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.status)||{}})),ge=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.total)||0})),he=(0,c.v9)((function(e){var t=e.entities;return null==t?void 0:t.loaded})),ye=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return(null==t?void 0:t.queryParams)||{}})),be=(0,j.c$)(["patch:*:*","patch:template:write"]).hasAccess,ve=de.data.attributes.name,Ee=function(e){n((0,g.JP)(e))},Oe=function(){ue(B(B({},ce),{},{isPatchSetWizardOpen:!0}))};(0,o.useEffect)((function(){return e().then((function(e){var t;ne(null==e||null===(t=e.smart_management)||void 0===t?void 0:t.is_entitled)})),function(){n((0,g.pV)())}}),[]),(0,o.useEffect)((function(){var e;!0===ce.shouldRefresh&&(null==W||null===(e=W.current)||void 0===e||e.onRefreshData({timestamp:Date.now()}),n((0,g.Ku)(G)),ue(B(B({},ce),{},{shouldRefresh:!1})))}),[ce.shouldRefresh]),(0,f.KW)((function(){K?(Ee((0,C.PZ)(a.location.search)),n((0,g.Ku)(G)),V(!1)):a.push((0,C.R_)(ye))}),[ye,K]);var we=function(e){ue(B(B({},ce),{},{isUnassignSystemsModalOpen:!0,systemsIDs:[e.id]}))},Se=(0,f.U)(Z.TH,Ee,{id:G},a,(function(e){n((0,g.T5)(e))}),(function(e){n((0,g.vl)(e))})),Ze=[l().createElement(y.h,{key:"edit-patch-set",component:"button",onClick:function(){return Oe()}},t.formatMessage(d.Z.labelsButtonEditTemplate)),l().createElement(y.h,{key:"delete-patch-set",component:"button",onClick:function(){return oe(!0)}},t.formatMessage(d.Z.labelsButtonRemoveTemplate))],Te=(0,C.PZ)(a.location.search),De=ye.systemProfile,Pe=ye.selectedTags,Ce=ye.filter,ke=ye.search,Me=ye.page,je=ye.perPage,xe=ye.sort;return null!=pe&&pe.hasError?l().createElement(P.Z,{code:null==pe?void 0:pe.code}):l().createElement(o.Fragment,null,l().createElement(S.Z,{templateName:ve,isModalOpen:se,setModalOpen:oe,onConfirm:function(){(0,Z.f_)(G).then((function(){n((0,T.wN)((0,D.D$)(ve).success)),a.push("/templates")})).catch((function(){n((0,T.wN)((0,D.D$)(ve).error))}))}}),ce.isPatchSetWizardOpen&&l().createElement(k.Z,{systemsIDs:ce.systemsIDs,setBaselineState:ue,patchSetID:G}),l().createElement(x.Z,{unassignSystemsModalState:ce,setUnassignSystemsModalOpen:ue}),l().createElement(m.Z,{title:me?l().createElement(E.O,{style:{width:300}}):ve,headerOUIA:"template-details",breadcrumbs:[{title:t.formatMessage(d.Z.templateDetailHeaderBreadcrumb),to:"/templates",isActive:!1},{title:me?l().createElement(E.O,{style:{width:150}}):ve,isActive:!0}],actions:l().createElement(h.L,{position:b.ir.right,onSelect:function(){Q(!1),document.getElementById("patch-set-detail-header-kebab").focus()},toggle:l().createElement(v.Z,{id:"patch-set-detail-header-kebab",className:"pf-u-mr-xl",onToggle:function(e){return Q(e)},style:{minWidth:150}},t.formatMessage(d.Z.labelsActions)),isOpen:J,dropdownItems:Ze})},l().createElement("table",{border:"0",style:{marginTop:8}},l().createElement("tbody",null,l().createElement("tr",null,l().createElement("td",{style:{width:300}},t.formatMessage(d.Z.templateDetailTableDescription)),l().createElement("td",null,me?l().createElement(E.O,{style:{width:300}}):de.data.attributes.description||t.formatMessage(d.Z.titlesTemplateNoDescription))),l().createElement("tr",null,l().createElement("td",null,t.formatMessage(d.Z.templateDetailTableUpToDate)),l().createElement("td",null,me?l().createElement(E.O,{style:{width:100}}):(0,z.Un)(de.data.attributes.config.to_time))),l().createElement("tr",null,l().createElement("td",null,t.formatMessage(d.Z.templateDetailTableCreatedBy)),l().createElement("td",null,me?l().createElement(E.O,{style:{width:100}}):de.data.attributes.creator)),l().createElement("tr",null,l().createElement("td",null,t.formatMessage(d.Z.templateDetailTablePublished)),l().createElement("td",null,me?l().createElement(E.O,{style:{width:100}}):(0,z.Un)(de.data.attributes.published))),l().createElement("tr",null,l().createElement("td",null,t.formatMessage(d.Z.templateDetailTableLastEdited)),l().createElement("td",null,me?l().createElement(E.O,{style:{width:100}}):(0,z.Un)(de.data.attributes.last_edited)))))),l().createElement(s.Z,null,l().createElement(w.D,null,l().createElement(O.x,{component:"h2",className:"pf-u-mb-md"},t.formatMessage(d.Z.templateDetailTableTitle))),te?0===ge&&he?l().createElement(p.$6,{onButtonClick:function(){return Oe()}}):fe.hasError?l().createElement(P.Z,{code:fe.code}):l().createElement(I.Z,{ref:W,isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0},columns:function(e){return(0,_.yF)(e)},showTags:!0,onLoad:function(e){var t=e.mergeWithEntities;A.replaceReducer((0,R.UY)(B(B({},U.E),t((0,F.Kq)((0,L.Fs)(!0),F.lu),(0,C.fm)({page:Me,perPage:je,sort:xe,search:ke},Te)))))},customFilters:{patchParams:{filter:Ce,systemProfile:De,selectedTags:Pe}},paginationProps:{isDisabled:0===ge},getEntities:Se,tableProps:{canSelectAll:!0,variant:N.B.compact,className:"patchCompactInventory",isStickyHeader:!0,actionResolver:function(){return be?(0,M.Z8)(we):[]}},hasCheckbox:!1}):l().createElement(p.WV,null)))}},5747:(e,t,n)=>{n.d(t,{G:()=>u,Kq:()=>f,OC:()=>d,PD:()=>p,lu:()=>m});var a=n(4942),r=n(36248),s=n(48881),o=n(22789);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={rows:[],entities:[],selectedRows:{},status:{},page:1,perPage:20,metadata:{limit:20,offset:0,total_items:0}},u=function(e,t){return t.loaded?i(i({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,r.Yk)(t.rows,t.selectedRows)}):t},d=function(e,t){return t.loaded?i(i({},t),{},{columns:e,rows:(0,r.GF)(t.rows,t.selectedRows)}):t},m=function(e,t){return t.loaded?i(i({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,r.dn)(t.rows,t.selectedRows)}):t},p=function(e,t){return t.loaded?i(i({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,r.mf)(t.rows,t.selectedRows)}):t},f=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0,r=i({},n);switch(a.type){case"LOAD_ENTITIES_FULFILLED":return t(e,r);case"LOAD_ENTITIES_PENDING":return r.status={isLoading:!0,hasError:!1},r;case"LOAD_ENTITIES_REJECTED":return(0,s.PW)(r,a);case"SELECT_ENTITY":var l=(0,s.hd)(r,a);return t(e,l);case o.sq:return c;default:return n}}}}}]);
//# sourceMappingURL=../sourcemaps/TemplateDetail.425c79d2efc66c1fd778e245ef205da6.js.map