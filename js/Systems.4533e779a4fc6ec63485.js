(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[743],{9770:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var r=a(96156),l=a(92137),n=a(28481),s=a(87757),o=a.n(s),i=a(72573),c=a(33739),u=a(86350),f=a(77865),p=a.n(f),m=a(61084),d=a(334),v=a(30893),g=a(90747),b=a(44612),y=a(13784),h=a(32132);const S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.stale,r=p().useMemo((function(){return y.fb.map((function(e){var t=e.value;return{label:e.label,value:t.toString()}}))}),[]),l=a&&(Array.isArray(a)&&a.map((function(e){return e.toString()}))||[a.toString()]),n=function(t){e({filter:{stale:t}})};return{label:h.N.formatMessage(v.Z.labelsFiltersStale),type:b.Y.checkbox,filterValues:{onChange:function(e,t){n(t)},items:r,value:l,placeholder:h.N.formatMessage(v.Z.labelsFiltersStalePlaceholder)}}};var E=a(83905);const Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.packages_updatable,r=function(t){e({filter:{packages_updatable:t}})};return{label:h.N.formatMessage(v.Z.labelsFiltersUpdatable),type:b.Y.radio,filterValues:{onChange:function(e,t){r(t)},items:y.Tl,value:a,placeholder:h.N.formatMessage(v.Z.labelsFiltersUpdatablePlaceholder)}}};var P=a(49642),_=a(73888),w=a(4777),N=a(9557),O=a(5747),k=a(11220),F=a(57358),T=a(91607),j=a(94859),M=a(20259),C=a(58684),D=a(35451),x=a(77927),I=a(19694),A=a(45697),R=a.n(A),z=a(36104),q=a(6202),U=a(26577),V=a(2095),B=a(49287),L=a(18038),W=a(85962),Q=a(36001),Y=a(42057),G=function(e){var t=e.title,a=e.color,r=e.Icon,l=e.value,n=e.filter,s=e.apply;return p().createElement(V.Zb,{isCompact:!0,style:{marginRight:"var(--pf-global--spacer--sm)"}},p().createElement(z.l,{style:{marginTop:"0px"}},t),p().createElement(W.e,{className:"fonst-size-sm"},p().createElement(Q.k,{flex:{default:"inlineFlex"},style:{flexWrap:"nowrap"}},p().createElement(Y.B,{spacer:{default:"spacerMd"},alignSelf:{default:"alignSelfCenter"}},p().createElement(r,{color:a,size:"md"})),p().createElement(Y.B,{isFilled:!0,spacer:{default:"spacerNone"}},void 0===l&&p().createElement(U.O,{width:"24px"})||p().createElement(q.Button,{variant:"link",onClick:function(){return s(n)},className:"patch-status-report-text"},l)))))},H=function(e){var t=e.metadata.subtotals,a=e.apply;return p().createElement(u.Z,{style:{paddingBottom:0}},p().createElement(B.r,{hasGutter:!0,span:3},p().createElement(L.P,null,p().createElement(G,{title:h.N.formatMessage(v.Z.labelsStatusSystemsUpToDate),Icon:D.ZP,color:"var(--pf-global--success-color--100)",value:null==t?void 0:t.patched,apply:a,filter:{filter:{packages_updatable:"eq:0"}}})),p().createElement(L.P,null,p().createElement(G,{title:h.N.formatMessage(v.Z.labelsStatusSystemsWithPatchesAvailable),Icon:x.ZP,color:"var(--pf-global--primary-color--100)",value:null==t?void 0:t.unpatched,apply:a,filter:{filter:{packages_updatable:"gt:0"}}})),p().createElement(L.P,null,p().createElement(G,{title:h.N.formatMessage(v.Z.labelsStatusStaleSystems),Icon:I.ZP,color:"var(--pf-global--warning-color--100)",value:null==t?void 0:t.stale,apply:a,filter:{filter:{stale:!0}}}))))};G.propTypes={title:R().string,Icon:R().elementType,value:R().string,color:R().string,apply:R().func,filter:R().object},H.propTypes={metadata:R().object,apply:R().func};const K=H;function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const $=function(){var e=h.N.formatMessage(v.Z.titlesSystems);(0,T.Iw)(e);var t=(0,d.useHistory)(),a=(0,m.useDispatch)(),r=p().useState(!1),s=(0,n.Z)(r,2),f=s[0],b=s[1],D=p().useState((function(){return function(){return null}})),x=(0,n.Z)(D,2),I=x[0],A=x[1],R=(0,F.PZ)(t.location.search),z=(0,m.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.rows)||[]}),m.shallowEqual),q=(0,m.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.total)||0})),U=(0,m.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRows)||[]})),V=(0,m.useSelector)((function(e){var t=e.entities;return(null==t?void 0:t.status)||{}})),B=(0,m.useSelector)((function(e){var t=e.SystemsStore;return(null==t?void 0:t.queryParams)||{}})),L=(0,m.useSelector)((function(e){var t=e.SystemsStore;return(null==t?void 0:t.metadata)||{}})),W=B.systemProfile,Q=B.selectedTags,Y=B.filter,G=B.search,H=B.page,J=B.perPage,$=B.sort;function ee(e){return te.apply(this,arguments)}function te(){return(te=(0,l.Z)(o().mark((function e(t){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,t;case 3:a=e.sent,A((function(){return function(){return p().createElement(M.Z,{data:a})}})),b(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){a((0,N.SF)(e))}p().useEffect((function(){return ae(R),function(){return a((0,N.RV)())}}),[]);var re=(0,T.j5)(X({search:G},Y),ae,y.hb),le=(0,n.Z)(re,1)[0],ne={items:[(0,g.Z)(ae,G,h.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle),h.N.formatMessage(v.Z.labelsFiltersSystemsSearchPlaceholder)),S(ae,Y),Z(ae,Y),(0,E.Z)(Y,ae)]},se={filters:(0,F.mt)(Y,G,h.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle)),onDelete:le,deleteTitle:h.N.formatMessage(v.Z.labelsFiltersReset)},oe=(0,T.ry)(z,U,(function(e){return(0,k.lc)(X(X({},e),{},{limit:-1})).then(F.zw)}),(function(e){a({type:"SELECT_ENTITY",payload:e})})),ie=U&&(0,F.Qy)(U).length,ce=(0,T.AR)("systems",B,{csv:k.wI,json:k.TW},a),ue=function(e){return(0,k.ob)({limit:-1}).then((function(t){var a=t.data;return(0,k.fq)({advisories:a.map((function(e){return e.id})),systems:e})}))},fe=(0,T.U)(k.lc,ae,{},t,(function(e){a((0,N._e)(e))}));return p().createElement(p().Fragment,null,p().createElement(P.Z,{title:h.N.formatMessage(v.Z.titlesPatchSystems),headerOUIA:"systems"}),p().createElement(I,null),p().createElement(K,{metadata:L,apply:ae}),p().createElement(u.Z,null,V.hasError&&p().createElement(_.Z,{code:V.code})||p().createElement(c.Z,{disableDefaultColumns:!0,isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0},customFilters:{patchParams:{search:G,filter:Y,systemProfile:W,selectedTags:Q}},onLoad:function(e){var t=e.mergeWithEntities;(0,w.z)(X({},t((0,O.Kq)(C.Fs,O.G),(0,F.fm)({page:H,perPage:J,sort:$,search:G},R))))},getEntities:fe,actions:(0,C.Sb)(ee),tableProps:{areActionsDisabled:function(e){var t=e.applicable_advisories;return t&&t.every((function(e){return 0===e}))},canSelectAll:!1,variant:i.TableVariant.compact,className:"patchCompactInventory",isStickyHeader:!0},bulkSelect:(0,T.Pz)(ie,oe,{total_items:q},z),exportConfig:{isDisabled:0===q,onSelect:ce},filterConfig:ne,activeFiltersConfig:se,dedicatedAction:p().createElement(j.Z,{onClick:function(){return ee((0,F.Sz)((0,F.Q6)(U),ue,F.R9,y.oN.advisory))},isDisabled:0===(0,F.Qy)(U).length||f,isLoading:f,ouia:"toolbar-remediation-button"})})))}}}]);
//# sourceMappingURL=../sourcemaps/Systems.f928679bdbcc059500dd.js.map