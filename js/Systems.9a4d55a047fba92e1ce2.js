(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[743],{45233:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n(87757),o=n.n(r),c=n(319),s=n.n(c),i=n(59713),a=n.n(i),l=n(48926),u=n.n(l),f=n(63038),m=n.n(f),p=n(32895),S=n(59505),y=n(72573),d=n(86350),g=n(20167),b=n(35240),h=n(33739),v=n(77865),O=n.n(v),_=n(61084),k=n(18623),E=n(75107),w=n(95466),P=n(66490),j=n(50371),Z=n(71724),C=n(58492),L=n(79143),D=n(52798),T=n(92026),F=n(45505),N=n(11550),I=n(21410),M=n(10047),W=n(51439);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const A=function(){var e=N.N.formatMessage(k.Z.titlesSystems);(0,F.Iw)(e);var t=(0,_.useDispatch)(),n=O().useState(!1),r=m()(n,2),c=r[0],i=r[1],a=O().useState((function(){return function(){return null}})),l=m()(a,2),f=l[0],v=l[1],q=(0,_.useSelector)((function(e){return e.SystemsListStore.rows})),A=(0,_.useSelector)((function(e){return e.SystemsListStore.selectedRows})),R=O().useMemo((function(){return(0,D.Yk)(q,A)}),[q]),z=(0,_.useSelector)((function(e){return e.SystemsListStore.status})),K=(0,_.useSelector)((function(e){return e.SystemsListStore.metadata})),Q=(0,_.useSelector)((function(e){return e.SystemsListStore.queryParams})),V=(0,_.useSelector)((function(e){var t=e.entities;return t&&t.columns})),Y=Q.filter,B=Q.search,H=(0,F.W5)(K,te);(0,F.KW)((function(){t((0,j.ZX)(Q))}),[Q]);var J=(0,F.T8)(K.limit,K.offset),U=m()(J,2),X=U[0],G=U[1];function $(e){return ee.apply(this,arguments)}function ee(){return(ee=u()(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,t;case 3:n=e.sent,v((function(){return function(){return O().createElement(M.Z,{data:n})}})),i(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){t((0,j.PH)(e))}var ne=(0,F.j5)(Y,te),re={items:[(0,E.Z)(te,B,N.N.formatMessage(k.Z.labelsFiltersSystemsSearchTitle),N.N.formatMessage(k.Z.labelsFiltersSystemsSearchPlaceholder))]},oe={filters:(0,T.mt)(Y,B),onDelete:ne},ce=function(){var e=V&&V.filter((function(e){return"updated"===e.key}))[0];return e=x(x({},e),{},{key:"last_upload"}),[].concat(s()(W.Fs),[e])},se=(0,F.ry)(R,A,(function(){return(0,C.lc)(x(x({},Q),{},{limit:-1}))}),(function(e){t({type:"SELECT_ENTITY",payload:e})})),ie=(0,F._f)(ce(),te,1),ae=O().useMemo((function(){return(0,T.hO)(ce(),K.sort,1)}),[K.sort]),le=A&&(0,T.Qy)(A).length,ue=function(e){return(0,C.ob)({limit:-1}).then((function(t){var n=t.data;return(0,C.fq)({advisories:n.map((function(e){return e.id})),systems:e})}))};return O().createElement(O().Fragment,null,O().createElement(w.Z,{title:N.N.formatMessage(k.Z.titlesPatchSystems),headerOUIA:"systems"}),O().createElement(f,null),O().createElement(d.Z,null,z===L.g_?O().createElement(g.Z,null):O().createElement(h.Z,{onLoad:function(e){var t=e.mergeWithEntities,n=(0,P.b)();(0,P.z)(x({},t((0,Z.Kq)(W.Fs,n.getState().SystemsListStore))))},isFullView:!0,items:R,page:X,total:K.total_items,perPage:G,isLoaded:z===L.Wd,onRefresh:H,exportConfig:{onSelect:function(e,t){var n=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",r="systems-".concat(n);"csv"===t?(0,C.wI)(Q).then((function(e){return(0,b.Sv)(e,r,"csv")})):(0,C.TW)(Q).then((function(e){return(0,b.Sv)(JSON.stringify(e),r,"json")}))}},bulkSelect:se&&{count:le,items:[{title:"Select none (0)",onClick:function(){se("none")}},{title:"Select page (".concat(R.length,")"),onClick:function(){se("page")}},{title:"Select all (".concat(K.total_items,")"),onClick:function(){se("all")}}],onSelect:function(e){se(e?"all":"none")},toggleProps:{"data-ouia-component-type":"bulk-select-toggle-button"},checked:le===K.total_items||0!==le&&null},actions:(0,W.Sb)($),filterConfig:re,activeFiltersConfig:oe,tableProps:{areActionsDisabled:function(e){return e.applicable_advisories.every((function(e){return 0===e}))},onSort:ie,sortBy:ae,canSelectAll:!1,variant:y.TableVariant.compact,className:"patchCompactInventory"}},O().createElement(p.ki,null,O().createElement(S.Eg,null,O().createElement(I.Z,{onClick:function(){return $((0,T.Sz)(Object.keys(A).filter((function(e){return A[e]})),ue,T.R9))},isDisabled:0===(0,T.Qy)(A).length||c,isLoading:c,ouia:"toolbar-remediation-button"}),O().createElement(f,null))))))}}}]);
//# sourceMappingURL=Systems.9a4d55a047fba92e1ce2.js.map