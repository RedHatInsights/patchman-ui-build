"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[184],{70044:(e,t,n)=>{t.bZ=t.Ux=void 0;const a=n(70655),r=a.__importStar(n(43297)),s=n(43297),o=n(38296),l=a.__importDefault(n(96888)),i=a.__importDefault(n(79818)),c=n(2582),u=n(23053),m=n(18951),f=a.__importDefault(n(43978)),d=n(8045),p=n(18918);var v;!function(e){e.success="success",e.danger="danger",e.warning="warning",e.info="info",e.default="default"}(v=t.Ux||(t.Ux={})),t.bZ=e=>{var{variant:n=v.default,isInline:g=!1,isPlain:y=!1,isLiveRegion:h=!1,variantLabel:b=`${u.capitalize(n)} alert:`,"aria-label":S=`${u.capitalize(n)} Alert`,actionClose:_,actionLinks:E,title:x,titleHeadingLevel:O="h4",children:j="",className:P="",ouiaId:I,ouiaSafe:M=!0,timeout:N=!1,timeoutAnimation:D=3e3,onTimeout:T=(()=>{}),truncateTitle:Z=0,tooltipPosition:k,customIcon:A,isExpandable:w=!1,toggleAriaLabel:C=`${u.capitalize(n)} alert details`,onMouseEnter:L=(()=>{}),onMouseLeave:R=(()=>{}),id:U}=e,B=a.__rest(e,["variant","isInline","isPlain","isLiveRegion","variantLabel","aria-label","actionClose","actionLinks","title","titleHeadingLevel","children","className","ouiaId","ouiaSafe","timeout","timeoutAnimation","onTimeout","truncateTitle","tooltipPosition","customIcon","isExpandable","toggleAriaLabel","onMouseEnter","onMouseLeave","id"]);const z=u.useOUIAProps(t.bZ.displayName,I,M,n),H=r.createElement(r.Fragment,null,r.createElement("span",{className:o.css(i.default.screenReader)},b),x),W=r.useRef(null),$=r.useRef(),[F,V]=s.useState(!1);r.useEffect((()=>{if(!W.current||!Z)return;W.current.style.setProperty(f.default.name,Z.toString());const e=W.current&&W.current.offsetHeight<W.current.scrollHeight;F!==e&&V(e)}),[W,Z,F]);const[G,J]=s.useState(!1),[q,Y]=s.useState(!0),[K,Q]=s.useState(),[X,ee]=s.useState(),te=G&&q&&!K&&!X;r.useEffect((()=>{if((N=!0===N?8e3:Number(N))>0){const e=setTimeout((()=>J(!0)),N);return()=>clearTimeout(e)}}),[]),r.useEffect((()=>{const e=()=>{$.current&&($.current.contains(document.activeElement)?(ee(!0),Y(!1)):X&&ee(!1))};return document.addEventListener("focus",e,!0),()=>document.removeEventListener("focus",e,!0)}),[X]),r.useEffect((()=>{if(!1===X||!1===K){const e=setTimeout((()=>Y(!0)),D);return()=>clearTimeout(e)}}),[X,K]),r.useEffect((()=>{te&&T()}),[te]);const[ne,ae]=s.useState(!1);if(te)return null;const re=r.createElement(O,Object.assign({},F&&{tabIndex:0},{ref:W,className:o.css(l.default.alertTitle,Z&&l.default.modifiers.truncate)}),H);return r.createElement("div",Object.assign({ref:$,className:o.css(l.default.alert,g&&l.default.modifiers.inline,y&&l.default.modifiers.plain,w&&l.default.modifiers.expandable,ne&&l.default.modifiers.expanded,l.default.modifiers[n],P),"aria-label":S},z,h&&{"aria-live":"polite","aria-atomic":"false"},{onMouseEnter:e=>{Q(!0),Y(!1),L(e)},onMouseLeave:e=>{Q(!1),R(e)},id:U},B),w&&r.createElement(m.AlertContext.Provider,{value:{title:x,variantLabel:b}},r.createElement("div",{className:o.css(l.default.alertToggle)},r.createElement(p.AlertToggleExpandButton,{isExpanded:ne,onToggleExpand:()=>{ae(!ne)},"aria-label":C}))),r.createElement(c.AlertIcon,{variant:n,customIcon:A}),F?r.createElement(d.Tooltip,{content:H,position:k},re):re,_&&r.createElement(m.AlertContext.Provider,{value:{title:x,variantLabel:b}},r.createElement("div",{className:o.css(l.default.alertAction)},_)),j&&(!w||w&&ne)&&r.createElement("div",{className:o.css(l.default.alertDescription)},j),E&&r.createElement("div",{className:o.css(l.default.alertActionGroup)},E))},t.bZ.displayName="Alert"},18951:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlertContext=void 0;const a=n(70655).__importStar(n(43297));t.AlertContext=a.createContext(null)},2582:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlertIcon=t.variantIcons=void 0;const a=n(70655),r=a.__importStar(n(43297)),s=n(38296),o=a.__importDefault(n(96888)),l=a.__importDefault(n(35451)),i=a.__importDefault(n(84564)),c=a.__importDefault(n(19694)),u=a.__importDefault(n(31369)),m=a.__importDefault(n(36853));t.variantIcons={success:l.default,danger:i.default,warning:c.default,info:u.default,default:m.default},t.AlertIcon=e=>{var{variant:n,customIcon:l,className:i=""}=e,c=a.__rest(e,["variant","customIcon","className"]);const u=t.variantIcons[n];return u?r.createElement("div",Object.assign({},c,{className:s.css(o.default.alertIcon,i)}),l||r.createElement(u,null)):null}},18918:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlertToggleExpandButton=void 0;const a=n(70655),r=a.__importStar(n(43297)),s=n(16396),o=n(18951),l=a.__importDefault(n(95511)),i=n(38296),c=a.__importDefault(n(96888));t.AlertToggleExpandButton=e=>{var{"aria-label":t="",variantLabel:n,onToggleExpand:u,isExpanded:m=!1}=e,f=a.__rest(e,["aria-label","variantLabel","onToggleExpand","isExpanded"]);const{title:d,variantLabel:p}=r.useContext(o.AlertContext);return r.createElement(s.Button,Object.assign({variant:s.ButtonVariant.plain,onClick:u,"aria-expanded":m,"aria-label":""===t?`Toggle ${n||p} alert: ${d}`:t},f),r.createElement("span",{className:i.css(c.default.alertToggleIcon)},r.createElement(l.default,{"aria-hidden":"true"})))},t.AlertToggleExpandButton.displayName="AlertToggleExpandButton"},43978:(e,t)=>{t.__esModule=!0,t.c_alert__title_max_lines={name:"--pf-c-alert__title--max-lines",value:"1",var:"var(--pf-c-alert__title--max-lines)"},t.default=t.c_alert__title_max_lines},39591:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(85893),r=n(43297);const s=function(e){var t=e.component,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["component"]);return(0,r.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Unable to load inventory component"}),(0,a.jsxs)("h2",{children:["Failed to load ",t]}),(0,a.jsx)("code",{children:"More info can be found in browser console output."})]})}},85861:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(43297),r=n.n(a),s=n(45697),o=n.n(s),l=n(74079),i=n(98333),c=function(e){var t=e.patchSetState,n=e.setPatchSetState;return r().createElement(r().Fragment,null,t.isUnassignSystemsModalOpen&&r().createElement(i.Z,{unassignSystemsModalState:t,setUnassignSystemsModalOpen:n,systemsIDs:t.systemsIDs}),t.isPatchSetWizardOpen&&r().createElement(l.Z,{systemsIDs:t.systemsIDs,setBaselineState:n}))};c.propTypes={patchSetState:o().object,setPatchSetState:o().func};const u=c},98333:(e,t,n)=>{n.d(t,{Z:()=>O});var a=n(29439),r=n(43297),s=n.n(r),o=n(45697),l=n.n(o),i=n(78826),c=n(6202),u=n(49287),m=n(26577),f=n(74806),d=n(30893),p=n(15861),v=n(64687),g=n.n(v),y=n(28216),h=n(83215),b=n(11220),S=n(13784),_=n(18038),E=function(e,t,n){return s().createElement(_.P,null,n.formatMessage(d.Z[e],{systemsCount:t,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().createElement("b",null,t)}}))},x=function(e){var t=e.unassignSystemsModalState,n=void 0===t?{}:t,o=e.setUnassignSystemsModalOpen,l=e.intl,f=n.systemsIDs,v=n.isUnassignSystemsModalOpen,_=(0,r.useState)([]),x=(0,a.Z)(_,2),O=x[0],j=x[1],P=(0,r.useState)(!0),I=(0,a.Z)(P,2),M=I[0],N=I[1],D=function(e){o({isUnassignSystemsModalOpen:!v,systemsIDs:[],shouldRefresh:e})},T=function(){D(!1)},Z=function(e,t){var n=(0,y.I0)(),a=function(){var a=(0,p.Z)(g().mark((function a(){return g().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,b.J_)({inventory_ids:t});case 2:200===a.sent.status&&(e(!0),n((0,h.wN)((0,S.$z)((null==t?void 0:t.length)||0).success)));case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return a}(D,O);(0,r.useEffect)((function(){N(!0),function(e){return(0,b.lc)({limit:-1,"filter[baseline_name]":"neq:",filter:{stale:[!0,!1]}}).then((function(t){return e.filter((function(e){return null==t?void 0:t.data.some((function(t){return t.id===e}))}))}))}(f).then((function(e){j(e),N(!1)}))}),[f]);var k=f.length-O.length;return s().createElement(i.Modal,{variant:"small",isOpen:n.isUnassignSystemsModalOpen,title:l.formatMessage(d.Z.textUnassignSystemsTitle),onClose:T,titleIconVariant:"warning",actions:[s().createElement(c.Button,{key:"confirm",variant:"danger",onClick:Z,isDisabled:M||0===O.length},l.formatMessage(d.Z.labelsRemove)),s().createElement(c.Button,{key:"cancel",variant:"link",onClick:T},l.formatMessage(d.Z.labelsCancel))]},s().createElement(u.r,{hasGutter:!0},M?s().createElement(m.O,null):s().createElement(r.Fragment,null,O.length>0&&E("textUnassignSystemsStatement",O.length,l),k>0&&E("textUnassignSystemsWarning",k,l))))};x.propTypes={intl:l().any,setUnassignSystemsModalOpen:l().func,unassignSystemsModalState:l().object};const O=(0,f.ZP)(x)},13454:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var a=n(4942),r=n(43297),s=n.n(r),o=n(14748),l=n(28216),i=n(97779),c=n(49642),u=n(7322),m=n(92544),f=n(32132),d=n(30893),p=n(91607),v=n(85893),g=n(45697),y=n.n(g),h=n(59823),b=n(334),S=n(48335),_=n(39591),E=n(94184),x=n.n(E),O=function(){return O=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},O.apply(this,arguments)},j=function(e){var t=(0,b.useHistory)(),n=(0,l.oR)(),a=e.component;return(0,v.jsx)(a,O({className:x()(e.className,"inventory")},{children:(0,v.jsx)(r.Suspense,O({fallback:e.fallback},{children:(0,v.jsx)(h.ScalprumComponent,O({history:t,store:n,appName:"inventory",module:"./DetailWrapper",scope:"inventory",ErrorComponent:(0,v.jsx)(_.Z,O({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))}))}))};j.propTypes={fallback:y().node,innerRef:y().object,component:y().string,className:y().string};var P=s().forwardRef((function(e,t){return(0,v.jsx)(j,O({innerRef:t},e))}));P.propTypes={fallback:y().node,component:y().string,className:y().string},P.defaultProps={fallback:(0,v.jsx)(S.Bullseye,O({className:"pf-u-p-lg"},{children:(0,v.jsx)(S.Spinner,{size:"xl"})})),component:"section"};const I=P;var M=function(){return M=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},M.apply(this,arguments)},N=function(e){var t=(0,b.useHistory)(),n=(0,l.oR)(),a=e.component;return(0,v.jsx)(a,M({className:x()(e.className,"inventory")},{children:(0,v.jsx)(r.Suspense,M({fallback:e.fallback},{children:(0,v.jsx)(h.ScalprumComponent,M({history:t,store:n,appName:"inventory",module:"./InventoryDetailHead",scope:"inventory",ErrorComponent:(0,v.jsx)(_.Z,M({component:"InventoryDetailHead",history:t,store:n},e)),ref:e.innerRef},e))}))}))};N.propTypes={fallback:y().node,innerRef:y().object,component:y().string,className:y().string};var D=s().forwardRef((function(e,t){return(0,v.jsx)(N,M({innerProps:t},e))}));D.propTypes={fallback:y().node,component:y().string,className:y().string},D.defaultProps={fallback:(0,v.jsx)(S.Bullseye,M({className:"pf-u-p-lg"},{children:(0,v.jsx)(S.Spinner,{size:"xl"})})),component:"section"};const T=D;var Z=n(70044),k=n(49287),A=n(18038),w=n(20018),C=n(63540),L=n(9557),R=n(83215),U=n(85861),B=n(79875),z=n(13784),H=n(79577);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const F=function(){var e=(0,b.useParams)().inventoryId,t=(0,l.oR)(),n=(0,l.I0)(),a=(0,l.v9)((function(e){var t=e.entityDetails;return t&&t||{}})),v=a.hasThirdPartyRepo,g=a.patchSetName,y=(0,l.v9)((function(e){var t,n=e.entityDetails;return null!==(t=null==n?void 0:n.entity)&&void 0!==t?t:{}})).display_name,h=(0,B.Z)(),S=h.patchSetState,_=h.setPatchSetState,E=h.openPatchSetAssignWizard,x=h.openUnassignSystemsModal;(0,r.useEffect)((function(){return n((0,L.Eh)(e)),function(){n((0,R.L1)())}}),[S.shouldRefresh]);var O=y&&"".concat(y," - ").concat(f.N.formatMessage(d.Z.titlesSystems));(0,p.Iw)(O);var j=(0,p.ye)(z.VH.patch_set);return s().createElement(I,{onLoad:function(e){var n=e.mergeWithDetail;t.replaceReducer((0,i.UY)($($({},u.E),n(m.J))))},inventoryId:e},s().createElement(U.Z,{patchSetState:S,setPatchSetState:_}),s().createElement(c.Z,{title:"",headerOUIA:"inventory-details",breadcrumbs:[{title:f.N.formatMessage(d.Z.titlesPatchSystems),to:"/systems",isActive:!1},y&&{title:y,isActive:!0}]},s().createElement(T,{hideBack:!0,showTags:!0,inventoryId:e,actions:j&&[{title:f.N.formatMessage(d.Z.titlesTemplateAssign),key:"assign-to-template",onClick:function(){E(e)}},{title:f.N.formatMessage(d.Z.titlesTemplateRemoveMultipleButton),key:"remove-from-template",isDisabled:!g,onClick:function(){return x([e])}}],appList:[]},s().createElement(k.r,null,s().createElement(A.P,null,g&&s().createElement(w.D,null,s().createElement(C.xv,null,"".concat(f.N.formatMessage(d.Z.labelsColumnsTemplate),": ").concat(g)))),s().createElement(A.P,null,v&&s().createElement(Z.bZ,{className:"pf-u-mt-md",isInline:!0,variant:"info",title:f.N.formatMessage(d.Z.textThirdPartyInfo)}))))),s().createElement(o.Z,null,s().createElement(H.Z,{inventoryId:e})))}},79875:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(29439),r=n(43297),s=n(5391);const o=function(e){var t=(0,r.useState)({isPatchSetWizardOpen:!1,isUnassignSystemsModalOpen:!1,shouldRefresh:!1,systemsIDs:[]}),n=(0,a.Z)(t,2),o=n[0],l=n[1];return{patchSetState:o,setPatchSetState:l,openPatchSetAssignWizard:function(t){l({isPatchSetWizardOpen:!0,systemsIDs:"string"==typeof t&&""!==t?[t]:(0,s.LI)(e),shouldRefresh:!1})},openUnassignSystemsModal:function(e){l({isUnassignSystemsModalOpen:!0,systemsIDs:e,shouldRefresh:!1})},openPatchSetEditModal:function(e){l({isPatchSetWizardOpen:!0,patchSetID:e})}}}}}]);
//# sourceMappingURL=../sourcemaps/InventoryDetail.704dfd5a6345f76736b12fd29c349b9e.js.map