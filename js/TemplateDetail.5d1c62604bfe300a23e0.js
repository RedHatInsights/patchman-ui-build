"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[9603],{97648:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(29439),l=n(43297),r=n.n(l),s=n(45697),o=n.n(s),i=n(6202),c=n(32752),m=n(78826),u=n(30893),d=n(32132),p=function(e){var t=e.isModalOpen,n=e.setModalOpen,s=e.templateName,o=e.onConfirm,p=(0,l.useState)(!1),f=(0,a.Z)(p,2),h=f[0],b=f[1],E=function(){n(!1),b(!1)};return r().createElement(m.Modal,{title:d.N.formatMessage(u.Z.titlesTemplateDeleteModalTitle),titleIconVariant:"warning",isOpen:t,onClose:E,variant:"small",actions:[r().createElement(i.Button,{key:"confirm",variant:"danger",onClick:function(){E(),o()},isDisabled:!h},d.N.formatMessage(u.Z.labelsDelete)),r().createElement(i.Button,{key:"cancel",variant:"link",onClick:E},d.N.formatMessage(u.Z.labelsCancel))]},d.N.formatMessage(u.Z.titlesTemplateDeleteModalText,{templateName:s,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r().createElement("b",null,t)}}),r().createElement(c.Checkbox,{className:"pf-u-mt-md",isChecked:h,checked:h,onChange:function(e){return b(e)},label:d.N.formatMessage(u.Z.titlesTemplateDeleteModalCheckbox),id:"template-delete-modal-checkbox"}))};p.propTypes={isModalOpen:o().bool,setModalOpen:o().func,templateName:o().string,onConfirm:o().func};const f=p},88929:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(4942),l=n(29439),r=n(14748),s=n(43297),o=n.n(s),i=n(86896),c=n(28216),m=n(334),u=n(30893),d=n(49642),p=n(14240),f=n(38776),h=n(91607),b=n(9557),E=n(22910),y=n(96823),g=n(92512),O=n(80765),v=n(26577),S=n(63540),D=n(20018),w=n(97648),Z=n(11220),P=n(83215),k=n(13784),_=n(52579),M=n(35240),T=n(72573),C=[{key:"name",title:"Name",transforms:[T.sortable]},{key:"operating_system",title:"OS",transforms:[T.sortable]},{key:"tags",title:"Tags",transforms:[T.sortable]},{key:"last_seen",title:"Last seen",transforms:[T.sortable]}],N=n(36248),I=n(5391),j=n(74079);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const L=function(){var e=(0,h.mu)(),t=(0,i.Z)(),n=(0,c.I0)(),a=(0,m.useHistory)(),T=a.location.pathname.split("/")[2],B=o().useState(!0),L=(0,l.Z)(B,2),x=L[0],R=L[1],U=(0,s.useState)(!1),W=(0,l.Z)(U,2),z=W[0],H=W[1],K=o().useState(!0),$=(0,l.Z)(K,2),q=$[0],F=$[1],G=(0,s.useState)(!1),J=(0,l.Z)(G,2),V=J[0],Y=J[1],Q=(0,s.useState)({isPatchSetWizardOpen:!1,systemsIDs:[],shouldRefresh:!1}),X=(0,l.Z)(Q,2),ee=X[0],te=X[1],ne=(0,c.v9)((function(e){return e.PatchSetDetailStore})),ae=(0,c.v9)((function(e){var t,n,a=e.PatchSetDetailStore;return null===(t=null==a||null===(n=a.status)||void 0===n?void 0:n.isLoading)||void 0===t||t})),le=(0,c.v9)((function(e){return e.PatchSetDetailSystemsStore.status})),re=(0,c.v9)((function(e){return e.PatchSetDetailSystemsStore.rows})),se=(0,c.v9)((function(e){return e.PatchSetDetailSystemsStore.metadata})),oe=(0,c.v9)((function(e){return e.PatchSetDetailSystemsStore.queryParams})),ie=(0,s.useMemo)((function(){return(0,N.dn)(re)}),[re]),ce=le.hasError,me=le.code,ue=ne.data.attributes.name,de=function(e){n((0,b.JP)(e))},pe=(0,h.SL)(null==se?void 0:se.limit,de),fe=(0,h._T)(de),he=(0,h._f)(C,de,0),be=(0,s.useMemo)((function(){return(0,I.hO)(C,null==se?void 0:se.sort,0)}),[null==se?void 0:se.sort]);(0,s.useEffect)((function(){return e().then((function(e){var t;F(null==e||null===(t=e.smart_management)||void 0===t?void 0:t.is_entitled)})),function(){n((0,b.JP)()),n((0,b.pV)())}}),[]),(0,s.useEffect)((function(){!0===ee.shouldRefresh&&(n((0,b.YG)(T,A(A({},oe),{},{page:1,offset:0}))),n((0,b.Ku)(T)))}),[ee.shouldRefresh]),(0,h.KW)((function(){x?(de((0,I.PZ)(a.location.search)),n((0,b.Ku)(T)),R(!1)):(a.push((0,I.R_)(oe)),n((0,b.YG)(T,oe)))}),[oe,x]);var Ee=[o().createElement(y.DropdownItem,{key:"edit-patch-set",component:"button",onClick:function(){te({isPatchSetWizardOpen:!0})}},t.formatMessage(u.Z.labelsButtonEditTemplate)),o().createElement(y.DropdownItem,{key:"delete-patch-set",component:"button",onClick:function(){return Y(!0)}},t.formatMessage(u.Z.labelsButtonRemoveTemplate))];return ce||!1===(null==se?void 0:se.has_systems)?o().createElement(_.Z,{code:me,metadata:le.metadata}):o().createElement(s.Fragment,null,o().createElement(w.Z,{templateName:ue,isModalOpen:V,setModalOpen:Y,onConfirm:function(){(0,Z.f_)(T).then((function(){n((0,P.wN)((0,k.D$)(ue).success)),a.push("/templates")})).catch((function(){n((0,P.wN)((0,k.D$)(ue).error))}))}}),ee.isPatchSetWizardOpen&&o().createElement(j.Z,{systemsIDs:ee.systemsIDs,setBaselineState:te,patchSetID:T}),o().createElement(d.Z,{title:ae?o().createElement(v.O,{style:{width:300}}):ue,headerOUIA:"template-details",breadcrumbs:[{title:t.formatMessage(u.Z.templateDetailHeaderBreadcrumb),to:"/templates",isActive:!1},{title:ae?o().createElement(v.O,{style:{width:150}}):ue,isActive:!0}],actions:o().createElement(E.Dropdown,{position:g.DropdownPosition.right,onSelect:function(){H(!1),document.getElementById("patch-set-detail-header-kebab").focus()},toggle:o().createElement(O.DropdownToggle,{id:"patch-set-detail-header-kebab",className:"pf-u-mr-xl",onToggle:function(e){return H(e)},style:{minWidth:150}},t.formatMessage(u.Z.labelsActions)),isOpen:z,dropdownItems:Ee})},o().createElement("table",{border:"0",style:{marginTop:8}},o().createElement("tbody",null,o().createElement("tr",null,o().createElement("td",{style:{width:250}},"Template description:"),o().createElement("td",null,ae?o().createElement(v.O,{style:{width:300}}):ne.data.attributes.description||t.formatMessage(u.Z.titlesTemplateNoDescription))),o().createElement("tr",null,o().createElement("td",null,"Red Hat repositories up to:"),o().createElement("td",null,ae?o().createElement(v.O,{style:{width:100}}):(0,M.Un)(ne.data.attributes.config.to_time))),o().createElement("tr",null,o().createElement("td",null,"Created by:"),o().createElement("td",null,ae?o().createElement(v.O,{style:{width:100}}):ne.data.attributes.creator)),o().createElement("tr",null,o().createElement("td",null,"Published:"),o().createElement("td",null,ae?o().createElement(v.O,{style:{width:100}}):(0,M.Un)(ne.data.attributes.published))),o().createElement("tr",null,o().createElement("td",null,"Last edited:"),o().createElement("td",null,ae?o().createElement(v.O,{style:{width:100}}):(0,M.Un)(ne.data.attributes.last_edited)))))),o().createElement(r.Z,null,o().createElement(D.D,null,o().createElement(S.xv,{component:"h2",className:"pf-u-mb-md"},t.formatMessage(u.Z.templateDetailTableTitle))),q?0!==ie.length||le.isLoading?o().createElement(f.Z,{columns:C,compact:!0,onSetPage:pe,onPerPageSelect:fe,onSort:he,sortBy:be,apply:de,tableOUIA:"patch-set-detail-table",paginationOUIA:"patch-set-detail-pagination",store:{rows:ie,metadata:se,status:le,queryParams:oe},searchChipLabel:t.formatMessage(u.Z.labelsFiltersSearchTemplateTitle)}):o().createElement(p.$6,null):o().createElement(p.DL,null)))}}}]);
//# sourceMappingURL=../sourcemaps/TemplateDetail.321125bf027d75e285ba197203275020.js.map