(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[743],{78970:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>N});var r=n(85061),o=n(96156),s=n(92137),i=n(28481),c=n(87757),a=n.n(c),l=n(72573),u=n(86350),f=n(35240),m=n(33739),p=n(77865),S=n.n(p),y=n(61084),d=n(60578),b=n(28725),g=n(87145),h=n(26143),v=n(55949),_=n(75835),O=n(76923),Z=n(48527),k=n(2558),w=n(49736),P=n(22347),j=n(96928),E=n(45168),C=n(28961),D=n(14030),L=n(42186);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){(0,o.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const N=function(){var t=j.N.formatMessage(d.Z.titlesSystems);(0,P.Iw)(t);var e=(0,y.useDispatch)(),n=S().useState(!1),o=(0,i.Z)(n,2),c=o[0],p=o[1],T=S().useState((function(){return function(){return null}})),N=(0,i.Z)(T,2),I=N[0],M=N[1],W=(0,y.useSelector)((function(t){return t.SystemsListStore.rows})),A=(0,y.useSelector)((function(t){return t.SystemsListStore.selectedRows})),q=S().useMemo((function(){return(0,k.Yk)(W,A)}),[W]),x=(0,y.useSelector)((function(t){return t.SystemsListStore.status})),R=(0,y.useSelector)((function(t){return t.SystemsListStore.metadata})),z=(0,y.useSelector)((function(t){return t.SystemsListStore.queryParams})),H=(0,y.useSelector)((function(t){var e=t.entities;return e&&e.columns})),K=z.filter,Q=z.search,V=(0,P.W5)(R,$);(0,P.KW)((function(){e((0,v.ZX)(z))}),[z]);var Y=(0,P.T8)(R.limit,R.offset),B=(0,i.Z)(Y,2),J=B[0],U=B[1];function X(t){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)(a().mark((function t(e){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,e;case 3:n=t.sent,M((function(){return function(){return S().createElement(C.Z,{data:n})}})),p(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(t){e((0,v.PH)(t))}var tt=(0,P.j5)(K,$),et=(0,i.Z)(tt,1)[0],nt={items:[(0,b.Z)($,Q,j.N.formatMessage(d.Z.labelsFiltersSystemsSearchTitle),j.N.formatMessage(d.Z.labelsFiltersSystemsSearchPlaceholder))]},rt={filters:(0,w.mt)(K,Q),onDelete:et},ot=function(){var t=H&&H.filter((function(t){return"updated"===t.key}))[0];return t=F(F({},t),{},{key:"last_upload"}),[].concat((0,r.Z)(D.Fs),[t])},st=(0,P.ry)(q,A,(function(){return(0,O.lc)(F(F({},z),{},{limit:-1}))}),(function(t){e({type:"SELECT_ENTITY",payload:t})})),it=(0,P._f)(ot(),$,1),ct=S().useMemo((function(){return(0,w.hO)(ot(),R.sort,1)}),[R.sort]),at=A&&(0,w.Qy)(A).length,lt=function(t){return(0,O.ob)({limit:-1}).then((function(e){var n=e.data;return(0,O.fq)({advisories:n.map((function(t){return t.id})),systems:t})}))};return S().createElement(S().Fragment,null,S().createElement(g.Z,{title:j.N.formatMessage(d.Z.titlesPatchSystems),headerOUIA:"systems"}),S().createElement(I,null),S().createElement(u.Z,null,S().createElement(L.Z,{status:x},S().createElement(m.Z,{onLoad:function(t){var e=t.mergeWithEntities,n=(0,h.b)();(0,h.z)(F({},e((0,_.Kq)(D.Fs,n.getState().SystemsListStore))))},isFullView:!0,items:q,page:J,total:R.total_items,perPage:U,isLoaded:x===Z.Wd,onRefresh:V,exportConfig:{isDisabled:0===R.total_items,onSelect:function(t,e){var n=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",r="systems-".concat(n);"csv"===e?(0,O.wI)(z).then((function(t){return(0,f.Sv)(t,r,"csv")})):(0,O.TW)(z).then((function(t){return(0,f.Sv)(JSON.stringify(t),r,"json")}))}},bulkSelect:st&&{count:at,items:[{title:"Select none (0)",onClick:function(){st("none")}},{title:"Select page (".concat(q.length,")"),onClick:function(){st("page")}},{title:"Select all (".concat(R.total_items,")"),onClick:function(){st("all")}}],onSelect:function(){st(0===at?"all":"none")},toggleProps:{"data-ouia-component-type":"bulk-select-toggle-button"},checked:0!==at&&(at===R.total_items||null),isDisabled:0===R.total_items&&0===at},actions:(0,D.Sb)(X),filterConfig:nt,activeFiltersConfig:rt,tableProps:{areActionsDisabled:function(t){return t.applicable_advisories.every((function(t){return 0===t}))},onSort:R.total_items&&it,sortBy:R.total_items&&ct,canSelectAll:!1,variant:l.TableVariant.compact,className:"patchCompactInventory",isStickyHeader:!0},dedicatedAction:S().createElement(E.Z,{onClick:function(){return X((0,w.Sz)(Object.keys(A).filter((function(t){return A[t]})),lt,w.R9))},isDisabled:0===(0,w.Qy)(A).length||c,isLoading:c,ouia:"toolbar-remediation-button"})}))))}}}]);