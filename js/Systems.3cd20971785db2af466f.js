(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[743],{78970:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var r=n(85061),s=n(96156),o=n(92137),i=n(28481),a=n(87757),c=n.n(a),u=n(72573),l=n(86350),f=n(35240),m=n(33739),p=n(77865),y=n.n(p),S=n(61084),d=n(60578),b=n(28725),h=n(87145),v=n(26143),g=n(55949),O=n(75835),_=n(76923),Z=n(48527),w=n(2558),P=n(49736),j=n(22347),E=n(96928),k=n(45168),D=n(28961),L=n(14030),C=n(42186);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const N=function(){var e=E.N.formatMessage(d.Z.titlesSystems);(0,j.Iw)(e);var t=(0,S.useDispatch)(),n=y().useState(!1),s=(0,i.Z)(n,2),a=s[0],p=s[1],T=y().useState((function(){return function(){return null}})),N=(0,i.Z)(T,2),I=N[0],M=N[1],W=(0,S.useSelector)((function(e){return e.SystemsListStore.rows})),A=(0,S.useSelector)((function(e){return e.SystemsListStore.selectedRows})),q=y().useMemo((function(){return(0,w.Yk)(W,A)}),[W]),x=(0,S.useSelector)((function(e){return e.SystemsListStore.status})),z=(0,S.useSelector)((function(e){return e.SystemsListStore.metadata})),R=(0,S.useSelector)((function(e){return e.SystemsListStore.queryParams})),H=(0,S.useSelector)((function(e){var t=e.entities;return t&&t.columns})),K=R.filter,Q=R.search,V=(0,j.W5)(z,$);(0,j.KW)((function(){t((0,g.ZX)(R))}),[R]);var Y=(0,j.T8)(z.limit,z.offset),B=(0,i.Z)(Y,2),J=B[0],U=B[1];function X(e){return G.apply(this,arguments)}function G(){return(G=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,t;case 3:n=e.sent,M((function(){return function(){return y().createElement(D.Z,{data:n})}})),p(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){t((0,g.PH)(e))}var ee=(0,j.j5)(K,$),te=(0,i.Z)(ee,1)[0],ne={items:[(0,b.Z)($,Q,E.N.formatMessage(d.Z.labelsFiltersSystemsSearchTitle),E.N.formatMessage(d.Z.labelsFiltersSystemsSearchPlaceholder))]},re={filters:(0,P.mt)(K,Q),onDelete:te},se=function(){var e=H&&H.filter((function(e){return"updated"===e.key}))[0];return e=F(F({},e),{},{key:"last_upload"}),[].concat((0,r.Z)(L.Fs),[e])},oe=(0,j.ry)(q,A,(function(){return(0,_.lc)(F(F({},R),{},{limit:-1}))}),(function(e){t({type:"SELECT_ENTITY",payload:e})})),ie=(0,j._f)(se(),$,1),ae=y().useMemo((function(){return(0,P.hO)(se(),z.sort,1)}),[z.sort]),ce=A&&(0,P.Qy)(A).length,ue=function(e){return(0,_.ob)({limit:-1}).then((function(t){var n=t.data;return(0,_.fq)({advisories:n.map((function(e){return e.id})),systems:e})}))};return y().createElement(y().Fragment,null,y().createElement(h.Z,{title:E.N.formatMessage(d.Z.titlesPatchSystems),headerOUIA:"systems"}),y().createElement(I,null),y().createElement(l.Z,null,y().createElement(C.Z,{status:x},y().createElement(m.Z,{disableDefaultColumns:!0,onLoad:function(e){var t=e.mergeWithEntities,n=(0,v.b)();(0,v.z)(F({},t((0,O.Kq)(L.Fs,n.getState().SystemsListStore))))},isFullView:!0,items:q,page:J,total:z.total_items,perPage:U,isLoaded:x===Z.Wd,onRefresh:V,exportConfig:{isDisabled:0===z.total_items,onSelect:function(e,t){var n=(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc",r="systems-".concat(n);"csv"===t?(0,_.wI)(R).then((function(e){return(0,f.Sv)(e,r,"csv")})):(0,_.TW)(R).then((function(e){return(0,f.Sv)(JSON.stringify(e),r,"json")}))}},bulkSelect:oe&&(0,j.Pz)(ce,oe,z,q),actions:(0,L.Sb)(X),filterConfig:ne,activeFiltersConfig:re,tableProps:{areActionsDisabled:function(e){return e.applicable_advisories.every((function(e){return 0===e}))},onSort:z.total_items&&ie,sortBy:z.total_items&&ae,canSelectAll:!1,variant:u.TableVariant.compact,className:"patchCompactInventory",isStickyHeader:!0},dedicatedAction:y().createElement(k.Z,{onClick:function(){return X((0,P.Sz)(Object.keys(A).filter((function(e){return A[e]})),ue,P.R9))},isDisabled:0===(0,P.Qy)(A).length||a,isLoading:a,ouia:"toolbar-remediation-button"})}))))}}}]);