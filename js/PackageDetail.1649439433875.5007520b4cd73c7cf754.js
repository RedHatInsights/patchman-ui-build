"use strict";(self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman=self.webpackChunk_redhat_cloud_services_frontend_components_inventory_patchman||[]).push([[155],{52709:(e,t,r)=>{r.d(t,{x:()=>g,ZP:()=>P});var n=r(45987),a=r(4942),s=r(56455),c=r(87462),i=r(43297),o=r.n(i),l=r(45697),u=r.n(l),f=r(94184),p=r.n(f),m=function(e){var t=e.centered,r=e.className,s=(0,n.Z)(e,["centered","className"]),i=p()("ins-c-spinner",(0,a.Z)({},"ins-m-center",t),r);return o().createElement("div",(0,c.Z)({role:"status",className:i},s),o().createElement("span",{className:"pf-u-screen-reader"},"Loading..."))};m.propTypes={centered:u().bool,className:u().string};const d=m;var h,v=["loading","variant","children"],g={spinner:"spinner",skeleton:"skeleton"},b=(h={},(0,a.Z)(h,g.skeleton,(function(e){var t=e.size,r=e.isDark;return o().createElement(s.Z,{size:t,isDark:r})})),(0,a.Z)(h,g.spinner,(function(e){var t=e.centered;return o().createElement(d,{centered:t})})),h),y=function(e){var t=e.loading,r=e.variant,a=e.children,s=(0,n.Z)(e,v);return!1!==t?b[r](s):a};y.propTypes={loading:u().bool,variant:u().string,children:u().any};const P=y},8453:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ne});var n=r(4942),a=r(29439),s=r(81159),c=r(34023),i=r(63540),o=r(20018),l=r(86350),u=r(45697),f=r.n(u),p=r(43297),m=r.n(p),d=r(28216),h=r(334),v=r(30893),g=r(49642),b=r(49287),y=r(18038),P=r(57358),S=r(52709),O=function(e){var t=e.attributes.description,r=e.isLoading,n=m().useState(1e3),i=(0,a.Z)(n,2),o=i[0],l=i[1];return t&&m().createElement(b.r,{hasGutter:!0,style:{minHeight:50}},m().createElement(y.P,{md:8,sm:12},m().createElement(S.ZP,{loading:r,variant:S.x.spinner,centered:!0},m().createElement(s.K,{hasGutter:!0},m().createElement(c.v,null),m().createElement(c.v,{style:{whiteSpace:"pre-line"}},t&&(0,P.Nt)(t,o,l))))))||m().createElement(p.Fragment,null)};O.propTypes={attributes:f().object,isLoading:f().bool};const E=O;var Z=r(20167),k=r(60076),w=r(15861),j=r(87757),N=r.n(j),D=r(72573),_=r(33739),T=r(90747),C=r(16590),M=r(87462),I=r(80887),F=r(77221),L=r(82553),x=r(44612),A=r(32132);const R=function(e,t,r){var n=m().useState(!1),s=(0,a.Z)(n,2),c=s[0],i=s[1],o=m().useState(10),l=(0,a.Z)(o,2),u=l[0],f=l[1],p=t&&t.installed_evra,d=p&&("string"==typeof t.installed_evra&&t.installed_evra.split(",")||t.installed_evra),h=r.data&&r.data.sort().map((function(e){return{value:e.evra}}))||[{value:A.N.formatMessage(v.Z.textNoVersionAvailable),disabled:!0}];return{type:x.Y.custom,label:A.N.formatMessage(v.Z.labelsFiltersPackageVersionTitle),value:"custom",filterValues:{children:m().createElement(I.Select,(0,M.Z)({variant:h.length>0&&L.SelectVariant.checkbox||L.SelectVariant.typeaheadMulti,typeAheadAriaLabel:A.N.formatMessage(v.Z.labelsFiltersPackageVersionPlaceholder),onToggle:function(e){i(e)},onSelect:function(r,n){var a={filter:{}};if(!d||d&&!d.includes(n)){var s=p&&""!==t.installed_evra&&t.installed_evra.concat(",")||"";a.filter={installed_evra:"".concat(s).concat(n)}}else{var c=1!==d.length&&d.filter((function(e){return!e.includes(n)})).join(",")||void 0;a.filter={installed_evra:c}}e(a)},selections:d,isOpen:c,"aria-labelledby":"patch-version-filter",placeholderText:A.N.formatMessage(v.Z.labelsFiltersPackageVersionPlaceholder)},u<h.lengt&&{loadingVariant:{text:"View more",onClick:function(){f(h.length)}}},{style:{maxHeight:"400px",overflow:"auto"}}),h.slice(0,u).map((function(e,t){return m().createElement(F.SelectOption,(0,M.Z)({isDisabled:e.disabled,key:t,value:e.value},e.description&&{description:e.description}))})))}}};var V=r(73888),B=r(2807),H=r(9557),q=r(5747),U=r(11220),z=r(13784),G=r(91607),K=r(53074),Q=r(58684);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e){var t=e.packageName,r=(0,d.I0)(),n=(0,h.useHistory)(),s=m().useState([]),c=(0,a.Z)(s,2),i=c[0],o=c[1],l=(0,P.PZ)(n.location.search),u=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.rows)||[]}),d.wU),f=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.status)||{}})),p=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.total)||0})),g=(0,d.v9)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRows)||[]})),b=(0,d.v9)((function(e){var t=e.PackageSystemsStore;return(null==t?void 0:t.queryParams)||{}})),y=b.systemProfile,S=b.selectedTags,O=b.filter,E=b.search,Z=b.sort,k=b.page,j=b.perPage;function M(e){r((0,H.g5)(e))}m().useEffect((0,w.Z)(N().mark((function e(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(l),e.t0=o,e.next=4,(0,U.dh)({package_name:t});case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)}))),[]),m().useEffect((function(){return function(){r((0,H.RV)()),r((0,H.d)())}}),[]);var I=(0,G.j5)(W(W({},O),{},{search:E}),M),F=(0,a.Z)(I,1)[0],L={items:[(0,T.Z)(M,E,A.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle),A.N.formatMessage(v.Z.labelsFiltersSystemsSearchPlaceholder)),(0,C.Z)(M,O),R(M,O,i)]},x={filters:(0,P.mt)(O,E,A.N.formatMessage(v.Z.labelsFiltersSystemsSearchTitle)),onDelete:F},Y=(0,G.ry)(u,g,(function(){return(0,U.vo)(W(W({},b),{},{package_name:t,limit:-1})).then(P.lq)}),(function(e){r({type:"SELECT_ENTITY",payload:e})}),(function(e){return"".concat(t,"-").concat(e.available_evra)})),$=g&&(0,P.Qy)(g).length,J=(0,G.AR)(t,b,{csv:U.nx,json:U.bb},r),X=function(){var e={};return(0,P.Q6)(g).forEach((function(t){e[g[t]]?e[g[t]].push(t):e[g[t]]=[t]})),{data:e}},ee=(0,G.U)(U.vo,M,{packageName:t},n);return m().createElement(m().Fragment,null,f.hasError&&m().createElement(V.Z,{code:f.code})||m().createElement(_.Z,{disableDefaultColumns:["system_profile","updated"],isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0,tags:!1},columns:Q.Hd,showTags:!0,getEntities:ee,customFilters:{patchParams:{search:E,filter:O,systemProfile:y,selectedTags:S}},paginationProps:{isDisabled:0===p},onLoad:function(e){var t=e.mergeWithEntities;(0,B.z)(W({},t((0,q.Kq)(Q.Hd,q.OC),(0,P.fm)({page:k,perPage:j,sort:Z,search:E},l))))},tableProps:{canSelectAll:!1,variant:D.TableVariant.compact,className:"patchCompactInventory",isStickyHeader:!0},filterConfig:L,activeFiltersConfig:x,bulkSelect:(0,G.Pz)($,Y,{total_items:p},u),exportConfig:{isDisabled:0===p,onSelect:J},dedicatedAction:m().createElement(K.Z,{remediationProvider:function(){return(0,P.Sz)((0,P.Q6)(g),X,P.R9,z.oN.package)},isDisabled:0===(0,P.Qy)(g).length})}))};$.propTypes={packageName:f().string};const J=$;var X=r(83215);function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=function(e){var t=e.match,r=(0,d.I0)(),n=m().useState(t.params.packageName),u=(0,a.Z)(n,1)[0],f="".concat(u," - ").concat(A.N.formatMessage(v.Z.titlesPackages));(0,G.Iw)(f);var p=(0,d.v9)((function(e){return e.PackageDetailStore})),h=(0,d.v9)((function(e){return e.PackageDetailStore.status}));m().useEffect((function(){r((0,H.Sb)({packageName:u}))}),[]),m().useEffect((function(){return function(){r((0,X.L1)()),r((0,H.vh)())}}),[]);var b=p.data.attributes;return m().createElement(m().Fragment,null,m().createElement(g.Z,{title:u,headerOUIA:"package-details",breadcrumbs:[{title:A.N.formatMessage(v.Z.titlesPatchPackages),to:k.H.packages.to,isActive:!1},{title:u,isActive:!0}]},h.hasError?m().createElement(Z.Z,null):m().createElement(E,{attributes:te(te({},b),{},{id:u}),isLoading:h.isLoading})),m().createElement(l.Z,null,m().createElement(s.K,{hasGutter:!0},m().createElement(c.v,null,m().createElement(o.D,null,m().createElement(i.xv,{component:i.qO.h2},A.N.formatMessage(v.Z.titlesAffectedSystems)))),m().createElement(c.v,null,h.hasError&&m().createElement(V.Z,null)||!h.isLoading&&m().createElement(J,{packageName:u})))))};re.propTypes={match:f().any};const ne=(0,h.withRouter)(re)},535:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var n=r(15861),a=r(4942),s=r(29439),c=r(87757),i=r.n(c),o=r(86350),l=r(45697),u=r.n(l),f=r(43297),p=r.n(f),m=r(28216),d=r(334),h=r(30893),v=r(49642),g=r(90747),b=r(38776),y=r(9557),P=r(11220),S=r(57668),O=r(57358),E=r(91607),Z=r(32132),k=r(83215),w=r(6202),j=[{key:"name",title:"Name",props:{width:50}},{key:"systems",title:"Systems",props:{width:50}}],N=r(32166),D=r(13784);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(e){var t=e.history,r=Z.N.formatMessage(h.Z.titlesAdvisories);(0,E.Iw)(r);var a=(0,m.I0)(),c=p().useState(!0),l=(0,s.Z)(c,2),u=l[0],f=l[1],d=p().useState({isOpen:!1,shouldRefresh:!1,patchSetID:void 0,systemsIDs:[]}),_=(0,s.Z)(d,2),C=_[0],M=_[1],I=(0,m.v9)((function(e){return e.PatchSetsStore.rows})),F=(0,m.v9)((function(e){return e.PatchSetsStore.queryParams})),L=(0,m.v9)((function(e){return e.PatchSetsStore.selectedRows})),x=(0,m.v9)((function(e){return e.PatchSetsStore.metadata})),A=(0,m.v9)((function(e){return e.PatchSetsStore.status})),R=p().useMemo((function(){return(0,S.CN)(I,L,F)}),[I,L]);function V(e){a((0,y.br)(e))}var B=function(){a((0,y.BY)(T(T({},F),{},{page:1,offset:0})))};p().useEffect((function(){return!0===C.shouldRefresh&&B(),function(){a((0,k.L1)())}}),[C.shouldRefresh]),(0,E.KW)((function(){u?(V((0,O.PZ)(t.location.search)),f(!1)):(t.push((0,O.R_)(F)),a((0,y.BY)(F)))}),[F,u]),(0,E.ry)(R,L,(function(){return(0,P.ai)(T(T({},F),{},{limit:-1}))}),(function(e){a((0,y.GL)(e))}),(function(e){return e.id}));var H=(0,E._f)(j,V,2),q=p().useMemo((function(){return(0,O.hO)(j,x.sort,2)}),[x.sort]),U=(0,E.SL)(x.limit,V),z=(0,E._T)(V);function G(){return(G=(0,n.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M({isOpen:!0,patchSetID:t.id});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e){return function(){return p().createElement(w.Button,{key:"createButton",onClick:function(){return e({isOpen:!0})}},Z.N.formatMessage(h.Z.labelsButtonCreatePatchSet))}}(M),Q=[{title:"Edit patch set",onClick:function(e,t,r){!function(e){G.apply(this,arguments)}(r)}},{title:"Remove patch set",onClick:function(e,t,r){!function(e){(0,P.f_)(e.id).then((function(){a((0,k.wN)(D.D$.success)),B()})).catch((function(){a((0,k.wN)(D.D$.error))}))}(r)}}];return p().createElement(p().Fragment,null,p().createElement(v.Z,{title:Z.N.formatMessage(h.Z.titlesPatchSet),headerOUIA:"advisories"}),C.isOpen&&p().createElement(N.Z,{systemsIDs:C.systemsIDs,setBaselineState:M,patchSetID:C.patchSetID}),p().createElement(o.Z,null,p().createElement(b.Z,{columns:j,compact:!0,onSetPage:U,onPerPageSelect:z,onSort:H,selectedRows:!1,onSelect:!1,sortBy:q,apply:V,tableOUIA:"patch-set-table",paginationOUIA:"patch-set-pagination",store:{rows:R,metadata:x,status:A,queryParams:F},actionsConfig:Q,filterConfig:{items:[(0,g.Z)(V,F.search,Z.N.formatMessage(h.Z.labelsFiltersSearchPatchSetTitle),Z.N.formatMessage(h.Z.labelsFiltersSearchPatchSetPlaceholder))]},searchChipLabel:Z.N.formatMessage(h.Z.labelsFiltersSearchPatchSetTitle),CreatePatchSet:K})))};C.propTypes={history:u().object};const M=(0,d.withRouter)(C)}}]);
//# sourceMappingURL=../sourcemaps/PackageDetail.bfdcf906791d95d0bb7f8395ee1558a7.js.map