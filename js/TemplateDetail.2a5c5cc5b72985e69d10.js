"use strict";(self.webpackChunkpatch=self.webpackChunkpatch||[]).push([[9603],{39591:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(85893),a=n(43297);const s=function(e){var t=e.component,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["component"]);return(0,a.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Unable to load inventory component"}),(0,r.jsxs)("h2",{children:["Failed to load ",t]}),(0,r.jsx)("code",{children:"More info can be found in browser console output."})]})}},33739:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(85893),a=n(43297),s=n.n(a),o=n(45697),l=n.n(o),i=n(59823),c=n(93942),u=n(8213),m=n(39591),f=n(94184),p=n.n(f),d=n(72126),y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)},h=function(e){var t=(0,c.oR)(),n=e.component;return(0,r.jsx)(n,y({className:p()(e.className,"inventory")},{children:(0,r.jsx)(a.Suspense,y({fallback:e.fallback},{children:(0,r.jsx)(i.ScalprumComponent,y({history:e.history,store:t,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:(0,r.jsx)(m.Z,y({component:"InventoryDetailHead"},e)),ref:e.innerRef},e))}))}))};h.propTypes={fallback:l().node,innerRef:l().object,component:l().string,className:l().string,history:l().object};var g=s().forwardRef((function(e,t){return(0,r.jsx)(h,y({innerRef:t},e))}));g.propTypes={fallback:l().node,component:l().string,className:l().string},g.defaultProps={fallback:(0,r.jsx)(u.Bullseye,y({className:"pf-u-p-lg"},{children:(0,r.jsx)(u.Spinner,{size:"xl"})})),component:"section"};const b=s().forwardRef((function(e,t){return(0,r.jsx)(d.Z,y({innerRef:t,Component:g},e))}))},72126:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(85893),a=n(43297),s=n.n(a),o=n(62012),l=n(55140),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},u=function(e){var t=e.Component,n=c(e,["Component"]),a=o.useHistory();return(0,r.jsx)(t,i({history:a},n))},m=function(e){var t=e.Component,n=c(e,["Component"]),a=(0,l.Z)().chromeHistory;return(0,r.jsx)(t,i({history:a},n))};const f=s().forwardRef((function(e,t){var n=e.Component,s=c(e,["Component"]),l=(0,a.useMemo)((function(){return"function"==typeof o.useHistory?u:m}),[n,s]);return(0,r.jsx)(l,i({innerRef:t,Component:n},s))}))},97648:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(29439),a=n(43297),s=n.n(a),o=n(45697),l=n.n(o),i=n(47173),c=n(93149),u=n(80236),m=n(30893),f=n(32132),p=function(e){var t=e.isModalOpen,n=e.setModalOpen,o=e.templateName,l=e.onConfirm,p=(0,a.useState)(!1),d=(0,r.Z)(p,2),y=d[0],h=d[1],g=function(){n(!1),h(!1)};return s().createElement(u.u,{title:f.N.formatMessage(m.Z.titlesTemplateDeleteModalTitle),titleIconVariant:"warning",isOpen:t,onClose:g,variant:"small",actions:[s().createElement(i.zx,{key:"confirm",variant:"danger",onClick:function(){g(),l()},isDisabled:!y},f.N.formatMessage(m.Z.labelsDelete)),s().createElement(i.zx,{key:"cancel",variant:"link",onClick:g},f.N.formatMessage(m.Z.labelsCancel))]},f.N.formatMessage(m.Z.titlesTemplateDeleteModalText,{templateName:o,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().createElement("b",null,t)}}),s().createElement(c.X,{className:"pf-u-mt-md",isChecked:y,checked:y,onChange:function(e){return h(e)},label:f.N.formatMessage(m.Z.titlesTemplateDeleteModalCheckbox),id:"template-delete-modal-checkbox"}))};p.propTypes={isModalOpen:l().bool,setModalOpen:l().func,templateName:l().string,onConfirm:l().func};const d=p},28481:(e,t,n)=>{n.d(t,{Hd:()=>d,P4:()=>f,ol:()=>p});var r=n(4942),a=n(43297),s=n.n(a),o=n(16475),l=n(30893),i=n(11220);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e,t,n,r){return n((function(e){return(0,i.dk)("/ids/systems",e)}),u(u({},e),{},{filter:{stale:[!0,!1]}}),r,100).then((function(e){var n=e.flatMap((function(e){return e.data}));return t.filter((function(e){return null==n?void 0:n.some((function(t){return t.id===e}))}))}))},f=function(e,t,n){return m({"filter[baseline_name]":"neq:"},e,t,n)},p=function(e,t,n){return m({"filter[satellite_managed]":"false"},e,t,n)},d=function(e,t,n){return s().createElement(o.P,null,n.formatMessage(l.Z[e],{systemsCount:t,b:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().createElement("b",null,t)}}))}},44118:(e,t,n)=>{n.d(t,{Z:()=>P});var r=n(29439),a=n(43297),s=n.n(a),o=n(45697),l=n.n(o),i=n(80236),c=n(47173),u=n(50693),m=n(50383),f=n(74806),p=n(30893),d=n(15861),y=n(64687),h=n.n(y),g=n(93942),b=n(83215),v=n(11220),O=n(20677),E=n(28481),S=n(59751),w=function(e){var t=e.unassignSystemsModalState,n=void 0===t?{}:t,o=e.setUnassignSystemsModalOpen,l=e.intl,f=e.totalItems,y=n.systemsIDs,w=n.isUnassignSystemsModalOpen,P=(0,a.useState)([]),j=(0,r.Z)(P,2),D=j[0],Z=j[1],T=(0,a.useState)(!0),C=(0,r.Z)(T,2),M=C[0],k=C[1],x=(0,S.qS)().fetchBatched,I=function(e){o({isUnassignSystemsModalOpen:!w,systemsIDs:[],shouldRefresh:e})},R=function(){I(!1)},N=function(e,t){var n=(0,g.I0)(),r=function(){var r=(0,d.Z)(h().mark((function r(){var a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,v.C9)({inventory_ids:t});case 2:a=r.sent,e(!0),200===a.status?n((0,b.wN)((0,O.$z)((null==t?void 0:t.length)||0).success)):n((0,b.wN)((0,O.$z)().failure));case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return r}(I,D);(0,a.useEffect)((function(){k(!0),(0,E.P4)(y,x,f).then((function(e){Z(e),k(!1)}))}),[y]);var U=y.length-D.length;return s().createElement(i.u,{variant:"small",isOpen:n.isUnassignSystemsModalOpen,title:l.formatMessage(p.Z.textUnassignSystemsTitle),onClose:R,titleIconVariant:"warning",actions:[s().createElement(c.zx,{key:"confirm",variant:"danger",onClick:N,isDisabled:M||0===D.length},l.formatMessage(p.Z.labelsRemove)),s().createElement(c.zx,{key:"cancel",variant:"link",onClick:R},l.formatMessage(p.Z.labelsCancel))],"data-testid":"unassign-systems-modal"},s().createElement(u.r,{hasGutter:!0},M?s().createElement(m.O,null):s().createElement(a.Fragment,null,0===D.length&&(0,E.Hd)("textUnassignSystemsNoAssignedSystems",D.length,l),D.length>0&&(0,E.Hd)("textUnassignSystemsStatement",D.length,l),D.length>0&&U>0&&(0,E.Hd)("textUnassignSystemsWarning",U,l))))};w.propTypes={intl:l().any,setUnassignSystemsModalOpen:l().func,unassignSystemsModalState:l().object,totalItems:l().number};const P=(0,f.ZP)(w)},99910:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var r=n(4942),a=n(29439),s=n(14748),o=n(43297),l=n.n(o),i=n(86896),c=n(93942),u=n(62012),m=n(30893),f=n(49642),p=n(14240),d=n(59751),y=n(9557),h=n(52643),g=n(56787),b=n(84457),v=n(99355),O=n(75728),E=n(50383),S=n(2372),w=n(68340),P=n(68774),j=n(35224),D=n(97648),Z=n(11220),T=n(83215),C=n(13784),M=n(52579),k=n(5391),x=n(63135),I=n(20677),R=n(95249),N=n(44118),U=n(75863),L=n(33739),_=n(42154),F=n(97779),A=n(7322),H=n(5747),z=n(58684),B=n(35240),W=n(55140);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const K=function(){var e=(0,i.Z)(),t=(0,c.I0)(),n=(0,W.Z)(),r=(0,u.useSearchParams)(),q=(0,a.Z)(r,2),K=q[0],V=q[1],G=(0,u.useNavigate)(),Y=(0,c.oR)(),J=(0,o.useRef)(null),Q=(0,u.useParams)().templateName,X=l().useState(!0),ee=(0,a.Z)(X,2),te=ee[0],ne=ee[1],re=(0,o.useState)(!1),ae=(0,a.Z)(re,2),se=ae[0],oe=ae[1],le=(0,o.useState)(!1),ie=(0,a.Z)(le,2),ce=ie[0],ue=ie[1],me=(0,o.useState)({isPatchSetWizardOpen:!1,isUnassignSystemsModalOpen:!1,systemsIDs:[],shouldRefresh:!1}),fe=(0,a.Z)(me,2),pe=fe[0],de=fe[1],ye=(0,c.v9)((function(e){return e.PatchSetDetailStore})),he=(0,c.v9)((function(e){var t,n,r=e.PatchSetDetailStore;return null===(t=null==r||null===(n=r.status)||void 0===n?void 0:n.isLoading)||void 0===t||t})),ge=(0,c.v9)((function(e){return e.PatchSetDetailStore.status})),be=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.rows)||[]}),c.wU),ve=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.selectedRows)||[]})),Oe=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.status)||{}})),Ee=(0,c.v9)((function(e){var t=e.entities;return(null==t?void 0:t.total)||0})),Se=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return(null==t?void 0:t.queryParams)||{}})),we=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return null==t?void 0:t.templateHasSystemsLoading})),Pe=(0,c.v9)((function(e){var t=e.PatchSetDetailSystemsStore;return null==t?void 0:t.templateHasSystems})),je=(0,R.c$)(["patch:*:*","patch:template:write"]).hasAccess,De=ye.data.attributes.name;(0,o.useEffect)((function(){De&&n.updateDocumentTitle("".concat(De," - ").concat(e.formatMessage(m.Z.titlesTemplate),"\n        ").concat(C.JD))}),[n,De]);var Ze=(0,d.ry)(be,ve,{endpoint:d.cB.templateSystems(Q),queryParams:Se,selectionDispatcher:y.i2,totalItems:Ee}),Te=function(e){t((0,y.JP)(e))},Ce=function(){de($($({},pe),{},{isPatchSetWizardOpen:!0}))};(0,o.useEffect)((function(){return t((0,y.ve)({id:Q,limit:1})),function(){t((0,y.pV)()),t((0,y.RV)())}}),[]),(0,o.useEffect)((function(){var e;!0===pe.shouldRefresh&&(null==J||null===(e=J.current)||void 0===e||e.onRefreshData({timestamp:Date.now()}),Ze("none"),t((0,y.Ku)(Q)),de($($({},pe),{},{shouldRefresh:!1})),t((0,y.ve)({id:Q,limit:1})))}),[pe.shouldRefresh]),(0,d.KW)((function(){te?(Te((0,k.PZ)("?"+K.toString())),t((0,y.Ku)(Q)),ne(!1)):V((0,k.R_)(Se))}),[Se,te]);var Me=function(e){de($($({},pe),{},{isUnassignSystemsModalOpen:!0,systemsIDs:e}))},ke=(0,d.U)(Z.TH,Te,{id:Q},V,(function(e){t((0,y.T5)(e))}),(function(e){t((0,y.vl)(e))})),xe=function(e,t){return l().createElement(j.u,{key:t,content:je||"For editing access, contact your administrator."},e)},Ie=l().createElement(b.h,{component:"button",onClick:function(){return Ce()},isDisabled:!je},e.formatMessage(m.Z.labelsButtonEditTemplate)),Re=l().createElement(b.h,{component:"button",onClick:function(){return ue(!0)},isDisabled:!je},e.formatMessage(m.Z.labelsButtonRemoveTemplate)),Ne=[je?Ie:xe(Ie,"edit-template"),je?Re:xe(Re,"delete-template")],Ue=(0,k.PZ)("?"+K.toString()),Le=Se.systemProfile,_e=Se.selectedTags,Fe=Se.filter,Ae=Se.search,He=Se.page,ze=Se.perPage,Be=Se.sort,We=ve&&(0,k.Qy)(ve).length,qe=(0,d.Pz)(We,Ze,{total_items:Ee},be),$e=(0,d.j5)($({search:Ae},Fe),Te),Ke=(0,a.Z)($e,1)[0],Ve=(0,_.C5)(Ae,Te),Ge=(0,_.Fy)(Fe,Ae,Ke);return null!=ge&&ge.hasError?l().createElement(M.Z,{code:null==ge?void 0:ge.code}):l().createElement(o.Fragment,null,l().createElement(D.Z,{templateName:De,isModalOpen:ce,setModalOpen:ue,onConfirm:function(){(0,Z.f_)(Q).then((function(){t((0,T.wN)((0,C.D$)(De).success)),G("../templates")})).catch((function(){t((0,T.wN)((0,C.D$)(De).error))}))}}),pe.isPatchSetWizardOpen&&l().createElement(x.Z,{systemsIDs:pe.systemsIDs,setBaselineState:de,patchSetID:Q}),l().createElement(N.Z,{unassignSystemsModalState:pe,setUnassignSystemsModalOpen:de}),l().createElement(f.Z,{title:he?l().createElement(E.O,{style:{width:300}}):De,headerOUIA:"template-details",breadcrumbs:[{title:e.formatMessage(m.Z.templateDetailHeaderBreadcrumb),to:"/templates",isActive:!1},{title:he?l().createElement(E.O,{style:{width:150}}):De,isActive:!0}],actions:l().createElement(g.L,{position:v.ir.right,onSelect:function(){oe(!1),document.getElementById("patch-set-detail-header-kebab").focus()},toggle:l().createElement(O.Z,{id:"patch-set-detail-header-kebab",className:"pf-u-mr-xl",onToggle:function(e){return oe(e)},style:{minWidth:150}},e.formatMessage(m.Z.labelsActions)),isOpen:se,dropdownItems:Ne})},l().createElement("table",{border:"0",style:{marginTop:8}},l().createElement("tbody",null,l().createElement("tr",null,l().createElement("td",{style:{width:300}},e.formatMessage(m.Z.templateDetailTableDescription)),l().createElement("td",null,he?l().createElement(E.O,{style:{width:300}}):ye.data.attributes.description||e.formatMessage(m.Z.titlesTemplateNoDescription))),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTableUpToDate)),l().createElement("td",null,he?l().createElement(E.O,{style:{width:100}}):(0,B.Un)(ye.data.attributes.config.to_time))),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTableCreatedBy)),l().createElement("td",null,he?l().createElement(E.O,{style:{width:100}}):ye.data.attributes.creator)),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTablePublished)),l().createElement("td",null,he?l().createElement(E.O,{style:{width:100}}):(0,B.Un)(ye.data.attributes.published))),l().createElement("tr",null,l().createElement("td",null,e.formatMessage(m.Z.templateDetailTableLastEdited)),l().createElement("td",null,he?l().createElement(E.O,{style:{width:100}}):(0,B.Un)(ye.data.attributes.last_edited)))))),l().createElement(s.ZP,null,l().createElement(P.D,null,l().createElement(w.x,{component:"h2",className:"pf-u-mb-md"},e.formatMessage(m.Z.templateDetailTableTitle))),we?l().createElement(h.b,null,l().createElement(S.$,{size:"xl"})):Pe?Oe.hasError?l().createElement(M.Z,{code:Oe.code}):l().createElement(L.Z,{ref:J,isFullView:!0,autoRefresh:!0,initialLoading:!0,hideFilters:{all:!0,tags:!1,operatingSystem:!1},columns:function(e){return(0,_.yF)(e)},showTags:!0,onLoad:function(e){var t=e.mergeWithEntities;Y.replaceReducer((0,F.UY)($($({},A.E),t((0,H.Kq)((0,z.Fs)(!0),H.lu),(0,k.fm)({page:He,perPage:ze,sort:Be,search:Ae},Ue)))))},customFilters:{patchParams:{search:Ae,filter:Fe,systemProfile:Le,selectedTags:_e}},paginationProps:{isDisabled:0===Ee},getEntities:ke,bulkSelect:qe,tableProps:{canSelectAll:!1,variant:U.B.compact,className:"patchCompactInventory",isStickyHeader:!0,actionResolver:function(){return je?(0,I.Z8)(Me):[]}},actionsConfig:{actions:["",{key:"remove-multiple-systems",label:e.formatMessage(m.Z.titlesTemplateRemoveFromSystems,{systemsCount:We}),onClick:function(){return Me((0,k.LI)(ve))},props:{isDisabled:0===We}}]},filterConfig:Ve,activeFiltersConfig:Ge}):l().createElement(p.$6,{hasAccess:je,onButtonClick:function(){return Ce()}})))}},5747:(e,t,n)=>{n.d(t,{G:()=>m,Kq:()=>y,OC:()=>f,PD:()=>d,lu:()=>p});var r=n(29439),a=n(4942),s=n(36248),o=n(48881),l=n(22789);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={rows:[],entities:[],selectedRows:{},status:{},page:1,perPage:20,metadata:{limit:20,offset:0,total_items:0}},m=function(e,t){return t.loaded?c(c({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,s.Yk)(t.rows,t.selectedRows)}):t},f=function(e,t,n){if("SELECT_ENTITY"===n){var a=t.packageEvraCache;void 0===a&&(a={},t.rows.forEach((function(e){return a[e.id]=e.available_evra})),t.packageEvraCache=a),t.selectedRows=t.selectedRows?Object.fromEntries(Object.entries(t.selectedRows).map((function(e){var t=(0,r.Z)(e,2),n=t[0],s=t[1];return!0===s?[n,a[n]]:[n,s]}))):t.selectedRows}return"LOAD_ENTITIES_FULFILLED"===n&&(t.packageEvraCache=void 0),t.loaded?c(c({},t),{},{columns:e,rows:(0,s.GF)(t.rows,t.selectedRows)}):t},p=function(e,t){return t.loaded?c(c({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,s.dn)(t.rows,t.selectedRows)}):t},d=function(e,t){return t.loaded?c(c({},t),{},{status:{isLoading:!1,hasError:!1},rows:(0,s.mf)(t.rows,t.selectedRows)}):t},y=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,r=arguments.length>1?arguments[1]:void 0,a=c({},n);switch(r.type){case"LOAD_ENTITIES_FULFILLED":return t(e,a,r.type);case"LOAD_ENTITIES_PENDING":return a.status={isLoading:!0,hasError:!1},a;case"LOAD_ENTITIES_REJECTED":return(0,o.PW)(a,r);case"SELECT_ENTITY":var s=(0,o.hd)(a,r);return t(e,s,r.type);case l.sq:return u;default:return n}}}}}]);
//# sourceMappingURL=../sourcemaps/TemplateDetail.fd60e7ff134fae2c41e34ced8d28e1e6.js.map