{"version":3,"sources":["webpack://@redhat-cloud-services/frontend-components-inventory-patchman/./src/SmartComponents/Systems/SystemsListAssets.scss","webpack://@redhat-cloud-services/frontend-components-inventory-patchman/./src/SmartComponents/Systems/SystemsListAssets.js","webpack://@redhat-cloud-services/frontend-components-inventory-patchman/./src/store/Reducers/InventoryEntitiesReducer.js","webpack://@redhat-cloud-services/frontend-components-inventory-patchman/./src/SmartComponents/Systems/SystemsListAssets.scss?e4e3"],"names":["___CSS_LOADER_EXPORT___","push","module","id","systemsListColumns","key","title","composed","transforms","sortable","props","width","renderFunc","value","createAdvisoriesIcons","createOSColumn","packageSystemsColumns","createUpgradableColumn","systemsRowActions","showRemediationModal","onClick","event","rowId","rowData","fetchApplicableSystemAdvisoriesApi","limit","then","res","remediationProvider","data","map","item","remediationIdentifiers","init","columns","rows","entities","modifyInventory","hosts","state","loaded","lastSeenColumn","filter","InventoryHosts","PatchHosts","InventoryRow","patchLastSeen","find","patchRow","updated","attributes","last_upload","modifyPackageSystems","inventoryEntitiesReducer","store","action","type","packagesSystemsInventoryReducer","update","hot","invalidate","oldLocals","accept","a","b","isNamedExport","p","isEqualLocals","dispose"],"mappings":"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","file":"js/234.c881bb39280444df555a.js","sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".patch .col-width-30{width:30%}.patch .col-width-40{width:40%}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/SmartComponents/Systems/SystemsListAssets.scss\"],\"names\":[],\"mappings\":\"AAAA,qBACc,SAAS,CADvB,qBACsC,SAAS\",\"sourcesContent\":[\".patch{\\n.col-width-30{width:30%}.col-width-40{width:40%}\\n\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { sortable } from '@patternfly/react-table/dist/js';\nimport { fetchApplicableSystemAdvisoriesApi } from '../../Utilities/api';\nimport { remediationIdentifiers } from '../../Utilities/constants';\nimport { createAdvisoriesIcons, createUpgradableColumn,\n    remediationProvider, createOSColumn } from '../../Utilities/Helpers';\nimport './SystemsListAssets.scss';\n\nexport const systemsListColumns = [\n    {\n        key: 'display_name',\n        title: 'Name',\n        composed: ['facts.os_release', 'display_name'],\n        transforms: [sortable],\n        props: {\n            width: 50\n        }\n    },\n    {\n        key: 'packages_installed',\n        title: 'Packages',\n        transforms: [sortable],\n        props: {\n            width: 10\n        }\n    },\n    {\n        key: 'applicable_advisories',\n        title: 'Applicable advisories',\n        transforms: [sortable],\n        props: {\n            width: 15\n        },\n        renderFunc: value => createAdvisoriesIcons(value)\n    },\n    {\n        key: 'operating_system',\n        title: 'OS',\n        transforms: [sortable],\n        renderFunc: value => createOSColumn(value),\n        props: {\n            width: 10\n        }\n    }\n];\n\nexport const packageSystemsColumns = [\n    {\n        key: 'display_name',\n        title: 'Name',\n        composed: ['facts.os_release', 'display_name'],\n        props: {\n            width: 50\n        }\n    },\n    {\n        key: 'installed_evra',\n        title: 'Installed version',\n        transforms: [sortable],\n        props: {\n            width: 10\n        }\n    },\n    {\n        key: 'available_evra',\n        title: 'Latest version',\n        transforms: [sortable],\n        props: {\n            width: 10\n        }\n    },\n    {\n        key: 'upgradable',\n        title: 'Status',\n        props: {\n            width: 20\n        },\n        renderFunc: value => createUpgradableColumn(value)\n    }\n];\n\nexport const systemsRowActions = showRemediationModal => {\n    return [\n        {\n            title: 'Apply all applicable advisories',\n            onClick: (event, rowId, rowData) => {\n                fetchApplicableSystemAdvisoriesApi({\n                    id: rowData.id,\n                    limit: 10000\n                }).then(res =>\n                    showRemediationModal(\n                        remediationProvider(\n                            res.data.map(item => item.id),\n                            rowData.id,\n                            remediationIdentifiers.advisory\n                        )\n                    )\n                );\n            }\n        }\n    ];\n};\n","import { sortable } from '@patternfly/react-table/dist/js';\n\n// Initial State\nexport const init = {\n    columns: [],\n    rows: [],\n    entities: []\n};\n// Reducer\n\nfunction replaceLastUpdated (InventoryHosts, PatchHosts) {\n    return InventoryHosts.map((InventoryRow) => {\n        const patchLastSeen = PatchHosts && PatchHosts.find(patchRow=> patchRow.id === InventoryRow.id);\n        return {\n            ...InventoryRow,\n            updated: patchLastSeen && patchLastSeen.attributes.last_upload || InventoryRow.updated\n        };\n    });\n}\n\nfunction modifyInventory(columns, hosts, state) {\n    if (state.loaded) {\n        let lastSeenColumn = state.columns.filter(({ key }) => key === 'updated');\n        lastSeenColumn = [{ ...lastSeenColumn[0], transforms: [sortable] }];\n        return {\n            ...state,\n            columns: [\n                ...columns || [],\n                ...lastSeenColumn || []\n            ],\n            rows: replaceLastUpdated(state.rows, hosts)\n        };\n    }\n\n    return state;\n}\n\nfunction modifyPackageSystems(columns, hosts, state) {\n    if (state.loaded) {\n        return {\n            ...state,\n            columns\n        };\n    }\n\n    return state;\n}\n\nexport const inventoryEntitiesReducer = (columns, store) => (state = init, action) => {\n    switch (action.type) {\n        case 'LOAD_ENTITIES_FULFILLED':\n            return modifyInventory(columns, store?.rows, state);\n\n        default:\n            return state;\n    }\n};\n\nexport const packagesSystemsInventoryReducer = (columns, store) => (state = init, action) => {\n    switch (action.type) {\n        case 'LOAD_ENTITIES_FULFILLED':\n            return modifyPackageSystems(columns, store?.rows, state);\n\n        default:\n            return state;\n    }\n};\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./SystemsListAssets.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./SystemsListAssets.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, content.locals, undefined)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nexport default content.locals || {};"],"sourceRoot":""}