{"version":3,"sources":["webpack:///./src/PresentationalComponents/PackageHeader/PackageHeader.js","webpack:///./src/SmartComponents/PackageSystems/PackageSystems.js","webpack:///./src/SmartComponents/PackageDetail/PackageDetail.js"],"names":["PackageHeader","attributes","isLoading","Grid","hasGutter","style","minHeight","GridItem","md","sm","WithLoader","loading","variant","WithLoaderVariants","centered","Stack","StackItem","whiteSpace","preserveNewlines","description","propTypes","PackageSystems","packageName","dispatch","useDispatch","React","systems","useSelector","entities","rows","shallowEqual","status","selectedRows","queryParams","packageSystemsParams","totalItems","total","systemProfile","selectedTags","filter","search","sort","page","perPage","apply","params","changePackageSystemsParams","clearPackageSystemsStore","useRemoveFilter","deleteFilters","filterConfig","items","searchFilter","intl","messages","statusFilter","activeFiltersConfig","filters","buildFilterChips","onDelete","onSelect","useOnSelect","fetchPackageSystems","package_name","limit","toSelect","type","payload","system","available_evra","selectedCount","arrayFromObj","length","onExport","useOnExport","csv","exportPackageSystemsCSV","json","exportPackageSystemsJSON","getEntites","useGetEntities","hasError","ErrorHandler","code","InventoryTable","disableDefaultColumns","isFullView","autoRefresh","initialLoading","hideFilters","all","getEntities","customFilters","patchParams","onLoad","mergeWithEntities","register","inventoryEntitiesReducer","packageSystemsColumns","modifyPackageSystems","persistantParams","exportConfig","isDisabled","tableProps","canSelectAll","TableVariant","className","isStickyHeader","bulkSelect","useBulkSelectConfig","total_items","PackageDetail","match","pageTitle","setPageTitle","packageDetails","PackageDetailStore","fetchPackageDetails","clearPackageDetailStore","data","Header","title","headerOUIA","breadcrumbs","to","paths","isActive","Unavailable","id","Main","TextContent","Text","component","TextVariants","withRouter"],"mappings":"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","file":"js/PackageDetail.1c2605f5ab89becf0378.js","sourcesContent":["import { Grid, GridItem, Stack, StackItem } from '@patternfly/react-core';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport { preserveNewlines } from '../../Utilities/Helpers';\nimport WithLoader, { WithLoaderVariants } from '../WithLoader/WithLoader';\n\nconst PackageHeader = ({ attributes, isLoading }) => {\n    return (\n        <Grid hasGutter style={{ minHeight: 50 }}>\n            <GridItem md={8} sm={12}>\n                <WithLoader\n                    loading={isLoading}\n                    variant={WithLoaderVariants.spinner}\n                    centered\n                >\n                    <Stack hasGutter>\n                        <StackItem />\n                        <StackItem style={{ whiteSpace: 'pre-line' }}>\n                            {\n                                preserveNewlines(attributes.description)\n                            }\n                        </StackItem>\n                    </Stack>\n                </WithLoader>\n            </GridItem>\n\n        </Grid>\n    );\n};\n\nPackageHeader.propTypes = {\n    attributes: propTypes.object,\n    isLoading: propTypes.bool\n};\n\nexport default PackageHeader;\n","import { Button, ToolbarGroup, ToolbarItem } from '@patternfly/react-core';\nimport { AnsibeTowerIcon } from '@patternfly/react-icons';\nimport { TableVariant } from '@patternfly/react-table';\nimport { InventoryTable } from '@redhat-cloud-services/frontend-components/Inventory';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport messages from '../../Messages';\nimport searchFilter from '../../PresentationalComponents/Filters/SearchFilter';\nimport statusFilter from '../../PresentationalComponents/Filters/StatusFilter';\nimport { register } from '../../store';\nimport { changePackageSystemsParams, clearPackageSystemsStore } from '../../store/Actions/Actions';\nimport { inventoryEntitiesReducer, modifyPackageSystems } from '../../store/Reducers/InventoryEntitiesReducer';\nimport { fetchPackageSystems, exportPackageSystemsCSV, exportPackageSystemsJSON } from '../../Utilities/api';\nimport { remediationIdentifiers } from '../../Utilities/constants';\nimport { arrayFromObj, buildFilterChips, remediationProvider,\n    filterSelectedRowIDs, persistantParams\n} from '../../Utilities/Helpers';\nimport {\n    useOnSelect, useRemoveFilter, useBulkSelectConfig, useOnExport, useGetEntities\n} from '../../Utilities/Hooks';\nimport { intl } from '../../Utilities/IntlProvider';\nimport RemediationModal from '../Remediation/RemediationModal';\nimport { packageSystemsColumns } from '../Systems/SystemsListAssets';\nimport ErrorHandler from '../../PresentationalComponents/Snippets/ErrorHandler';\n\nconst PackageSystems = ({ packageName }) => {\n    const dispatch = useDispatch();\n    const enableRemediation = false;\n    const [\n        RemediationModalCmp,\n        setRemediationModalCmp\n    ] = React.useState(() => () => null);\n    const systems = useSelector(({ entities }) => entities?.rows || [], shallowEqual);\n    const status = useSelector(\n        ({ entities }) => entities?.status || {}\n    );\n    const selectedRows = useSelector(\n        ({ entities }) => entities?.selectedRows || []\n    );\n    const queryParams = useSelector(\n        ({ entities }) => entities?.queryParams || {}\n    );\n    const packageSystemsParams = useSelector(\n        ({ entities }) => entities?.packageSystemsParams || {}\n    );\n    const totalItems = useSelector(\n        ({ entities }) => entities?.total || 0\n    );\n\n    const { systemProfile, selectedTags } = queryParams;\n    const { filter, search, sort, page, perPage } = packageSystemsParams;\n    React.useEffect(() => {\n        return () => dispatch(clearPackageSystemsStore());\n    }, []);\n\n    function apply(params) {\n        dispatch(changePackageSystemsParams(params));\n    }\n\n    const [deleteFilters] = useRemoveFilter(filter, apply);\n\n    const filterConfig = {\n        items: [\n            searchFilter(apply, search,\n                intl.formatMessage(messages.labelsFiltersSystemsSearchTitle),\n                intl.formatMessage(messages.labelsFiltersSystemsSearchPlaceholder)\n            ),\n            statusFilter(apply, filter)\n        ]\n    };\n\n    const activeFiltersConfig = {\n        filters: buildFilterChips(filter, search),\n        onDelete: deleteFilters\n    };\n\n    const showRemediationModal = data => {\n        setRemediationModalCmp(() => () => <RemediationModal data={data} />);\n    };\n\n    const constructFilename = (system) => {\n        return `${packageName}-${system.available_evra}`;\n    };\n\n    const fetchAllData = () => {\n        return fetchPackageSystems({ package_name: packageName, limit: -1 });\n    };\n\n    const selectRows = (toSelect) => {\n        dispatch({ type: 'SELECT_ENTITY', payload: toSelect });\n    };\n\n    const onSelect = useOnSelect(systems, selectedRows,\n        fetchAllData, selectRows, constructFilename);\n\n    const selectedCount = selectedRows && arrayFromObj(selectedRows).length;\n\n    const onExport = useOnExport(packageName, queryParams, {\n        csv: exportPackageSystemsCSV,\n        json: exportPackageSystemsJSON\n    }, dispatch);\n\n    const getEntites = useGetEntities(fetchPackageSystems, apply, { packageName });\n    return (\n        <React.Fragment>\n            {status.hasError && <ErrorHandler code={status.code} /> || (\n                <InventoryTable\n                    disableDefaultColumns\n                    isFullView\n                    autoRefresh\n                    initialLoading\n                    hideFilters={{ all: true }}\n                    getEntities={getEntites}\n                    customFilters={{\n                        patchParams: {\n                            search,\n                            filter,\n                            systemProfile,\n                            selectedTags\n                        }\n                    }}\n                    onLoad={({ mergeWithEntities }) => {\n                        register({\n                            ...mergeWithEntities(\n                                inventoryEntitiesReducer(packageSystemsColumns, modifyPackageSystems),\n                                persistantParams(page, perPage, sort)\n                            )\n                        });\n\n                    }}\n                    exportConfig={{\n                        isDisabled: totalItems === 0,\n                        onSelect: onExport\n                    }}\n                    tableProps={{\n                        canSelectAll: false,\n                        onSelect, variant: TableVariant.compact, className: 'patchCompactInventory', isStickyHeader: true\n                    }}\n                    filterConfig={filterConfig}\n                    activeFiltersConfig={activeFiltersConfig}\n                    bulkSelect={useBulkSelectConfig(selectedCount, onSelect, { total_items: totalItems }, systems)}\n                >\n                    {enableRemediation &&\n                        <ToolbarGroup>\n                            <ToolbarItem>\n                                <Button\n                                    className={'remediationButtonPatch'}\n                                    isDisabled={\n                                        arrayFromObj(selectedRows).length === 0\n                                    }\n                                    onClick={() =>\n                                        showRemediationModal(\n                                            remediationProvider(\n                                                packageName,\n                                                filterSelectedRowIDs(selectedRows),\n                                                remediationIdentifiers.package\n                                            )\n                                        )\n                                    }\n                                    ouiaId={'toolbar-remediation-button'}\n                                >\n                                    <AnsibeTowerIcon />&nbsp;{intl.formatMessage(messages.labelsRemediate)}\n                                </Button>\n                                <RemediationModalCmp />\n                            </ToolbarItem>\n                        </ToolbarGroup>\n                    }\n                </InventoryTable>\n            )}\n        </React.Fragment>\n    );\n};\n\nPackageSystems.propTypes = {\n    packageName: propTypes.string\n};\n\nexport default PackageSystems;\n","import { Stack, StackItem, Text, TextContent, TextVariants } from '@patternfly/react-core';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport propTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport messages from '../../Messages';\nimport Header from '../../PresentationalComponents/Header/Header';\nimport PackageHeader from '../../PresentationalComponents/PackageHeader/PackageHeader';\nimport { Unavailable } from '@redhat-cloud-services/frontend-components/Unavailable';\nimport { paths } from '../../Routes';\nimport PackageSystems from '../../SmartComponents/PackageSystems/PackageSystems';\nimport { clearPackageDetailStore, fetchPackageDetails } from '../../store/Actions/Actions';\nimport { setPageTitle } from '../../Utilities/Hooks';\nimport { intl } from '../../Utilities/IntlProvider';\n\nconst PackageDetail = ({ match }) => {\n    const dispatch = useDispatch();\n    const [packageName] = React.useState(match.params.packageName);\n    const pageTitle = `${packageName} - ${intl.formatMessage(messages.titlesPackages)}`;\n    setPageTitle(pageTitle);\n    const packageDetails = useSelector(\n        ({ PackageDetailStore }) => PackageDetailStore\n    );\n    const status = useSelector(\n        ({ PackageDetailStore }) => PackageDetailStore.status\n    );\n\n    React.useEffect(() => {\n        dispatch(fetchPackageDetails({ packageName }));\n    }, []);\n\n    React.useEffect(() => {\n        return () => {\n            dispatch(clearPackageDetailStore());\n        };\n    }, []);\n\n    const { attributes } = packageDetails.data;\n\n    return (\n        <React.Fragment>\n            <Header\n                title={packageName}\n                headerOUIA={'package-details'}\n                breadcrumbs={[\n                    {\n                        title: intl.formatMessage(messages.titlesPatchPackages),\n                        to: paths.packages.to,\n                        isActive: false\n                    },\n                    {\n                        title: packageName,\n                        isActive: true\n                    }\n                ]}\n            >{status.hasError ? <Unavailable/> :\n                    <PackageHeader\n                        attributes={{ ...attributes, id: packageName }}\n                        isLoading={status.isLoading}\n                    />}\n            </Header>\n            <Main>\n                <Stack hasGutter>\n                    <StackItem>\n                        <TextContent>\n                            <Text component={TextVariants.h2}>{intl.formatMessage(messages.titlesAffectedSystems)}</Text>\n                        </TextContent>\n                    </StackItem>\n                    <StackItem>\n                        <PackageSystems packageName={packageName}></PackageSystems>\n                    </StackItem>\n                </Stack>\n            </Main>\n        </React.Fragment>\n    );\n};\n\nPackageDetail.propTypes = {\n    match: propTypes.any\n};\n\nexport default withRouter(PackageDetail);\n"],"sourceRoot":""}